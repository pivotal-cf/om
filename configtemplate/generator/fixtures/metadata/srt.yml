description: Gives developers the ability to push apps on a dynamically-configured
  software stack
form_types:
- description: |
    Application Service hosts applications at subdomains under its apps domain and
    assigns system components to subdomains under its system domain. You need
    to configure a wildcard DNS for both the apps domain and system domain. The
    two domains can be the same, although this is not recommended.
  label: Domains
  name: domains
  property_inputs:
  - description: |
      This domain is for system-level PCF components, such as the API, UAA,
      or Apps Manager. You must set up a wildcard DNS record for this domain
      that points to your entry point load balancer or HAProxy as configured
      on the Networking tab.
    label: System Domain
    placeholder: system.example.com
    reference: .cloud_controller.system_domain
  - description: |
      This domain is the default domain that applications will use for their
      hostnames. This domain also requires a wildcard DNS record. Use the
      Cloud Foundry command line interface (cf CLI) to add or delete
      subdomains assigned to individual apps.
    label: Apps Domain
    placeholder: apps.example.com
    reference: .cloud_controller.apps_domain
  verifiers:
  - name: Verifiers::WildcardDomainVerifier
    properties:
      domain: .cloud_controller.system_domain
  - name: Verifiers::WildcardDomainVerifier
    properties:
      domain: .cloud_controller.apps_domain
- description: |
    Configure security and routing services for your platform. It is usually
    preferable to use your own load balancer instead of an HAProxy instance as
    your point-of-entry to the platform.
  label: Networking
  name: networking
  property_inputs:
  - description: |
      If you are deploying onto an infrastructure that does not support
      automated assignment of routers to load balancers (vSphere), or you are
      intending to manually configure your load balancer with the IP
      addresses of the routers, you should enter static IP addresses here
      that will be used by the routers. On infrastructures where automated
      load balancer assignment is supported (AWS, GCP, Azure), this field can
      be left blank and the "Load Balancers" field on the "Resource Config"
      tab can be filled out with the correct load balancer assignment.
    label: Router IPs
    reference: .router.static_ips
  - description: |
      Enter static IPs for the Diego Brain(s), which will accept requests to
      SSH into application containers on port 2222, and register a load
      balancer with these IPs. If deploying PCF to AWS with an ELB, do not
      enter IP addresses here. Instead, add the name of your ELB in the
      Resource Config section, in the ELB Name column for Diego Brain.
    label: SSH Proxy IPs
    reference: .diego_brain.static_ips
  - description: |
      If you are using HAProxy, enter its IP address(es). The addresses must
      be within your subnet CIDR block. Point your DNS to this IP address
      unless you are using your own load balancer.
    label: HAProxy IPs
    reference: .ha_proxy.static_ips
  - description: |
      Enter the IP address(es) you would like to designate for the TCP
      Routers, and point your load balancer to these addresses. If deploying
      to AWS with an ELB, do not enter IP addresses here. Instead, in the
      Resource Config section, add your ELB by name to the ELB Name column
      for TCP Router.
    label: TCP Router IPs
    reference: .tcp_router.static_ips
  - label: Certificates and Private Keys for HAProxy and Router
    property_inputs:
    - description: A human-readable name describing the use of this certificate.
      label: Name
      reference: name
    - description: |
        This certificate is used to terminate SSL traffic at either the
        HAProxy or Router. The certificate can have multiple domains
        attributed to it, for example if you have separate system and
        application domains.
      label: Certificate and Private Key for HAProxy and Router
      reference: certificate
    reference: .properties.networking_poe_ssl_certs
  - description: |
      In addition to well-known, public CAs, and those trusted via the BOSH
      trusted certificates collection, these certificates can be used to
      validate the certificates from incoming client requests. All CA
      certificates should be appended together into a single collection of
      PEM-encoded entries.
    label: Certificate Authorities Trusted by Router and HAProxy
    reference: .properties.routing_custom_ca_certificates
  - label: Minimum version of TLS supported by HAProxy and Router
    reference: .properties.routing_minimum_tls_version
    selector_property_inputs:
    - label: TLSv1.0
      reference: .properties.routing_minimum_tls_version.tls_v1_0
    - label: TLSv1.1
      reference: .properties.routing_minimum_tls_version.tls_v1_1
    - label: TLSv1.2
      reference: .properties.routing_minimum_tls_version.tls_v1_2
  - description: |
      To comply with GDPR, select one of the options to disable logging
      of client IPs. If the source IP exposed by your load balancer is
      its own, choose to disable logging of XFF header only. If the
      source IP exposed by your load balancer is that of the downstream
      client, choose to disable logging of the source IP also.
    label: Logging of Client IPs in CF Router
    reference: .properties.routing_log_client_ips
    selector_property_inputs:
    - label: Log client IPs
      reference: .properties.routing_log_client_ips.log_client_ips
    - label: Disable logging of X-Forwarded-For header only
      reference: .properties.routing_log_client_ips.disable_x_forwarded_for
    - label: Disable logging of both source IP and X-Forwarded-For header
      reference: .properties.routing_log_client_ips.disable_all_log_client_ips
  - label: |
      Configure support for the X-Forwarded-Client-Cert header. This header
      can be used by applications to verify the requester via mutual TLS.
      The option you should select depends upon where you will be terminating
      the TLS connection for the first time.
    reference: .properties.routing_tls_termination
    selector_property_inputs:
    - label: |
        TLS terminated for the first time at infrastructure load balancer
      reference: .properties.routing_tls_termination.load_balancer
    - label: |
        TLS terminated for the first time at HAProxy
      reference: .properties.routing_tls_termination.ha_proxy
    - label: |
        TLS terminated for the first time at the Router
      reference: .properties.routing_tls_termination.router
  - label: Router behavior for Client Certificate Validation
    reference: .properties.router_client_cert_validation
    selector_property_inputs:
    - label: |
        Router does not request client certificates. This option is incompatible
        with XFCC options "TLS terminated for the first time at HAProxy" and
        "TLS terminated for the first time at the Router" because these options
        require mutual authentication.
      reference: .properties.router_client_cert_validation.none
    - label: |
        Router requests but does not require client certificates.
      reference: .properties.router_client_cert_validation.request
    - label: |
        Router requires client certificates.
      reference: .properties.router_client_cert_validation.require
  - description: |
      An ordered, colon-delimited list of Golang supported TLS cipher suites
      in OpenSSL format. The recommended setting is
      "ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384".
      Operators should verify that these are supported by any clients or
      downstream components that will initiate TLS handshakes with the Router.
    label: TLS Cipher Suites for Router
    reference: .properties.gorouter_ssl_ciphers
  - description: |
      An ordered, colon-delimited list of TLS cipher suites in OpenSSL format.
      The recommended setting is
      "DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384".
      Operators should verify that these are supported by any clients or downstream
      components that will initiate TLS handshakes with the HAProxy.
    label: TLS Cipher Suites for HAProxy
    reference: .properties.haproxy_ssl_ciphers
  - label: |
      HAProxy forwards requests to Router over TLS. When enabled, HAProxy
      will forward all requests to the Router over TLS. HAProxy will use
      the CA provided  to verify the certificates provided by the Router.
    reference: .properties.haproxy_forward_tls
    selector_property_inputs:
    - label: Enable
      property_inputs:
      - description: |
          You need to provide a certificate authority for the certificate
          and key provided in the "Certificate and Private Key for HAProxy
          and Router" field. HAProxy will verify those certificates using
          this CA when establishing a connection. If you generated that
          certificate and key using the "Generate RSA Certificate" feature,
          then your CA is the Ops Manager CA, and can be found by visiting
          the "/api/v0/certificate_authorities" API endpoint.
        label: Certificate Authority for HAProxy Backend
        reference: .properties.haproxy_forward_tls.enable.backend_ca
      reference: .properties.haproxy_forward_tls.enable
    - label: Disable
      reference: .properties.haproxy_forward_tls.disable
  - label: HAProxy support for HSTS
    reference: .properties.haproxy_hsts_support
    selector_property_inputs:
    - label: Enable
      property_inputs:
      - label: Max Age in Seconds
        reference: .properties.haproxy_hsts_support.enable.max_age
      - label: Include Subdomains
        reference: .properties.haproxy_hsts_support.enable.include_subdomains
      - label: Enable Preload
        reference: .properties.haproxy_hsts_support.enable.enable_preload
      reference: .properties.haproxy_hsts_support.enable
    - label: Disable
      reference: .properties.haproxy_hsts_support.disable
  - description: |
      You can disable SSL verification if you are using your own self-signed
      certificates that are not from a trusted CA.
    label: Disable SSL certificate verification for this environment
    reference: .ha_proxy.skip_cert_verify
  - description: When checked, HAProxy and Gorouter will not listen on port 80.
    label: Disable HTTP on HAProxy and Gorouter
    reference: .properties.routing_disable_http
  - description: |
      If checked, this turns on the secure flag for cookies generated by
      router.
    label: Disable insecure cookies on the Router
    reference: .router.disable_insecure_cookies
  - description: |
      If checked, the router will include Zipkin tracing headers on all
      incoming requests.
    label: Enable Zipkin tracing headers on the router
    reference: .router.enable_zipkin
  - description: |
      When enabled, the Router will write access logs to the local disk.
      Under some circumstances, it is advisable to disable this feature
      to prevent Router from filling the local disk entirely with the
      contents of access logs.
    label: Enable Router to write access logs locally
    reference: .router.enable_write_access_logs
  - description: |
      When disabled, routers of Application Service support applications deployed
      to Isolation Segments. When enabled, routers will reject requests for
      Isolation Segments, isolating the network for those applications.
      Do not enable this option without deploying routers for each
      Isolation Segment first.
    label: |
      Routers reject requests for Isolation Segments
    reference: .router.enable_isolated_routing
  - description: |
      When enabled, Gorouter will parse each request for the presence
      of PROXY metadata. This comes with a performance penalty.
      If a client IP is sent this way, as when a load balancer
      terminates TLS but doesn't support HTTP, Gorouter will set
      the X-Forwarded-For header to this value.
    label: Enable support for PROXY protocol in CF Router
    reference: .properties.router_enable_proxy
  - label: |
      Choose whether to enable route services. Route services enable you to
      proxy requests to your app over TLS to arbitrary URLs before hitting
      your app.
    reference: .properties.route_services
    selector_property_inputs:
    - label: Enable route services
      reference: .properties.route_services.enable
    - label: Disable route services
      reference: .properties.route_services.disable
  - description: |
      Maximum concurrent TCP connections per backend for each instance of
      the Router. A value of 0 means unlimited.
    label: Max Connections Per Backend
    reference: .properties.router_backend_max_conn
  - label: Enable Keepalive Connections for Router
    reference: .properties.router_keepalive_connections
    selector_property_inputs:
    - label: Enable
      reference: .properties.router_keepalive_connections.enable
    - label: Disable
      reference: .properties.router_keepalive_connections.disable
  - description: |
      Timeout for connections from Router (and HAProxy, if you use it) to
      applications and system components. Increase this to accommodate larger
      uploads over connections with high latency.
    label: Router Timeout to Backends (in seconds)
    reference: .router.request_timeout_in_seconds
  - description: |
      Duration in seconds to maintain an open connection when client supports keep-alive.
    label: Frontend Idle Timeout for Gorouter and HAProxy
    reference: .router.frontend_idle_timeout
  - description: |
      Specifies the amount of time, in seconds, that the Router will continue
      to accept connections before shutting down. During this period the
      healthcheck will report unhealthy to cause load balancers to fail over
      to other Routers. This value should be greater than or equal to the max
      time it could take your load balancer to consider a Router instance
      unhealthy, given contiguous failed healthchecks.
    label: Load Balancer Unhealthy Threshold
    reference: .router.drain_wait
  - description: |
      Specifies the amount of time, in seconds, to wait until declaring the
      router instance started. This allows an external load balancer time to
      register the instance as healthy.
    label: Load Balancer Healthy Threshold
    reference: .router.lb_healthy_threshold
  - description: |
      A comma-separated list of HTTP headers that will annotate access log
      events on the GoRouter.
    label: HTTP Headers to Log
    reference: .router.extra_headers_to_log
  - description: |
      Buffer size (in bytes) to use for requests, any requests larger
      than this (large cookies or query strings) will result in a
      gateway error. The default value is 16384.
    label: HAProxy Request Max Buffer Size
    reference: .properties.haproxy_max_buffer_size
  - description: |
      A comma-separated list of domains to protect from requests from unknown
      sources. Use this property in conjunction with "Trusted CIDRs" to
      protect these domains from requests from unknown sources.
    label: HAProxy Protected Domains
    reference: .ha_proxy.internal_only_domains
  - description: |
      A space-separated list of CIDRs allowed to make requests to the domains
      listed in the "Protected Domains" field. For example, specifying
      10.0.1.0/24 would allow any requests originating at a host IP in that
      range to reach applications or services hosted on the "Protected
      Domains" list.
    label: HAProxy Trusted CIDRs
    reference: .ha_proxy.trusted_domain_cidrs
  - description: |
      Default is 443. Enter a new value to override the default, for instance
      if port 443 on your load balancer is used for other traffic.
    label: Loggregator Port
    reference: .properties.logger_endpoint_port
  - label: Container Network Interface Plugin
    reference: .properties.container_networking_interface_plugin
    selector_property_inputs:
    - label: Silk
      property_inputs:
      - description: |
          The default 1454 bytes is fine for most cases, but you might need less,
          such as for networks that use GRE tunnels.
        label: Applications Network Maximum Transmission Unit (MTU) (in bytes)
        reference: .properties.container_networking_interface_plugin.silk.network_mtu
      - description: |
          Defines the range of the overlay network and must specify a RFC
          1918 range. Defaults to 10.255.0.0/16.
        label: |
          Overlay Subnet (Only change this is you need to avoid address
          collision with a third-party service on the same subnet.)
        placeholder: 10.255.0.0/16
        reference: .properties.container_networking_interface_plugin.silk.network_cidr
      - description: |
          Host port used for receiving VXLAN packets. Defaults to 4789.
        label: VXLAN Tunnel Endpoint Port
        reference: .properties.container_networking_interface_plugin.silk.vtep_port
      - description: |
          Denied traffic logging is rate limited. Override the default of 1 packet/second.
        label: Denied logging interval (packets/second)
        reference: .properties.container_networking_interface_plugin.silk.iptables_denied_logs_per_sec
      - description: |
          UDP traffic logging is rate limited. Override the default of 100 packets/second.
        label: UDP logging interval (packets/second)
        reference: .properties.container_networking_interface_plugin.silk.iptables_accepted_udp_logs_per_sec
      - description: |
          Enabling this feature will increase log volume.
        label: Log traffic for all accepted/denied application packets
        reference: .properties.container_networking_interface_plugin.silk.enable_log_traffic
      - description: |
          Override DNS servers to be used in containers. Defaults to the same as
          the host. A comma-separated list of servers can be specified.
        label: DNS Servers
        reference: .properties.container_networking_interface_plugin.silk.dns_servers
      reference: .properties.container_networking_interface_plugin.silk
    - label: External
      reference: .properties.container_networking_interface_plugin.external
  - label: |
      Enable TCP requests to your apps via specific ports on the TCP router.
      You will want to configure a load balancer to forward these TCP
      requests to the TCP routers. If you do not have a load balancer, then
      you can also send traffic directly to the TCP router.
    reference: .properties.tcp_routing
    selector_property_inputs:
    - label: |
        Select this option if you prefer to enable TCP Routing at a later
        time
      reference: .properties.tcp_routing.disable
    - label: Enable TCP Routing
      property_inputs:
      - description: |
          Enter the range of ports reserved for TCP routes. These ports
          must be available on your load balancer. You can specify a list
          of ports with commas between each port number and specify
          ranges of ports with dashes between the first and last port
          number. This configuration only applies the first time you
          specify it here, if you later want to update the ports you must
          do so with the CF CLI.
        label: |
          TCP Routing Ports (one-time configuration, if you want to
          update this value you can via the CF CLI)
        reference: .properties.tcp_routing.enable.reservable_ports
      reference: .properties.tcp_routing.enable
- description: |
    Enable microservice frameworks, private Docker registries, and other
    services that support your applications at a container level.
  label: Application Containers
  name: app_containers
  property_inputs:
  - description: Enable custom-built application runtime buildpacks.
    label: Enable Custom Buildpacks
    reference: .cloud_controller.enable_custom_buildpacks
  - description: |
      If you are using a load balancer instead of HAProxy, to enable SSH
      traffic ensure that your load balancer has port 2222 open. PCF users can
      give SSH access to an app only if an admin assigns them a Space Developer
      role in the space that the app runs in. Admins can grant this role in
      Apps Manager or via the cf CLI.
    label: Allow SSH access to app containers
    reference: .cloud_controller.allow_app_ssh_access
  - description: |
      When enabled and the space has SSH enabled, a new app will have SSH
      enabled. Turning this feature off will disable SSH for new apps but allow
      developers to enable it when necessary.
    label: Enable SSH when an app is created
    reference: .cloud_controller.default_app_ssh_access
  - description: |
      Enabling the GrootFS container image plugin is recommended.
      However, if you experience issues with GrootFS, you can disable the plugin
      and rollback to the image plugin that is built into Garden RunC.
      It is recommended to recreate all VMs in the BOSH Director config
      when toggling this option on or off.
    label: Enable the GrootFS container image plugin for Garden RunC
    reference: .properties.enable_grootfs
  - description: |
      Improves resiliency and consistency for application routes.
    label: Router uses TLS to verify application identity
    reference: .properties.rep_proxy_enabled
  - description: |
      If you use private Docker image registries that are secured with
      self-signed certificates, enter them here as a comma-delimited list. List
      each registry as either an IP:Port tuple or a Hostname:Port tuple.
    label: Private Docker Insecure Registry Whitelist
    placeholder: |
      10.10.10.10:8888,example.com:8888
    reference: .diego_cell.insecure_docker_registry_list
  - label: Docker Images Disk-Cleanup Scheduling on Cell VMs
    reference: .properties.garden_disk_cleanup
    selector_property_inputs:
    - label: Never clean up Cell disk-space
      reference: .properties.garden_disk_cleanup.never
    - label: Routinely clean up Cell disk-space
      reference: .properties.garden_disk_cleanup.routine
    - label: Clean up disk-space once threshold is reached
      property_inputs:
      - description: |
          Disk cleanup will initiate whenever a Cell has exceeded this much
          disk-space for filesystem layers.
        label: Threshold of Disk-Used (MB)
        reference: .properties.garden_disk_cleanup.threshold.cleanup_threshold_in_mb
      reference: .properties.garden_disk_cleanup.threshold
  - description: |
      Maximum number of inflight container starts allowed globally. Value of 0
      or less indicates no limit.
    label: Max Inflight Container Starts
    reference: .diego_brain.starting_container_count_maximum
  - label: |
      Enabling NFSv3 volume services will allow application developers to bind
      existing NFS volumes to their applications for shared file access.
    reference: .properties.nfs_volume_driver
    selector_property_inputs:
    - label: Enable
      property_inputs:
      - description: |
          Service Account User name (required for LDAP integration only)
        label: LDAP Service Account User
        reference: .properties.nfs_volume_driver.enable.ldap_service_account_user
      - description: |
          Service Account Password (required for LDAP integration only)
        label: LDAP Service Account Password
        reference: .properties.nfs_volume_driver.enable.ldap_service_account_password
      - description: |
          Server hostname or IP address (required for LDAP integration only)
        label: LDAP Server Host
        reference: .properties.nfs_volume_driver.enable.ldap_server_host
      - description: |
          Server port (required for LDAP integration only). Defaults to 389.
        label: LDAP Server Port
        reference: .properties.nfs_volume_driver.enable.ldap_server_port
      - description: |
          FQDN for user records searched during user uid resolution
          (required for LDAP integration only). For example, the FQDN
          value can be specified as "cn=Users,dc=corp,dc=test,dc=com".
        label: LDAP User Fully-Qualified Domain Name
        placeholder: cn=Users,dc=corp,dc=test,dc=com
        reference: .properties.nfs_volume_driver.enable.ldap_user_fqdn
      reference: .properties.nfs_volume_driver.enable
    - label: Disable
      reference: .properties.nfs_volume_driver.disable
- description: |
    Configure restrictions and default settings for applications pushed to
    Application Service.
  label: Application Developer Controls
  name: application_dev_controls
  property_inputs:
  - description: |
      Maximum size of an application upload droplet.
    label: Maximum File Upload Size (MB)
    reference: .cloud_controller.max_file_size
  - description: |
      Memory allocated to a newly-pushed app when no value is specified at `cf
      push`.
    label: Default App Memory (MB)
    reference: .cloud_controller.default_app_memory
  - description: |
      Default memory limit for all apps in an org. This default only applies
      for the first installation of Application Service. After initial
      installation, use the CLI to manage quotas.
    label: Default App Memory Quota per Org (MB)
    reference: .cloud_controller.default_quota_memory_limit_mb
  - description: |
      Maximum disk allocated per app. In the event of a system upgrade or
      outage that causes a rolling deploy, larger apps may not successfully
      re-deploy if there is insufficient disk capacity.
    label: Maximum Disk Quota per App (MB)
    reference: .cloud_controller.max_disk_quota_app
  - description: |
      Default disk allocated per app. In the event of a system upgrade or
      outage that causes a rolling deploy, larger apps may not re-deploy
      successfully if there is insufficient disk capacity.
    label: Default Disk Quota per App (MB)
    reference: .cloud_controller.default_disk_quota_app
  - description: |
      Default maximum number of service instances in an org. This default
      only applies for the first installation of Application Service, otherwise
      use the CLI to manage quotas
    label: Default Service Instances Quota per Org
    reference: .cloud_controller.default_quota_max_number_services
  - description: |
      Server-side timeout for staging an application droplet with Cloud
      Controller.
    label: Staging Timeout (Seconds)
    placeholder: 900
    reference: .cloud_controller.staging_timeout_in_seconds
  - description: |
      Enabling this feature will allow Space Developers to manage the
      network policies for their applications.
    label: Allow Space Developers to manage network policies
    reference: .properties.cf_networking_enable_space_developer_self_service
  - description: |
      Enable apps to publish and discover internal service endpoints
      (apps.internal) for each other. Requires BOSH DNS.
    label: Enable Service Discovery for Apps
    reference: .properties.enable_service_discovery_for_apps
- description: |
    Application Security Groups Acknowledgement
  label: Application Security Groups
  markdown: |
    Setting appropriate Application Security Groups that control application
    network policy is the responsibility of the Application Service administration
    team. Please refer to the Application Security Groups topic in the Pivotal
    Cloud Foundry documentation for more detail on completing this activity
    after the Application Service deployment completes.
  name: application_security_groups
  property_inputs:
  - label: |
      Type "X" to acknowledge that you understand this message
    reference: .properties.security_acknowledgement
- description: |
    Configure your user store access, which can be an internal user store
    (managed by Cloud Foundry's UAA) or an external user store (LDAP or SAML).
  label: Authentication and Enterprise SSO
  name: sso
  property_inputs:
  - label: |
      Configure your UAA user account store with either internal or external
      authentication mechanisms
    reference: .properties.uaa
    selector_property_inputs:
    - label: |
        Internal UAA (provided by Application Service; configure your password
        policy below)
      property_inputs:
      - description: Minimum number of characters for a valid password.
        label: Minimum Password Length
        reference: .properties.uaa.internal.password_min_length
      - description: |
          Minimum number of uppercase characters required for a valid
          password.
        label: Minimum Uppercase Characters Required for Password
        reference: .properties.uaa.internal.password_min_uppercase
      - description: |
          Minimum number of lowercase characters required for a valid
          password
        label: Minimum Lowercase Characters Required for Password
        reference: .properties.uaa.internal.password_min_lowercase
      - description: |
          Minimum number of digits required for a valid password.
        label: Minimum Numerical Digits Required for Password
        reference: .properties.uaa.internal.password_min_numeric
      - description: |
          Minimum number of special characters required for a valid
          password.
        label: Minimum Special Characters Required for Password
        reference: .properties.uaa.internal.password_min_special
      - description: |
          Maximum allowed password entry attempts (within a five minute
          timespan) before the account is locked
        label: Maximum Password Entry Attempts Allowed
        reference: .properties.uaa.internal.password_max_retry
      reference: .properties.uaa.internal
    - label: |
        SAML Identity Provider (SAML Identity Providers created by PAS must
        be manually disabled when you no longer require them.)
      property_inputs:
      - description: |
          Name of Identity Provider. Allowed characters are alphanumeric,
          plus `_`, and `-`. Do not change this name once deployed.
        label: Provider Name
        reference: .properties.uaa.saml.sso_name
      - description: Shows as a link on the login page.
        label: Display Name
        reference: .properties.uaa.saml.display_name
      - description: Metadata XML content for the Identity Provider.
        label: |
          Provider Metadata (if you would rather provide an SSO endpoint
          URL, skip to the next field)
        reference: .properties.uaa.saml.sso_xml
      - description: |
          If you did not provide metadata above, enter an SSO endpoint
          that returns the metadata.
        label: (OR) Provider Metadata URL
        reference: .properties.uaa.saml.sso_url
      - description: |
          Select the name identifier format configured for the identity
          provider. This translates to the username on Pivotal Cloud
          Foundry.
        label: Name ID Format
        reference: .properties.uaa.saml.name_id_format
      - description: |
          Comma-separated list of domains, e.g. example.com. This is used
          for inviting external users to Apps Manager.
        label: Email Domain(s)
        reference: .properties.uaa.saml.email_domains
      - description: Map the first name attribute from the SAML assertion.
        label: First Name Attribute
        reference: .properties.uaa.saml.first_name_attribute
      - description: Map the last name attribute from the SAML assertion.
        label: Last Name Attribute
        reference: .properties.uaa.saml.last_name_attribute
      - description: Map the email attribute from the SAML assertion.
        label: Email Attribute
        reference: .properties.uaa.saml.email_attribute
      - description: |
          Map the external groups attribute from the SAML assertion.
        label: External Groups Attribute
        reference: .properties.uaa.saml.external_groups_attribute
      - description: |
          If enabled, signed authentication requests will be sent to the
          SAML identity provider.
        label: Sign Authentication Requests
        reference: .properties.uaa.saml.sign_auth_requests
      - description: |
          If enabled, the SAML identity provider should always send
          signed assertions.
        label: Require Signed Assertions
        reference: .properties.uaa.saml.require_signed_assertions
      reference: .properties.uaa.saml
    - description: null
      label: LDAP Server
      property_inputs:
      - description: |
          Required for LDAP. Must start with `ldap://` or `ldaps://`.
          Multiple entries can be separated by spaces.
        label: Server URL
        placeholder: |
          ldaps://example.com
        reference: .properties.uaa.ldap.url
      - description: |
          Required for LDAP. This is the unique username and password for
          binding to the server.
        label: LDAP Credentials
        reference: .properties.uaa.ldap.credentials
      - description: |
          Required for LDAP. Example: `ou=Users,dc=example,dc=com`.
        label: User Search Base
        placeholder: ou=Groups,dc=example,dc=com
        reference: .properties.uaa.ldap.search_base
      - description: Required for LDAP. Replace `{0}` with username.
        label: User Search Filter
        reference: .properties.uaa.ldap.search_filter
      - description: |
          Required if mapping LDAP groups to Admin role. Example:
          `ou=Groups,dc=example,dc=com`.
        label: Group Search Base
        placeholder: ou=Groups,dc=example,dc=com
        reference: .properties.uaa.ldap.group_search_base
      - description: |
          Required if mapping LDAP groups to Admin role. Replace `{0}`
          with user DN.
        label: Group Search Filter
        reference: .properties.uaa.ldap.group_search_filter
      - description: |
          Required only for ldaps://. This is the server certificate if
          using a Self Signed Certificate. If using a CA certificate,
          this must be the root certificate from your CA.
        label: Server SSL Cert
        reference: .properties.uaa.ldap.server_ssl_cert
      - description: |
          Required only for ldaps:// and using a Self Signed Certificate.
        label: Server SSL Cert AltName
        reference: .properties.uaa.ldap.server_ssl_cert_alias
      - description: |
          The name of the attribute that contains the first name.
        label: First Name Attribute
        reference: .properties.uaa.ldap.first_name_attribute
      - description: |
          The name of the attribute that contains the last name.
        label: Last Name Attribute
        reference: .properties.uaa.ldap.last_name_attribute
      - description: |
          The name of the attribute that contains the user's email
          address.
        label: Email Attribute
        reference: .properties.uaa.ldap.mail_attribute_name
      - description: |
          Comma-separated list of domains, e.g. example.com. This is used
          for inviting external users to Apps Manager.
        label: Email Domain(s)
        reference: .properties.uaa.ldap.email_domains
      - label: LDAP Referrals
        reference: .properties.uaa.ldap.ldap_referrals
      reference: .properties.uaa.ldap
- description: |
    Configure the User Account and Authentication Server
  label: UAA
  name: uaa
  property_inputs:
  - label: |
      Choose the location of your UAA database
    reference: .properties.uaa_database
    selector_property_inputs:
    - label: |
        Internal MySQL (preferred for complete high-availability)
      reference: .properties.uaa_database.internal_mysql
    - label: |
        External (preferred if, for example, you use AWS RDS)
      property_inputs:
      - label: Hostname
        reference: .properties.uaa_database.external.host
      - label: TCP Port
        reference: .properties.uaa_database.external.port
      - label: Username
        reference: .properties.uaa_database.external.uaa_username
      - label: Password
        reference: .properties.uaa_database.external.uaa_password
      reference: .properties.uaa_database.external
  - description: When generating tokens, UAA will use this URI as the issuer.
    label: JWT Issuer URI
    reference: .uaa.issuer_uri
  - description: Private key and certificate for the service provider.
    label: SAML Service Provider Credentials
    reference: .uaa.service_provider_key_credentials
  - description: Passphrase for the service provider private key.
    label: SAML Service Provider Key Password
    reference: .uaa.service_provider_key_password
  - description: |
      An entry in this field overrides the default Entity ID value of
      "http://login.<system-domain>". The <system-domain> portion of
      that default is configured on the "Domains" tab.
    label: SAML Entity ID Override
    reference: .properties.saml_entity_id_override
  - description: |
      The supported algorithm for signed requests and assertions.
    label: Signature Algorithm
    reference: .properties.saml_signature_algorithm
  - description: Set the lifetime of the access token for Apps Manager.
    label: Apps Manager Access Token Lifetime (in seconds)
    reference: .uaa.apps_manager_access_token_lifetime
  - description: Set the lifetime of the refresh token for Apps Manager.
    label: Apps Manager Refresh Token Lifetime (in seconds)
    reference: .uaa.apps_manager_refresh_token_lifetime
  - description: Set the lifetime of the access token for the `cf` CLI.
    label: Cloud Foundry CLI Access Token Lifetime (in seconds)
    reference: .uaa.cf_cli_access_token_lifetime
  - description: Set the lifetime of the refresh token for the `cf` CLI.
    label: Cloud Foundry CLI Refresh Token Lifetime (in seconds)
    reference: .uaa.cf_cli_refresh_token_lifetime
  - description: Set the max timeout for a global login session.
    label: Global Login Session Max Timeout (in seconds)
    reference: .properties.uaa_session_cookie_max_age
  - description: Set the max timeout for idle global login sessions.
    label: Global Login Session Idle Timeout (in seconds)
    reference: .properties.uaa_session_idle_timeout
  - description: The text used to prompt for a username during login
    label: Customize Username Label (on login page)
    reference: .uaa.customize_username_label
  - description: The text used to prompt for a password during login
    label: Customize Password Label (on login page)
    reference: .uaa.customize_password_label
  - description: |
      A pipe ("|") delimited set of regular expressions of IP addresses that are
      considered reverse proxies. When a request from these IP addresses come
      in, the X-FORWARDED-FOR and X-FORWARDED-PROTO headers will be respected.
    label: Proxy IPs Regular Expression
    reference: .uaa.proxy_ips_regex
  verifiers:
  - name: Verifiers::MysqlDatabaseVerifier
    properties:
      database: .properties.uaa_database_name
      host: .properties.uaa_database.external.host
      password: .properties.uaa_database.external.uaa_password
      port: .properties.uaa_database.external.port
      username: .properties.uaa_database.external.uaa_username
- description: |
    Configure the CredHub Server
  label: CredHub
  name: credhub
  property_inputs:
  - label: |
      Choose the location of your CredHub database
    reference: .properties.credhub_database
    selector_property_inputs:
    - label: |
        Internal MySQL (preferred for complete high-availability)
      reference: .properties.credhub_database.internal_mysql
    - label: |
        External (preferred if, for example, you use Google Cloud SQL)
      property_inputs:
      - label: Hostname
        reference: .properties.credhub_database.external.host
      - label: TCP Port
        reference: .properties.credhub_database.external.port
      - label: Username
        reference: .properties.credhub_database.external.username
      - label: Password
        reference: .properties.credhub_database.external.password
      - label: Database CA Certificate
        reference: .properties.credhub_database.external.tls_ca
      reference: .properties.credhub_database.external
  - description: |
      The name of the HSM provider partition.
    label: HSM Provider Partition
    reference: .properties.credhub_hsm_provider_partition
  - description: |
      The password used to access the HSM provider partition.
    label: HSM Provider Partition Password
    reference: .properties.credhub_hsm_provider_partition_password
  - description: |
      The client certificate for the HSM.
    label: HSM Provider Client Certificate
    reference: .properties.credhub_hsm_provider_client_certificate
  - label: HSM Provider Servers
    property_inputs:
    - description: |
        The host name or IP address of the HSM server.
      label: Host Address
      reference: host_address
    - description: |
        The port of the HSM server.
      label: Port
      reference: port
    - description: |
        The serial number of the HSM partition.
      label: Partition Serial Number
      reference: partition_serial_number
    - description: |
        The certificate for the HSM server.
      label: HSM Certificate
      reference: hsm_certificate
    reference: .properties.credhub_hsm_provider_servers
  - label: Encryption Keys
    property_inputs:
    - description: |
        Name of the encryption key.
      label: Name
      reference: name
    - label: Provider
      reference: provider
    - description: |
        The encryption key will be used to encrypt all data. The key must be
        at least 20 characters long.
      label: Key
      reference: key
    - description: |
        Checking this checkbox marks this key as the primary encryption key.
        Only one key should be marked as primary.
      label: Primary
      reference: primary
    reference: .properties.credhub_key_encryption_passwords
  - description: |
      When checked, service brokers that support storing their service
      instance credentials in CredHub will do so.
    label: Secure Service Instance Credentials
    reference: .properties.secure_service_instance_credentials
  verifiers:
  - name: Verifiers::MysqlDatabaseVerifier
    properties:
      database: .properties.credhub_database_name
      host: .properties.credhub_database.external.host
      password: .properties.credhub_database.external.password
      port: .properties.credhub_database.external.port
      username: .properties.credhub_database.external.username
- description: |
    Place the databases used by Application Service components.
  label: Databases
  name: system_database
  property_inputs:
  - label: Choose the location of your system databases
    reference: .properties.system_database
    selector_property_inputs:
    - label: |
        Internal Databases - MySQL (preferred for complete high-availability)
      reference: .properties.system_database.internal_mysql
    - label: External Databases (preferred if, for example, you use AWS RDS)
      property_inputs:
      - label: Hostname
        reference: .properties.system_database.external.host
      - label: TCP Port
        reference: .properties.system_database.external.port
      - label: App Usage Service Database Username
        reference: .properties.system_database.external.app_usage_service_username
      - label: App Usage Service Database Password
        reference: .properties.system_database.external.app_usage_service_password
      - label: Autoscaling Service Database Username
        reference: .properties.system_database.external.autoscale_username
      - label: Autoscaling Service Database Password
        reference: .properties.system_database.external.autoscale_password
      - label: Cloud Controller Database Username
        reference: .properties.system_database.external.ccdb_username
      - label: Cloud Controller Database Password
        reference: .properties.system_database.external.ccdb_password
      - label: Diego Database Username
        reference: .properties.system_database.external.diego_username
      - label: Diego Database Password
        reference: .properties.system_database.external.diego_password
      - label: Locket Database Username
        reference: .properties.system_database.external.locket_username
      - label: Locket Database Password
        reference: .properties.system_database.external.locket_password
      - label: Network Policy Server Database Username
        reference: .properties.system_database.external.networkpolicyserver_username
      - label: Network Policy Server Database Password
        reference: .properties.system_database.external.networkpolicyserver_password
      - label: NFS Volume Services Database Username
        reference: .properties.system_database.external.nfsvolume_username
      - label: NFS Volume Services Database Password
        reference: .properties.system_database.external.nfsvolume_password
      - label: Notifications Service Database Username
        reference: .properties.system_database.external.notifications_username
      - label: Notifications Service Database Password
        reference: .properties.system_database.external.notifications_password
      - label: Pivotal Account Database Username
        reference: .properties.system_database.external.account_username
      - label: Pivotal Account Database Password
        reference: .properties.system_database.external.account_password
      - label: Routing API Database Username
        reference: .properties.system_database.external.routing_username
      - label: Routing API Database Password
        reference: .properties.system_database.external.routing_password
      - label: Silk Database Username
        reference: .properties.system_database.external.silk_username
      - label: Silk Database Password
        reference: .properties.system_database.external.silk_password
      reference: .properties.system_database.external
  verifiers:
  - name: Verifiers::MysqlDatabaseVerifier
    properties:
      database: .properties.account_database_name
      host: .properties.system_database.external.host
      password: .properties.system_database.external.account_password
      port: .properties.system_database.external.port
      username: .properties.system_database.external.account_username
  - name: Verifiers::MysqlDatabaseVerifier
    properties:
      database: .properties.app_usage_service_database_name
      host: .properties.system_database.external.host
      password: .properties.system_database.external.app_usage_service_password
      port: .properties.system_database.external.port
      username: .properties.system_database.external.app_usage_service_username
  - name: Verifiers::MysqlDatabaseVerifier
    properties:
      database: .properties.autoscale_database_name
      host: .properties.system_database.external.host
      password: .properties.system_database.external.autoscale_password
      port: .properties.system_database.external.port
      username: .properties.system_database.external.autoscale_username
  - name: Verifiers::MysqlDatabaseVerifier
    properties:
      database: .properties.ccdb_database_name
      host: .properties.system_database.external.host
      password: .properties.system_database.external.ccdb_password
      port: .properties.system_database.external.port
      username: .properties.system_database.external.ccdb_username
  - name: Verifiers::MysqlDatabaseVerifier
    properties:
      database: .properties.diego_database_name
      host: .properties.system_database.external.host
      password: .properties.system_database.external.diego_password
      port: .properties.system_database.external.port
      username: .properties.system_database.external.diego_username
  - name: Verifiers::MysqlDatabaseVerifier
    properties:
      database: .properties.locket_database_name
      host: .properties.system_database.external.host
      password: .properties.system_database.external.locket_password
      port: .properties.system_database.external.port
      username: .properties.system_database.external.locket_username
  - name: Verifiers::MysqlDatabaseVerifier
    properties:
      database: .properties.networkpolicyserver_database_name
      host: .properties.system_database.external.host
      password: .properties.system_database.external.networkpolicyserver_password
      port: .properties.system_database.external.port
      username: .properties.system_database.external.networkpolicyserver_username
  - name: Verifiers::MysqlDatabaseVerifier
    properties:
      database: .properties.nfsvolume_database_name
      host: .properties.system_database.external.host
      password: .properties.system_database.external.nfsvolume_password
      port: .properties.system_database.external.port
      username: .properties.system_database.external.nfsvolume_username
  - name: Verifiers::MysqlDatabaseVerifier
    properties:
      database: .properties.notifications_database_name
      host: .properties.system_database.external.host
      password: .properties.system_database.external.notifications_password
      port: .properties.system_database.external.port
      username: .properties.system_database.external.notifications_username
  - name: Verifiers::MysqlDatabaseVerifier
    properties:
      database: .properties.routing_database_name
      host: .properties.system_database.external.host
      password: .properties.system_database.external.routing_password
      port: .properties.system_database.external.port
      username: .properties.system_database.external.routing_username
  - name: Verifiers::MysqlDatabaseVerifier
    properties:
      database: .properties.silk_database_name
      host: .properties.system_database.external.host
      password: .properties.system_database.external.silk_password
      port: .properties.system_database.external.port
      username: .properties.system_database.external.silk_username
- description: |
    Only configure this section if you selected Internal Databases - MySQL
    in the previous Databases section.
  label: Internal MySQL
  markdown: |
    A proxy tier routes MySQL connections from internal components to healthy
    cluster nodes. Configure DNS and/or your own load balancer to point to
    multiple proxy instances for increased availability. TCP healthchecks can
    be configured against port 1936.

    The automated backups functionality works with any S3-compatible file store
    that can receive your backup files.
  name: mysql_config
  property_inputs:
  - description: |
      Enter the IP address(es) for the MySQL proxy instances configured on
      your external load balancer.
    label: MySQL Proxy IPs
    reference: .mysql_proxy.static_ips
  - description: |
      To remove a MySQL proxy as a single point of failure, configure your
      load balancer to route application requests to multiple proxy
      instances. Then enter the IP or hostname of the load balancer here, so
      components reach their MySQL databases through the load balancer. If
      this field is blank, components use the IP of the first MySQL proxy
      instance.
    label: MySQL Service Hostname
    reference: .mysql_proxy.service_hostname
  - description: |
      How frequently the canary checks for replication failure, in seconds.
      Lower numbers will cause the canary to run more frequently, adding load
      to the database.
    label: Replication canary time period
    reference: .mysql_monitor.poll_frequency
  - description: |
      How long the canary waits to verify data is replicating across each
      MySQL node, in seconds. Clusters under heavily load will experience
      some small replication lag as writesets are committed across the nodes.
    label: Replication canary read delay
    reference: .mysql_monitor.write_read_delay
  - description: |
      The MySQL service will send alerts when the cluster experiences a
      replication issue or a node is not allowed to auto-rejoin the cluster.
    label: E-mail address (required)
    placeholder: Fill in your desired email address
    reference: .mysql_monitor.recipient_email
  - description: |
      When disabled, prohibits the creation of command line history files on
      the MySQL nodes.
    label: Allow Command History
    reference: .mysql.cli_history
  - description: |
      When enabled, admin and roadmin will be able to connect from any remote host.
    label: Allow Remote Admin Access
    reference: .mysql.remote_admin_access
  - description: |
      The maximum amount of time, in seconds, that a new node will search
      for existing cluster nodes. The default value is 10 seconds.
    label: Cluster Probe Timeout
    reference: .mysql.cluster_probe_timeout
  - label: Server Activity Logging
    reference: .properties.mysql_activity_logging
    selector_property_inputs:
    - description: Disable server activity logging
      label: Disable server activity logging
      reference: .properties.mysql_activity_logging.disable
    - description: Enable server activity logging
      label: Enable server activity logging
      property_inputs:
      - description: |
          The MySQL service will keep a record of server activity. The
          default setting tracks who connected to the system and what
          queries were processed. For more information, see:
          https://mariadb.com/kb/en/mariadb/about-the-mariadb-audit-plugin/
        label: Event types
        reference: .properties.mysql_activity_logging.enable.audit_logging_events
      reference: .properties.mysql_activity_logging.enable
  - description: |
      Specifies the amount of time, in seconds, to wait until declaring the
      Proxy instance started. This allows an external load balancer time to
      register the instance as healthy.
    label: Load Balancer Healthy Threshold
    reference: .mysql_proxy.startup_delay
  - description: |
      Specifies the amount of time, in seconds, that the MySQL Proxy will
      continue to accept connections before shutting down. During this
      period, the healthcheck will report unhealthy to cause load balancers
      to fail over to other Proxies. This value should be greater than or
      equal to the max time it could take your load balancer to consider a
      Proxy instance unhealthy, given contiguous failed healthchecks.
    label: Load Balancer Unhealthy Threshold
    reference: .mysql_proxy.shutdown_delay
  - description: |
      When checked, nodes unable to IST will be prevented from automatically
      deleting their data and performing an SST.
    label: Prevent node auto re-join
    reference: .mysql.prevent_node_auto_rejoin
- description: |
    This section determines where you would like to place your Application Service
    Cloud Controller's file storage.
  label: File Storage
  name: system_blobstore
  property_inputs:
  - label: Configure your Cloud Controller's filesystem
    reference: .properties.system_blobstore
    selector_property_inputs:
    - label: Internal WebDAV (provided by Application Service)
      reference: .properties.system_blobstore.internal
    - label: |
        External S3-Compatible File Store (if you want to use a service like S3
        or Ceph)
      property_inputs:
      - description: URL endpoint of your S3-compatible file store
        label: URL Endpoint
        reference: .properties.system_blobstore.external.endpoint
      - label: Access Key
        reference: .properties.system_blobstore.external.access_key
      - label: Secret Key
        reference: .properties.system_blobstore.external.secret_key
      - label: S3 Signature Version
        reference: .properties.system_blobstore.external.signature_version
      - description: |
          The AWS Region where the buckets are located, e.g. "us-east-1"
          or "ap-northeast-1".
        label: Region
        placeholder: us-east-1
        reference: .properties.system_blobstore.external.region
      - label: Server-side Encryption (available for AWS S3 only)
        reference: .properties.system_blobstore.external.encryption
      - description: |
          The files uploaded to the blobstore will be encrypted using the given KMS key.
          If Server-side Encryption is enabled and a KMS Key ID is not provided, the default AWS key is used.
        label: KMS Key ID (requires Server-side Encryption to be checked)
        reference: .properties.system_blobstore.external.encryption_kms_key_id
      - description: |
          This setting determines how the buckets are backed up and restored.
          Non-versioned S3 blobstore backup and restore is not supported yet.
          More information at https://docs.pivotal.io/pivotalcf/2-1/customizing/backup-restore/backup-pcf-bbr.html.
          S3 Signature Version must be set to V4 Signature for this to work properly.
        label: Versioning is enabled for all buckets listed below.
        reference: .properties.system_blobstore.external.versioning
      - description: S3 bucket for storing app buildpacks.
        label: Buildpacks Bucket Name
        reference: .properties.system_blobstore.external.buildpacks_bucket
      - description: |
          S3 bucket for storing app droplets. Pivotal recommends that you use
          a unique bucket name for droplets, but you can also use the same
          name as above.
        label: Droplets Bucket Name
        reference: .properties.system_blobstore.external.droplets_bucket
      - description: |
          S3 bucket for storing app packages. Pivotal recommends that you use
          a unique bucket name for packages, but you can also use the same
          name as above.
        label: Packages Bucket Name
        reference: .properties.system_blobstore.external.packages_bucket
      - description: |
          S3 bucket for storing app resources. Pivotal recommends that you
          use a unique bucket name for app resources, but you can also use
          the same name as above.
        label: Resources Bucket Name
        reference: .properties.system_blobstore.external.resources_bucket
      reference: .properties.system_blobstore.external
    - description: null
      label: External Google Cloud Storage with Access Key and Secret Key
      property_inputs:
      - label: Access Key
        reference: .properties.system_blobstore.external_gcs.access_key
      - label: Secret Key
        reference: .properties.system_blobstore.external_gcs.secret_key
      - description: Bucket for storing app buildpacks.
        label: Buildpacks Bucket Name
        reference: .properties.system_blobstore.external_gcs.buildpacks_bucket
      - description: |
          Bucket for storing app droplets. Pivotal recommends that you use a
          unique bucket name for droplets, but you can also use the same name
          as above.
        label: Droplets Bucket Name
        reference: .properties.system_blobstore.external_gcs.droplets_bucket
      - description: |
          Bucket for storing app packages. Pivotal recommends that you use a
          unique bucket name for packages, but you can also use the same name
          as above.
        label: Packages Bucket Name
        reference: .properties.system_blobstore.external_gcs.packages_bucket
      - description: |
          Bucket for storing app resources. Pivotal recommends that you use a
          unique bucket name for app resources, but you can also use the same
          name as above.
        label: Resources Bucket Name
        reference: .properties.system_blobstore.external_gcs.resources_bucket
      reference: .properties.system_blobstore.external_gcs
    - description: null
      label: External Google Cloud Storage with Service Account
      property_inputs:
      - description: |
          Your Google Cloud Platform Project ID. The Project ID can be found
          on the Dashboard of the GCP Console.
        label: GCP Project ID
        reference: .properties.system_blobstore.external_gcs_service_account.project_id
      - description: |
          Your Google Cloud Platform Service Account Email.
        label: GCP Service Account Email
        reference: .properties.system_blobstore.external_gcs_service_account.service_account_email
      - description: |
          Your Google Cloud Platform Service Account Key with access to the specified
          project and bucket in JSON format.
        label: GCP Service Account Key JSON
        reference: .properties.system_blobstore.external_gcs_service_account.service_account_json_key
      - description: Bucket for storing app buildpacks.
        label: Buildpacks Bucket Name
        reference: .properties.system_blobstore.external_gcs_service_account.buildpacks_bucket
      - description: |
          Bucket for storing app droplets. Pivotal recommends that you use a
          unique bucket name for droplets, but you can also use the same name
          as above.
        label: Droplets Bucket Name
        reference: .properties.system_blobstore.external_gcs_service_account.droplets_bucket
      - description: |
          Bucket for storing app packages. Pivotal recommends that you use a
          unique bucket name for packages, but you can also use the same name
          as above.
        label: Packages Bucket Name
        reference: .properties.system_blobstore.external_gcs_service_account.packages_bucket
      - description: |
          Bucket for storing app resources. Pivotal recommends that you use a
          unique bucket name for app resources, but you can also use the same
          name as above.
        label: Resources Bucket Name
        reference: .properties.system_blobstore.external_gcs_service_account.resources_bucket
      reference: .properties.system_blobstore.external_gcs_service_account
    - description: null
      label: External Azure Storage
      property_inputs:
      - label: Account Name
        reference: .properties.system_blobstore.external_azure.account_name
      - label: Access Key
        reference: .properties.system_blobstore.external_azure.access_key
      - description: |
          This is the canonical name for the Azure Cloud environment where
          your storage resides. The default value is AzureCloud, but other options
          include AzureChinaCloud, AzureUSGovernment, and AzureGermanCloud.
        label: Environment
        reference: .properties.system_blobstore.external_azure.environment
      - description: Container for storing app buildpacks.
        label: Buildpacks Container Name
        reference: .properties.system_blobstore.external_azure.buildpacks_container
      - description: |
          Container for storing app droplets. Pivotal recommends that you use
          a unique container name for droplets, but you can also use the same
          name as above.
        label: Droplets Container Name
        reference: .properties.system_blobstore.external_azure.droplets_container
      - description: |
          Container for storing app packages. Pivotal recommends that you use
          a unique container name for packages, but you can also use the same
          name as above.
        label: Packages Container Name
        reference: .properties.system_blobstore.external_azure.packages_container
      - description: |
          Container for storing app resources. Pivotal recommends that you
          use a unique container name for app resources, but you can also use
          the same name as above.
        label: Resources Container Name
        reference: .properties.system_blobstore.external_azure.resources_container
      reference: .properties.system_blobstore.external_azure
  verifiers:
  - name: Verifiers::BlobstoreVerifier
    properties:
      access_key_id: .properties.system_blobstore.external.access_key
      bucket_name: .properties.system_blobstore.external.buildpacks_bucket
      endpoint: .properties.system_blobstore.external.endpoint
      region: .properties.system_blobstore.external.region
      secret_access_key: .properties.system_blobstore.external.secret_key
      signature_version: .properties.system_blobstore.external.signature_version
  - name: Verifiers::BlobstoreVerifier
    properties:
      access_key_id: .properties.system_blobstore.external.access_key
      bucket_name: .properties.system_blobstore.external.droplets_bucket
      endpoint: .properties.system_blobstore.external.endpoint
      region: .properties.system_blobstore.external.region
      secret_access_key: .properties.system_blobstore.external.secret_key
      signature_version: .properties.system_blobstore.external.signature_version
  - name: Verifiers::BlobstoreVerifier
    properties:
      access_key_id: .properties.system_blobstore.external.access_key
      bucket_name: .properties.system_blobstore.external.packages_bucket
      endpoint: .properties.system_blobstore.external.endpoint
      region: .properties.system_blobstore.external.region
      secret_access_key: .properties.system_blobstore.external.secret_key
      signature_version: .properties.system_blobstore.external.signature_version
  - name: Verifiers::BlobstoreVerifier
    properties:
      access_key_id: .properties.system_blobstore.external.access_key
      bucket_name: .properties.system_blobstore.external.resources_bucket
      endpoint: .properties.system_blobstore.external.endpoint
      region: .properties.system_blobstore.external.region
      secret_access_key: .properties.system_blobstore.external.secret_key
      signature_version: .properties.system_blobstore.external.signature_version
- description: |
    Optionally configure rsyslog to forward platform component logs
    to an external service.
    If you do not fill these fields,
    platform logs will not be forwarded
    but will remain available on the component VMs
    and for download via Ops Manager.
  label: System Logging
  name: system_logging
  property_inputs:
  - description: |
      The aggregator must be reachable from the Application Service network, accept
      TCP, UDP or RELP connections, and use the RELP protocol (e.g. rsyslogd).
      You can also configure this with an IP address.
    label: Address
    reference: .properties.syslog_host
  - description: |
      The typical syslogd port is 514. Ensure syslogd is listening on external
      interfaces.
    label: Port
    reference: .properties.syslog_port
  - description: Select the transport protocol for forwarding logs.
    label: Transport Protocol
    reference: .properties.syslog_protocol
  - label: Encrypt syslog using TLS?
    reference: .properties.syslog_tls
    selector_property_inputs:
    - label: "No"
      reference: .properties.syslog_tls.disabled
    - label: "Yes"
      property_inputs:
      - description: |
          Either the accepted fingerprint (SHA1) or name of remote peer, e.g.
          *.example.com.
        label: Permitted Peer
        reference: .properties.syslog_tls.enabled.tls_permitted_peer
      - description: |
          This certificate will ensure that logs get securely transported to
          the syslog destination.
        label: TLS CA Certificate
        reference: .properties.syslog_tls.enabled.tls_ca_cert
      reference: .properties.syslog_tls.enabled
  - description: |
      The number of log messages the buffer holds before dropping messages. A
      larger buffer size might overload the system.
    label: Syslog Drain Buffer Size (# of messages)
    reference: .doppler.message_drain_buffer_size
  - description: |
      Receive container metrics delivered in create-user-provided-service
      (CUPS) Syslog Drain bindings.
    label: Include container metrics in SysLog Drains
    reference: .properties.syslog_metrics_to_syslog_enabled
  - description: |
      When enabled, all requests to Cloud Controller will be captured in the
      syslog
    label: Enable Cloud Controller security event logging
    reference: .cloud_controller.security_event_logging_enabled
  - description: |
      Workaround to avoid truncation of very long
      (> 1024 bytes)
      log lines.
      May negatively impact performance.
    label: Use TCP for file forwarding local transport
    reference: .properties.syslog_use_tcp_for_file_forwarding_local_transport
  - description: |
      Accepts configuration for rsyslog
      in the rainerscript syntax.
      For example,
      'if ($app-name startswith "exampleComponent") then stop'
      can be used to drop all traffic
      from a particular component.
      Entered configuration will be applied
      prior to the forwarding rule.
    label: Custom rsyslog Configuration
    reference: .properties.syslog_rule
- description: |
    Customize colors, images, and text for Apps Manager and the Cloud Foundry
    login portal.
  label: Custom Branding
  name: generic_white_label_config
  property_inputs:
  - description: Defaults to 'Pivotal'
    label: Company Name
    reference: .properties.push_apps_manager_company_name
  - description: Enter a hexadecimal color code like '#71ffda'
    label: Accent Color
    reference: .properties.push_apps_manager_accent_color
  - description: |
      Enter a base64-encoded PNG image string, but leave out the mime-type
      (data:image/png;base64,) string. Only enter the base64 encoded data.
    label: Main Logo (PNGs only)
    reference: .properties.push_apps_manager_logo
  - description: |
      Enter a base64-encoded PNG image string, but leave out the mime-type
      (data:image/png;base64,) string. Only enter the base64 encoded data.
    label: Square Logo (PNGs only)
    reference: .properties.push_apps_manager_square_logo
  - description: |
      Enter a base64-encoded PNG image string, but leave out the mime-type
      (data:image/png;base64,) string. Only enter the base64 encoded data.
    label: Favicon (PNGs only)
    reference: .properties.push_apps_manager_favicon
  - description: Defaults to 'Pivotal Software Inc. All rights reserved.'
    label: Footer Text
    reference: .properties.push_apps_manager_footer_text
  - description: |
      You may configure up to three links in the Apps Manager footer.
    label: Footer Links
    property_inputs:
    - label: Link text
      reference: name
    - label: URL
      reference: href
    reference: .properties.push_apps_manager_footer_links
  - description: Enter a hexadecimal color code like '#71ffda'
    label: Classification Header/Footer Background Color
    reference: .properties.push_apps_manager_global_wrapper_bg_color
  - description: Enter a hexadecimal color code like '#71ffda'
    label: Classification Header/Footer Text Color
    reference: .properties.push_apps_manager_global_wrapper_text_color
  - description: Plain text or HTML Markup
    label: Classification Header Content
    reference: .properties.push_apps_manager_global_wrapper_header_content
  - description: Plain text or HTML Markup
    label: Classification Footer Content
    reference: .properties.push_apps_manager_global_wrapper_footer_content
- description: Configure Apps Manager
  label: Apps Manager
  name: apps_manager_config
  property_inputs:
  - label: Enable Invitations
    reference: .properties.push_apps_manager_enable_invitations
  - label: Display Marketplace Service Plan Prices
    reference: .properties.push_apps_manager_display_plan_prices
  - description: |
      Define the currency codes and associated symbols
      (defaults to { "usd": "$", "eur": "" } if blank)
    label: Supported currencies as JSON
    reference: .properties.push_apps_manager_currency_lookup
  - description: |
      Replace "Apps Manager" in the header with a custom product name
      (defaults to "Apps Manager" if blank)
    label: Product Name
    reference: .properties.push_apps_manager_product_name
  - description: Replaces "Marketplace" on the Apps Manager Marketplace Pages.
    label: Marketplace Name
    reference: .properties.push_apps_manager_marketplace_name
  - description: |
      You may configure up to 10 links in the Apps Manager sidebar.
    label: Customize Sidebar Links
    property_inputs:
    - label: Link text
      reference: name
    - label: URL
      reference: href
    reference: .properties.push_apps_manager_nav_links
  - description: |
      Memory limit with which to deploy the Apps Manager app. Leave blank
      to use the default value.
    label: Apps Manager Memory Usage (MB)
    reference: .properties.push_apps_manager_memory
  - description: |
      Memory limit with which to deploy the Invitations app. Leave blank
      to use the default value.
    label: Invitations Memory Usage (MB)
    reference: .properties.push_apps_manager_invitations_memory
- description: |
    Configure Simple Mail Transfer Protocol for the Notifications application
    to send email notifications about your deployment. This application is
    deployed as an errand in Application Service. If you do not need this service,
    leave this section blank and disable the Notifications and Notifications UI
    errands.
  label: Email Notifications
  name: smtp_config
  property_inputs:
  - description: The email address from which emails are sent.
    label: From Email
    reference: .properties.smtp_from
  - description: The SMTP address of the server that sends emails.
    label: SMTP Server Address
    reference: .properties.smtp_address
  - description: The port of the SMTP server that sends emails.
    label: SMTP Server Port
    reference: .properties.smtp_port
  - description: |
      The credentials for the SMTP server that sends emails. Note: Operators
      should take care to escape any special characters included here.
    label: SMTP Server Credentials
    reference: .properties.smtp_credentials
  - label: SMTP Enable Automatic STARTTLS
    reference: .properties.smtp_enable_starttls_auto
  - label: SMTP Authentication Mechanism
    reference: .properties.smtp_auth_mechanism
  - label: SMTP CRAMMD5 secret
    reference: .properties.smtp_crammd5_secret
- description: Configure the App Autoscaler
  label: App Autoscaler
  name: app_autoscaler
  property_inputs:
  - label: Autoscaler Instance Count
    reference: .properties.autoscale_instance_count
  - label: Autoscaler API Instance Count
    reference: .properties.autoscale_api_instance_count
  - description: |
      The size of the window of metrics that the autoscaler uses to make scaling decisions (in seconds).
    label: 'Metric Collection Interval (min: 15, max: 120)'
    reference: .properties.autoscale_metric_bucket_count
  - description: |
      How frequently the autoscaler evaluates an application for scaling (in seconds).
    label: 'Scaling Interval (min: 15, max: 120)'
    reference: .properties.autoscale_scaling_interval_in_seconds
- description: Configure the Cloud Controller
  label: Cloud Controller
  name: cloud_controller
  property_inputs:
  - description: |
      Leave blank unless restoring a Cloud Controller Database exported from
      a previous installation.
    label: Cloud Controller DB Encryption Key
    reference: .cloud_controller.encrypt_key
  - label: |
      Enabling CF API Rate Limiting will prevent API consumers from
      overwhelming the platform API servers. Limits are imposed on a per-user
      or per-client basis and reset on an hourly interval.
    reference: .properties.cc_api_rate_limit
    selector_property_inputs:
    - label: Enable
      property_inputs:
      - description: |
          The number of requests a user or client is allowed to make for
          all endpoints that do not have a custom limit over an hour
          interval.
        label: General Limit
        reference: .properties.cc_api_rate_limit.enable.general_limit
      - description: |
          The number of requests an unauthenticated client is allowed to
          make over an hour interval.
        label: Unauthenticated Limit
        reference: .properties.cc_api_rate_limit.enable.unauthenticated_limit
      reference: .properties.cc_api_rate_limit.enable
    - label: Disable
      reference: .properties.cc_api_rate_limit.disable
- description: |
    Specify a Cloud Foundry organization and space where smoke tests can run if
    in the future you delete your Application Service deployment domains.
  label: Smoke Tests
  name: smoke_tests
  property_inputs:
  - label: |
      Choose where to deploy applications when running the smoke tests
    reference: .properties.smoke_tests
    selector_property_inputs:
    - label: |
        Temporary space within the system organization (This is deleted after
        smoke tests finish.)
      reference: .properties.smoke_tests.on_demand
    - label: |
        Specified org and space (The org and space must have a domain
        available for routing.)
      property_inputs:
      - description: |
          The Application Service organization to use when running tests
        label: Organization
        reference: .properties.smoke_tests.specified.org_name
      - description: The Application Service space to use when running tests
        label: Space
        reference: .properties.smoke_tests.specified.space_name
      - description: Must be accessible to the organization
        label: Domain
        reference: .properties.smoke_tests.specified.apps_domain
      reference: .properties.smoke_tests.specified
- description: |
    These are several features that may require a greater understanding of
    Cloud Foundry system components and their more recently introduced
    capabilities.
  label: Advanced Features
  markdown: |
    You can specify how much memory or disk you want to set as the Diego Cells'
    available capacity. You can overcommit these resources with values that
    exceed the Diego Cell VM sizes configured in the Resource Config section.
  name: experimental_features
  property_inputs:
  - label: Cell Memory Capacity (MB)
    reference: .diego_cell.executor_memory_capacity
  - label: Cell Disk Capacity (MB)
    reference: .diego_cell.executor_disk_capacity
  - description: |
      If your Application Service deployment is using a private network that is
      not RFC 1918 (10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16), then you must
      type in "allow <your-network>;" here. It is important to include the
      word "allow" and the semi-colon at the end. Multiple rules should be
      separated by a comma. For example, "allow 172.99.0.0/24;,allow
      172.55.0.0/24;"
    label: Whitelist for non-RFC-1918 Private Networks
    placeholder: |
      e.g.: allow 172.99.0.0/24;,allow 172.55.0.0/24;
    reference: .nfs_server.blobstore_internal_access_rules
  - description: |
      Max wait time to establish a connection, including name resolution, in
      seconds.
    label: CF CLI Connection Timeout
    reference: .properties.cf_dial_timeout_in_seconds
icon_image: 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
install_time_verifiers:
- ignorable: true
  name: Verifiers::WildcardDomainVerifier
  properties:
    domain: .cloud_controller.system_domain
- ignorable: true
  name: Verifiers::WildcardDomainVerifier
  properties:
    domain: .cloud_controller.apps_domain
- name: Verifiers::SsoUrlVerifier
  properties:
    url: .properties.uaa.saml.sso_url
- ignorable: true
  name: Verifiers::BlobstoreVerifier
  properties:
    access_key_id: .properties.system_blobstore.external.access_key
    bucket_name: .properties.system_blobstore.external.buildpacks_bucket
    endpoint: .properties.system_blobstore.external.endpoint
    region: .properties.system_blobstore.external.region
    secret_access_key: .properties.system_blobstore.external.secret_key
    signature_version: .properties.system_blobstore.external.signature_version
- ignorable: true
  name: Verifiers::BlobstoreVerifier
  properties:
    access_key_id: .properties.system_blobstore.external.access_key
    bucket_name: .properties.system_blobstore.external.droplets_bucket
    endpoint: .properties.system_blobstore.external.endpoint
    region: .properties.system_blobstore.external.region
    secret_access_key: .properties.system_blobstore.external.secret_key
    signature_version: .properties.system_blobstore.external.signature_version
- ignorable: true
  name: Verifiers::BlobstoreVerifier
  properties:
    access_key_id: .properties.system_blobstore.external.access_key
    bucket_name: .properties.system_blobstore.external.packages_bucket
    endpoint: .properties.system_blobstore.external.endpoint
    region: .properties.system_blobstore.external.region
    secret_access_key: .properties.system_blobstore.external.secret_key
    signature_version: .properties.system_blobstore.external.signature_version
- ignorable: true
  name: Verifiers::BlobstoreVerifier
  properties:
    access_key_id: .properties.system_blobstore.external.access_key
    bucket_name: .properties.system_blobstore.external.resources_bucket
    endpoint: .properties.system_blobstore.external.endpoint
    region: .properties.system_blobstore.external.region
    secret_access_key: .properties.system_blobstore.external.secret_key
    signature_version: .properties.system_blobstore.external.signature_version
- ignorable: true
  name: Verifiers::MysqlDatabaseVerifier
  properties:
    database: .properties.account_database_name
    host: .properties.system_database.external.host
    password: .properties.system_database.external.account_password
    port: .properties.system_database.external.port
    username: .properties.system_database.external.account_username
- ignorable: true
  name: Verifiers::MysqlDatabaseVerifier
  properties:
    database: .properties.app_usage_service_database_name
    host: .properties.system_database.external.host
    password: .properties.system_database.external.app_usage_service_password
    port: .properties.system_database.external.port
    username: .properties.system_database.external.app_usage_service_username
- ignorable: true
  name: Verifiers::MysqlDatabaseVerifier
  properties:
    database: .properties.autoscale_database_name
    host: .properties.system_database.external.host
    password: .properties.system_database.external.autoscale_password
    port: .properties.system_database.external.port
    username: .properties.system_database.external.autoscale_username
- ignorable: true
  name: Verifiers::MysqlDatabaseVerifier
  properties:
    database: .properties.ccdb_database_name
    host: .properties.system_database.external.host
    password: .properties.system_database.external.ccdb_password
    port: .properties.system_database.external.port
    username: .properties.system_database.external.ccdb_username
- ignorable: true
  name: Verifiers::MysqlDatabaseVerifier
  properties:
    database: .properties.diego_database_name
    host: .properties.system_database.external.host
    password: .properties.system_database.external.diego_password
    port: .properties.system_database.external.port
    username: .properties.system_database.external.diego_username
- ignorable: true
  name: Verifiers::MysqlDatabaseVerifier
  properties:
    database: .properties.locket_database_name
    host: .properties.system_database.external.host
    password: .properties.system_database.external.locket_password
    port: .properties.system_database.external.port
    username: .properties.system_database.external.locket_username
- ignorable: true
  name: Verifiers::MysqlDatabaseVerifier
  properties:
    database: .properties.networkpolicyserver_database_name
    host: .properties.system_database.external.host
    password: .properties.system_database.external.networkpolicyserver_password
    port: .properties.system_database.external.port
    username: .properties.system_database.external.networkpolicyserver_username
- ignorable: true
  name: Verifiers::MysqlDatabaseVerifier
  properties:
    database: .properties.nfsvolume_database_name
    host: .properties.system_database.external.host
    password: .properties.system_database.external.nfsvolume_password
    port: .properties.system_database.external.port
    username: .properties.system_database.external.nfsvolume_username
- ignorable: true
  name: Verifiers::MysqlDatabaseVerifier
  properties:
    database: .properties.notifications_database_name
    host: .properties.system_database.external.host
    password: .properties.system_database.external.notifications_password
    port: .properties.system_database.external.port
    username: .properties.system_database.external.notifications_username
- ignorable: true
  name: Verifiers::MysqlDatabaseVerifier
  properties:
    database: .properties.routing_database_name
    host: .properties.system_database.external.host
    password: .properties.system_database.external.routing_password
    port: .properties.system_database.external.port
    username: .properties.system_database.external.routing_username
- ignorable: true
  name: Verifiers::MysqlDatabaseVerifier
  properties:
    database: .properties.silk_database_name
    host: .properties.system_database.external.host
    password: .properties.system_database.external.silk_password
    port: .properties.system_database.external.port
    username: .properties.system_database.external.silk_username
- ignorable: true
  name: Verifiers::MysqlDatabaseVerifier
  properties:
    database: .properties.uaa_database_name
    host: .properties.uaa_database.external.host
    password: .properties.uaa_database.external.uaa_password
    port: .properties.uaa_database.external.port
    username: .properties.uaa_database.external.uaa_username
job_types:
- description: Database
  dynamic_ip: 0
  instance_definition:
    configurable: true
    constraints:
      may_only_be_odd_or_zero: true
      min: 1
    default: 1
    label: Instances
    name: instances
    type: integer
  label: Database
  max_in_flight: 1
  name: database
  resource_definitions:
  - configurable: true
    constraints:
      min: 1
    default: 2
    label: CPU
    name: cpu
    type: integer
  - configurable: true
    constraints:
      min: 4096
    default: 8192
    label: RAM
    name: ram
    type: integer
  - configurable: true
    constraints:
      min: 10000
    default: 30000
    label: Ephemeral Disk
    name: ephemeral_disk
    type: integer
  - configurable: true
    constraints:
      min: 10000
    default: 100000
    label: Persistent Disk
    name: persistent_disk
    type: integer
  resource_label: Database
  serial: true
  single_az_only: false
  static_ip: 1
  templates:
  - consumes: |
      consul_common: {from: consul_common_link}
      consul_client: {from: consul_client_link}
      consul_server: {from: consul_server_link}
    manifest: |
      consul:
        agent:
          domain: cf.internal
          mode: server
        encrypt_keys:
        - ((( consul-encryption-key )))
        ca_cert: (( $ops_manager.ca_certificate ))
        server_cert: (( .properties.consul_server_cert.cert_pem ))
        server_key: (( .properties.consul_server_cert.private_key_pem ))
        agent_cert: (( .properties.consul_agent_cert.cert_pem ))
        agent_key: (( .properties.consul_agent_cert.private_key_pem ))
    name: consul_agent
    provides: |
      consul_common: {as: consul_common_link, shared: true}
      consul_client: {as: consul_client_link, shared: true}
      consul_server: {as: consul_server_link, shared: true}
    release: consul
  - manifest: |
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          metron:
            cert: (( .doppler.metron_tls_cert.cert_pem ))
            key: (( .doppler.metron_tls_cert.private_key_pem ))
      metron_agent:
        deployment: cf
      syslog_daemon_config:
        enable: false
    name: metron_agent
    release: loggregator
  - manifest: |
      syslog: (( .properties.system_logging.selected_option.parsed_manifest(syslog) ))
    name: syslog_forwarder
    release: syslog-migration
  - manifest: |
      nats:
        user: ((( nats-credentials.username )))
        password: ((( nats-credentials.password )))
    name: nats
    provides: |
      nats: {as: nats, shared: true}
    release: nats
  - manifest: |
      route_registrar:
        routes:
        - name: cf-mysql-proxy
          port: 8080
          registration_interval: 20s
          tags:
            component: MySQLProxy
          uris:
          - "proxy-p-mysql-ert.(( .cloud_controller.system_domain.value ))"
          prepend_instance_index: true
    name: route_registrar
    release: routing
  - manifest: |
      cf_mysql:
        proxy:
          api_uri: proxy-p-mysql-ert.(( .cloud_controller.system_domain.value ))
          api_password: ((( mysql-proxy-dashboard-credentials.password )))
          api_username: ((( mysql-proxy-dashboard-credentials.username )))
          consul_enabled: true
          startup_delay: (( .mysql_proxy.startup_delay.value ))
          shutdown_delay: (( .mysql_proxy.shutdown_delay.value ))
    name: proxy
    provides: |
      mysql-database: {as: proxy-mysql}
    release: cf-mysql
  - manifest: |
      cf_mysql:
        mysql:
          port: 33306
          cli_history: (( .mysql.cli_history.value ))
          interrupt_notify_cmd: "/var/vcap/jobs/send-email/bin/run"
          innodb_buffer_pool_size: 2147483648
          innodb_strict_mode: true
          max_open_files: 1048576
          startup_timeout: 120
          cluster_probe_timeout: (( .mysql.cluster_probe_timeout.value ))
          cluster_health:
            password: ((( mysql-cluster-health-credentials.password )))
          disable_auto_sst: (( .mysql.prevent_node_auto_rejoin.value ))
          remote_admin_access: (( .mysql.remote_admin_access.value ))
          seeded_databases:
          - name: (( .properties.account_database_name.value ))
            username: ((( pivotal-account-db-credentials.username )))
            password: ((( pivotal-account-db-credentials.password )))
          - name: (( .properties.app_usage_service_database_name.value ))
            username: ((( app-usage-db-credentials.username )))
            password: ((( app-usage-db-credentials.password )))
          - name: (( .properties.autoscale_database_name.value ))
            username: ((( autoscale-db-credentials.username )))
            password: ((( autoscale-db-credentials.password )))
          - name: (( .properties.ccdb_database_name.value ))
            username: ((( cc-db-credentials.username )))
            password: ((( cc-db-credentials.password )))
          - name: (( .properties.credhub_database_name.value ))
            username: ((( credhub-db-credentials.username )))
            password: ((( credhub-db-credentials.password )))
          - name: (( .properties.diego_database_name.value ))
            username: ((( diego-db-credentials.username )))
            password: ((( diego-db-credentials.password )))
          - name: (( .properties.locket_database_name.value ))
            username: ((( locket-db-credentials.username )))
            password: ((( locket-db-credentials.password )))
          - name: (( .properties.networkpolicyserver_database_name.value ))
            username: ((( network-policy-server-db-credentials.username )))
            password: ((( network-policy-server-db-credentials.password )))
          - name: (( .properties.nfsvolume_database_name.value ))
            username: ((( nfs-volume-db-credentials.username )))
            password: ((( nfs-volume-db-credentials.password )))
          - name: (( .properties.notifications_database_name.value ))
            username: ((( notifications-db-credentials.username )))
            password: ((( notifications-db-credentials.password )))
          - name: (( .properties.routing_database_name.value ))
            username: ((( routing-db-credentials.username )))
            password: ((( routing-db-credentials.password )))
          - name: (( .properties.silk_database_name.value ))
            username: ((( silk-db-credentials.username )))
            password: ((( silk-db-credentials.password )))
          - name: (( .properties.uaa_database_name.value ))
            username: ((( uaa-db-credentials.username )))
            password: ((( uaa-db-credentials.password )))
          - name: monitor
            username: ((( mysql-monitor-db-credentials.username )))
            password: ((( mysql-monitor-db-credentials.password )))
          - name: metrics_db
            username: ((( mysql-metrics-db-credentials.username )))
            password: ((( mysql-metrics-db-credentials.password )))
          server_audit_excluded_users:
          - ((( mysql-metrics-db-credentials.username )))
          - ((( mysql-monitor-db-credentials.username )))
          admin_password: ((( mysql-admin-credentials.password )))
          galera_healthcheck:
            db_password: ((( mysql-galera-sidecar-credentials.password )))
            endpoint_username: ((( mysql-bootstrap-db-credentials.username )))
            endpoint_password: ((( mysql-bootstrap-db-credentials.password )))
          server_audit_events: (( .properties.mysql_activity_logging.selected_option.parsed_manifest(mysql_audit_events) ))
    name: mysql
    provides: |
      internal-mysql-database: {as: direct-mysql}
    release: cf-mysql
  - manifest: |
      mysql-metrics:
        origin: mysql
        username: ((( mysql-metrics-db-credentials.username )))
        password: ((( mysql-metrics-db-credentials.password )))
    name: mysql-metrics
    release: mysql-monitoring
  - manifest: |
      cf_mysql:
        mysql:
          admin_password: ((( mysql-admin-credentials.password )))
      cf-mysql-backup:
        endpoint_credentials:
          username: ((( mysql-backup-server-db-credentials.username )))
          password: ((( mysql-backup-server-db-credentials.password )))
        tls:
          server_certificate: (( .mysql.backup_server_certificate.cert_pem ))
          server_key: (( .mysql.backup_server_certificate.private_key_pem ))
    name: streaming-mysql-backup-tool
    release: mysql-backup
  - manifest: |
      domain: (( .cloud_controller.system_domain.value ))
      mysql-monitoring:
        recipient_email: (( .mysql_monitor.recipient_email.value ))
        cluster_identifier: cf
        admin_client:
          secret: (( .uaa.admin_client_credentials.password ))
          username: (( .uaa.admin_client_credentials.identity ))
        client:
          username: (( .uaa.notifications_client_credentials.identity ))
          secret: (( .uaa.notifications_client_credentials.password ))
    name: send-email
    release: mysql-monitoring
  - manifest: |
      mysql-monitoring:
        mysql-diag-agent:
          username: ((( mysql-diag-agent-db-credentials.username )))
          password: ((( mysql-diag-agent-db-credentials.password )))
    name: mysql-diag-agent
    release: mysql-monitoring
  - manifest: |
      release_level_backup: true
    name: mysql-restore
    release: cf-backup-and-restore
- description: Stores droplets and app packages on behalf of Cloud Controller
  dynamic_ip: 0
  instance_definition:
    configurable: true
    constraints:
      max: 1
      min: 0
    default: 1
    label: Instances
    name: instances
    type: integer
    zero_if:
      property_reference: .properties.system_blobstore
      property_values:
      - external
      - external_gcs
      - external_gcs_service_account
      - external_azure
  label: File Storage
  max_in_flight: 1
  name: blobstore
  resource_definitions:
  - configurable: true
    constraints:
      min: 1
    default: 1
    label: CPU
    name: cpu
    type: integer
  - configurable: true
    constraints:
      min: 4096
    default: 4096
    label: RAM
    name: ram
    type: integer
  - configurable: true
    constraints:
      min: 8192
    default: 8192
    label: Ephemeral Disk
    name: ephemeral_disk
    type: integer
  - configurable: true
    constraints:
      min: 10240
    default: 102400
    label: Persistent Disk
    name: persistent_disk
    type: integer
  resource_label: File Storage
  serial: true
  single_az_only: true
  static_ip: 1
  templates:
  - consumes: |
      consul_common: {from: consul_common_link}
      consul_client: {from: consul_client_link}
      consul_server: nil
    manifest: |
      consul:
        agent:
          services:
            blobstore: {}
    name: consul_agent
    release: consul
  - manifest: |
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          metron:
            cert: (( .doppler.metron_tls_cert.cert_pem ))
            key: (( .doppler.metron_tls_cert.private_key_pem ))
      metron_agent:
        deployment: cf
      syslog_daemon_config:
        enable: false
    name: metron_agent
    release: loggregator
  - manifest: |
      blobstore:
        admin_users:
        - username: ((( webdav-blobstore-credentials.username )))
          password: ((( webdav-blobstore-credentials.password )))
        secure_link:
          secret: ((( nfs-server-blobstore-secret )))
        tls:
          cert: (( .nfs_server.blobstore_cert.cert_pem ))
          private_key: (( .nfs_server.blobstore_cert.private_key_pem ))
        internal_access_rules: (( .nfs_server.blobstore_internal_access_rules.parsed_strings ))
      release_level_backup: true
      system_domain: (( .cloud_controller.system_domain.value ))
    name: blobstore
    release: capi
  - manifest: |
      route_registrar:
        routes:
          - name: blobstore
            port: 8080
            registration_interval: 20s
            tags:
              component: blobstore
            uris:
            - blobstore.(( .cloud_controller.system_domain.value ))
    name: route_registrar
    release: routing
  - manifest: |
      release_level_backup: true
    name: blobstore-backup
    release: cf-backup-and-restore
  - manifest: |
      syslog: (( .properties.system_logging.selected_option.parsed_manifest(syslog) ))
    name: syslog_forwarder
    release: syslog-migration
- description: Control
  dynamic_ip: 1
  instance_definition:
    configurable: true
    constraints:
      min: 1
    default: 1
    label: Instances
    name: instances
    type: integer
  label: Control
  max_in_flight: 1
  name: control
  resource_definitions:
  - configurable: true
    constraints:
      min: 16384
    default: 16384
    label: RAM
    name: ram
    type: integer
  - configurable: true
    constraints:
      min: 49152
    default: 49152
    label: Ephemeral Disk
    name: ephemeral_disk
    type: integer
  - configurable: false
    default: 0
    label: Persistent Disk
    name: persistent_disk
    type: integer
  - configurable: true
    constraints:
      min: 2
    default: 2
    label: CPU
    name: cpu
    type: integer
  resource_label: Control
  serial: true
  single_az_only: false
  static_ip: 0
  templates:
  - consumes: |
      consul_common: {from: consul_common_link}
      consul_client: {from: consul_client_link}
      consul_server: nil
    manifest: |
      consul:
        agent:
          services:
            cloud_controller_ng: {}
            credhub: {}
            doppler: {}
            loggregator_trafficcontroller: {}
            policy-server:
              name: network-policy-server
              check:
                interval: 5s
                script: /bin/true
            reverse_log_proxy: {}
            routing-api: {}
            service-discovery-controller:
              name: service-discovery-controller
              check:
                interval: 5s
                script: /bin/true
            silk-controller: {}
            uaa: {}
    name: consul_agent
    release: consul
  - manifest: |
      diego:
        bbs:
          active_key_label: key1
          auctioneer:
            require_tls: true
            api_location: auctioneer.service.cf.internal:9016
            ca_cert: (( $ops_manager.ca_certificate ))
            client_cert: (( .properties.auctioneer_client_cert.cert_pem ))
            client_key: (( .properties.auctioneer_client_cert.private_key_pem ))
          ca_cert: (( $ops_manager.ca_certificate ))
          detect_consul_cell_registrations: false
          etcd:
            client_cert: ''
            client_key: ''
            machines: []
            ca_cert: ''
          encryption_keys:
          - label: key1
            passphrase: ((( diego-db-bbs-encryption-passphrase )))
          locket:
            api_location: locket.service.cf.internal:8891
          rep:
            ca_cert: (( $ops_manager.ca_certificate ))
            client_cert: (( .properties.rep_client_cert.cert_pem ))
            client_key: (( .properties.rep_client_cert.private_key_pem ))
            require_tls: true
          server_cert: (( .properties.bbs_server_cert.cert_pem ))
          server_key: (( .properties.bbs_server_cert.private_key_pem ))
          skip_consul_lock: true
          sql: (( .properties.system_database.selected_option.parsed_manifest(diegodb) ))
    name: bbs
    release: diego
  - manifest: |
      diego:
        cfdot:
          bbs:
            ca_cert: (( $ops_manager.ca_certificate ))
            client_cert: (( .properties.bbs_client_cert.cert_pem ))
            client_key: (( .properties.bbs_client_cert.private_key_pem ))
    name: cfdot
    release: diego
  - manifest: |
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          metron:
            cert: (( .doppler.metron_tls_cert.cert_pem ))
            key: (( .doppler.metron_tls_cert.private_key_pem ))
      metron_agent:
        deployment: cf
        health_port: 22222
      syslog_daemon_config:
        enable: false
    name: metron_agent
    release: loggregator
  - manifest: |
      tls:
        key: (( .diego_database.locket_server_cert.private_key_pem ))
        ca_cert: (( $ops_manager.ca_certificate ))
        cert: (( .diego_database.locket_server_cert.cert_pem ))
      diego:
        locket:
          sql: (( .properties.system_database.selected_option.parsed_manifest(locketdb) ))
    name: locket
    release: diego
  - manifest: |
      route_registrar:
        routes:
        - name: doppler
          port: 8081
          registration_interval: 20s
          uris:
          - "doppler.(( .cloud_controller.system_domain.value ))"
        - name: uaa
          port: 8080
          registration_interval: 4s
          tags:
            component: uaa
          uris:
          - "uaa.(( .cloud_controller.system_domain.value ))"
          - "*.uaa.(( .cloud_controller.system_domain.value ))"
          - "login.(( .cloud_controller.system_domain.value ))"
          - "*.login.(( .cloud_controller.system_domain.value ))"
          health_check:
            name: uaa-healthcheck
            script_path: /var/vcap/jobs/uaa/bin/health_check
        - name: network-policy-server
          port: 4002
          registration_interval: 20s
          tags:
            component: NetworkPolicyServer
          uris:
          - "api.(( .cloud_controller.system_domain.value ))/networking"
        - name: api
          port: 9022
          registration_interval: 20s
          tags:
            component: CloudController
          uris:
          - "api.(( .cloud_controller.system_domain.value ))"
    name: route_registrar
    release: routing
  - consumes: |
      (( .properties.system_database.selected_option.parsed_manifest(mysql_db_link) ))
    manifest: |
      cf_networking:
        enable_space_developer_self_service: (( .properties.cf_networking_enable_space_developer_self_service.value ))
        policy_server:
          database: (( .properties.system_database.selected_option.parsed_manifest(networkpolicyserverdb) ))
          uaa_client: (( .uaa.network_policy_server_client.identity ))
          skip_ssl_validation: (( .ha_proxy.skip_cert_verify.value ))
          debug_port: 22223
          uaa_ca: (( $ops_manager.ca_certificate ))
          uaa_client_secret: (( .uaa.network_policy_server_client.password ))
    name: policy-server
    release: cf-networking
  - manifest: |
      cf_networking:
        policy_server_internal:
          ca_cert: (( $ops_manager.ca_certificate ))
          server_cert: (( .properties.network_policy_server_cert.cert_pem ))
          server_key: (( .properties.network_policy_server_cert.private_key_pem ))
    name: policy-server-internal
    release: cf-networking
  - consumes: |
      (( .properties.system_database.selected_option.parsed_manifest(mysql_db_link) ))
    manifest: |
      cf_networking:
        disable: (( .properties.container_networking_interface_plugin.selected_option.parsed_manifest(disable_silk) ))
        network: (( .properties.container_networking_interface_plugin.silk.network_cidr.value || "10.255.0.0/16" ))
        silk_controller:
          ca_cert: (( $ops_manager.ca_certificate ))
          server_cert: (( .diego_database.silk_controller_server_cert.cert_pem ))
          server_key: (( .diego_database.silk_controller_server_cert.private_key_pem ))
          database: (( .properties.system_database.selected_option.parsed_manifest(silkdb) ))
    name: silk-controller
    provides: |
      cf_network: {as: cf_network, shared: true}
    release: cf-networking
  - manifest: |
      syslog: (( .properties.system_logging.selected_option.parsed_manifest(syslog) ))
    name: syslog_forwarder
    release: syslog-migration
  - consumes: |
      (( .properties.uaa_database.selected_option.parsed_manifest(db_link) ))
    manifest: |
      ccdb: (( .properties.system_database.selected_option.parsed_manifest(ccdb) ))
      uaadb: (( .properties.uaa_database.selected_option.parsed_manifest(db_config) ))
      login:
        home_redirect: "https://account.(( .cloud_controller.system_domain.value ))/identity/apps"
        links:
          passwd: https://account.(( .cloud_controller.system_domain.value ))/forgot-password
          signup: https://account.(( .cloud_controller.system_domain.value ))/sign-up
          home: https://apps.(( .cloud_controller.system_domain.value ))
        notifications:
          url: https://notifications.(( .cloud_controller.system_domain.value ))
        saml:
          activeKeyId: key1
          serviceProviderKey: ''
          serviceProviderKeyPassword: ''
          providers: (( .properties.uaa.selected_option.parsed_manifest(saml_provider) ))
          signRequest: (( .properties.uaa.saml.sign_auth_requests.value ))
          signatureAlgorithm: (( .properties.saml_signature_algorithm.value ))
          entityid: (( .properties.saml_entity_id_override.value || .properties.uaa.selected_option.parsed_manifest(default_saml_entity_id) ))
          serviceProviderCertificate: ''
          wantAssertionSigned: (( .properties.uaa.saml.require_signed_assertions.value ))
          keys:
            key1:
              key: (( .uaa.service_provider_key_credentials.private_key_pem ))
              passphrase: (( .uaa.service_provider_key_password.value || "" ))
              certificate: (( .uaa.service_provider_key_credentials.cert_pem ))
        logout:
          redirect:
            parameter:
              disable: false
              whitelist:
              - https://console.(( .cloud_controller.system_domain.value ))/
              - https://apps.(( .cloud_controller.system_domain.value ))/
        self_service_links_enabled: (( .properties.uaa.selected_option.parsed_manifest(self_service_links_enabled) ))
        branding:
          company_name: (( .properties.push_apps_manager_company_name.value || "Pivotal" ))
          product_logo: (( .properties.push_apps_manager_logo.value || "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" ))
          square_logo: (( .properties.push_apps_manager_square_logo.value || "iVBORw0KGgoAAAANSUhEUgAAAGwAAABsCAYAAACPZlfNAAAAAXNSR0IArs4c6QAABYtJREFUeAHtnVtsFFUYx7/d3ruWotUKVIkNaCw02YgJGBRTMd4CokUejD4QH4gxQcIDeHnBmPjkhSghUYLGe3ywPtAHNCo0QgkWwi2tXG2V1kIpLXTbLt1tS9dzlmzSJssZhv32zDk7/2km2znn7Pd9+/vt2Z2dmW0D9Obat4gCiwiLBQQSLflSViAQeN6Can1fYiJBFPQ9BcsAQBiEWUbAsnIxwyDMMgKWlYsZBmGWEbCsXMwwCLOMgGXlYoZBmGUELCsXMwzCLCNgWbmYYRBmGQHLysUMgzDLCFhWLmYYhFlGwLJyMcMgzDIClpWLGQZhlhGwrFzMMAizjIBl5WKGQZhlBCwrV1xbb96y59V1VFJQmLawQNrWa43x8XEaHo1fW+Oj1H8lSqf6eulEbw+dvNhLvcNDinvb0WWksAdm3UWhwiJ2gt2RAWo80UY7jrdSU8cZGrt6lT1HtgMaKSxbD7qqfDq99tAjyTUSG6FP9v1BH+3dTUPxeLZSssf17U5HeXEJbXr8aerY+A6tf7iOxFeu2OFmI6BvhaVgVoRCtHl5PTW8/AoV5xekmo299b2wlJn6+WFqWrOWKkpDqSYjbyFskpZFs++hL1e9NKnFvF+t3OmQOwzdkcgUmnnBABXm5Ys1j8qKisVadFPvS8tramn1goX09eEDU+KbsmGlsMbjbbT6x++UDOVORGXoFppXOYMerLqbVsyrpcWzqykYdH5R+fjZlcnd/8sjV5Q5vOh0rt6LqhhyJsQ3uC+ID8ry89aHYtf90W1bKLzlffr19EnH6HIP8oXasOM4LwbkrLB0MP+6cJ6e+eoz+vTP5nTdU9peDC+Ysm3Khq+ESehy5r3e2ECHu7uUDuqq59Id4iXVtMV3wqSACSHt3V2/KF3I97qayjuVY7zo9KUwCfq3M6coNjamZD6zrFzZ70Wnb4XFxseoK3JZyXzWtGnKfi86fStMwu6LRpXMZ5RBmBKQ7k75XqZa8gLmPZ/Nq0hFkLnvttJSZUT5Oc60xbfC5CGs6lsrlD56hgaV/V50+lbYkuo5VFygPp3SMwxhXjwp0+bcsGRp2vZU48TEBB09153aNObWlzNMHo1/6r4apYTmsx10MTqsHONFp5VH6zMBtWbhYtq6YpVjiJ/ajjmO8WKAL4QFxamWZffPT1678dicex05D4jTKj8cO+Q4zosBOSXs7bonktci5ovjgPIUye3ieo3wzKrk+TC5faPLGz83On6ovtFY3ONySth7Ty67qbPMk6Hu+edv+vzg/slNRv3uy52O6xk40HWW6r/94nrdRrTn1AzLhOju9tP03DfbKTo6mkmYrN/X98L6xQHgTb/vpG0t+5LnybJOPMMEvhXWOXCJvj9yiD7Yu4sGRkYyxKjv7r4RJi+Na+05Rwf/66SG1qO0v/NffZQZM+WUsI07d1BC/MTE144GYzHxJYcYDYq1vb/f8WQlI9OshsopYZubm7IKy4Tg2K03wYKLGiDMBSwThkKYCRZc1ABhLmCZMBTCTLDgogYIcwHLhKEQZoIFFzVAmAtYJgyFMBMsuKgBwlzAMmEohJlgwUUNEOYClglDIcwECy5qgDAXsEwYCmEmWHBRA4S5gGXCUAgzwYKLGow84yyvuyhR/GW19kt9Lh5ibg01UtjS7VtzizLjo8FLIiNMHaEgTAdlxhwQxghTRygI00GZMQeEMcLUEQrCdFBmzAFhjDB1hIIwHZQZc0AYI0wdoSBMB2XGHBDGCFNHKAjTQZkxB4QxwtQRCsJ0UGbMAWGMMHWEgjAdlBlzQBgjTB2hIEwHZcYcEMYIU0coCNNBmTEHhDHC1BEKwnRQZswBYYwwdYSCMB2UGXNAGCNMHaEgTAdlxhziUu1Ei8M/+WFMh1CZEUi0/A+j7hNSB5Wo2wAAAABJRU5ErkJggg==" ))
          footer_legal_text: (( .properties.push_apps_manager_footer_text.value ))
        prompt:
          password:
            text: (( .uaa.customize_password_label.value ))
          username:
            text: (( .uaa.customize_username_label.value ))
      release_level_backup: true
      uaa:
        sslCertificate: (( .uaa.ssl_credentials.cert_pem ))
        password:
          policy:
            requireUpperCaseCharacter: (( .properties.uaa.internal.password_min_uppercase.value ))
            requireLowerCaseCharacter: (( .properties.uaa.internal.password_min_lowercase.value ))
            requireDigit: (( .properties.uaa.internal.password_min_numeric.value ))
            requireSpecialCharacter: (( .properties.uaa.internal.password_min_special.value ))
            expirePasswordInMonths: (( .properties.uaa.internal.password_expires_after_months.value ))
            minLength: (( .properties.uaa.internal.password_min_length.value ))
        jwt:
          policy:
            active_key_id: key-1
            keys:
              key-1:
                signingKey: (( .uaa.jwt_signing_key_credentials.private_key_pem ))
        user:
          authorities:
          - openid
          - scim.me
          - cloud_controller.read
          - cloud_controller.write
          - cloud_controller_service_permissions.read
          - password.write
          - uaa.user
          - approvals.me
          - oauth.approvals
          - notification_preferences.read
          - notification_preferences.write
          - profile
          - roles
          - user_attributes
          - uaa.offline_token
          - actuator.read
          - cloud_controller.user
        url: https://uaa.(( .cloud_controller.system_domain.value ))
        catalina_opts: "-Xmx768m -XX:MaxPermSize=256m"
        ldap:
          sslCertificate: (( .properties.uaa.ldap.server_ssl_cert.value ))
          mailAttributeName: (( .properties.uaa.ldap.mail_attribute_name.value ))
          url: (( .properties.uaa.ldap.url.value ))
          searchBase: (( .properties.uaa.ldap.search_base.value ))
          searchFilter: (( .properties.uaa.ldap.search_filter.value ))
          enabled: (( .properties.uaa.ldap.url.value_present? ))
          emailDomain: (( .properties.uaa.ldap.email_domains.parsed_strings ))
          referral: (( .properties.uaa.ldap.ldap_referrals.value ))
          groups:
            profile_type: '(( .properties.uaa.ldap.group_search_base.value_present? ? "groups-map-to-scopes": "no-groups" ))'
            searchBase: (( .properties.uaa.ldap.group_search_base.value ))
            groupSearchFilter: (( .properties.uaa.ldap.group_search_filter.value ))
          userDN: (( .properties.uaa.ldap.credentials.identity ))
          userPassword: (( .properties.uaa.ldap.credentials.password ))
          sslCertificateAlias: (( .properties.uaa.ldap.server_ssl_cert_alias.value ))
        admin:
          client_secret: (( .uaa.admin_client_credentials.password ))
        log_level: INFO
        scim:
          groups:
            cloud_controller.admin_read_only: "Group that grants global read permissions for the Cloud Controller API"
          users:
          - name: (( .uaa.admin_credentials.identity ))
            password: (( .uaa.admin_credentials.password ))
            groups:
            - scim.write
            - scim.read
            - openid
            - cloud_controller.admin
            - dashboard.user
            - console.admin
            - console.support
            - doppler.firehose
            - healthwatch.read
            - healthwatch.admin
            - notification_preferences.read
            - notification_preferences.write
            - notifications.manage
            - notification_templates.read
            - notification_templates.write
            - emails.write
            - notifications.write
            - zones.read
            - zones.write
            - routing.router_groups.read
            - routing.router_groups.write
            - network.write
            - network.admin
            - credhub.read
            - credhub.write
          - name: (( .uaa.push_apps_manager_credentials.identity ))
            password: (( .uaa.push_apps_manager_credentials.password ))
            groups:
            - cloud_controller.admin
          - name: (( .uaa.run_smoke_tests_credentials.identity ))
            password: (( .uaa.run_smoke_tests_credentials.password ))
            groups:
            - cloud_controller.admin
          - name: (( .uaa.system_services_credentials.identity ))
            password: (( .uaa.system_services_credentials.password ))
            groups:
            - cloud_controller.admin
          - name: (( .uaa.system_verification_credentials.identity ))
            password: (( .uaa.system_verification_credentials.password ))
            groups:
            - scim.write
            - scim.read
            - openid
            - cloud_controller.admin
            - dashboard.user
            - console.admin
            - console.support
          - name: (( .uaa.logsearch_firehose_credentials.identity ))
            password: (( .uaa.logsearch_firehose_credentials.password ))
            groups:
            - cloud_controller.admin
            - doppler.firehose
          - name: (( .uaa.splunk_firehose_credentials.identity ))
            password: (( .uaa.splunk_firehose_credentials.password ))
            groups:
            - cloud_controller.admin
            - doppler.firehose
          - name: (( .uaa.stackdriver_nozzle_credentials.identity ))
            password: (( .uaa.stackdriver_nozzle_credentials.password ))
            groups:
            - cloud_controller.admin_read_only
            - doppler.firehose
        proxy_ips_regex: (( .uaa.proxy_ips_regex.value ))
        sslPrivateKey: (( .uaa.ssl_credentials.private_key_pem ))
        issuer: (( .uaa.issuer_uri.value ))
        zones:
          internal:
            hostnames:
            - uaa.service.cf.internal
        authentication:
          policy:
            lockoutAfterFailures: (( .properties.uaa.internal.password_max_retry.value ))
        clients:
          opentsdb-firehose-nozzle:
            access-token-validity: 1209600
            authorized-grant-types: authorization_code,client_credentials,refresh_token
            override: true
            secret: (( .uaa.opentsdb_nozzle_credentials.password ))
            scope: openid,oauth.approvals,doppler.firehose
            authorities: oauth.login,doppler.firehose
            redirect-uri: "https://apps.(( .cloud_controller.system_domain.value ))"
          identity:
            id: (( .uaa.identity_client_credentials.identity ))
            secret: (( .uaa.identity_client_credentials.password ))
            scope: "cloud_controller.admin,cloud_controller.read,cloud_controller.write,openid,zones.*.*,zones.*.*.*,zones.read,zones.write,scim.read"
            resource_ids: none
            override: true
            authorized-grant-types: "authorization_code,client_credentials,refresh_token"
            autoapprove: true
            authorities: "scim.zones,zones.read,uaa.resource,zones.write,cloud_controller.admin,uaa.admin,emails.write"
            redirect-uri: "https://p-identity.(( .cloud_controller.system_domain.value ))/dashboard/,https://p-identity.(( .cloud_controller.system_domain.value ))/dashboard/**"
          login:
            id: (( .uaa.login_client_credentials.identity ))
            secret: (( .uaa.login_client_credentials.password ))
            override: true
            autoapprove: true
            authorities: "oauth.login,scim.write,clients.read,notifications.write,critical_notifications.write,emails.write,scim.userids,password.write"
            authorized-grant-types: "client_credentials,refresh_token"
            scope: "openid,oauth.approvals"
          (( .uaa.apps_manager_client_credentials.identity )):
            id: (( .uaa.apps_manager_client_credentials.identity ))
            secret: (( .uaa.apps_manager_client_credentials.password ))
            override: true
            autoapprove: true
            authorities: "scim.write,scim.read,cloud_controller.read,cloud_controller.write,password.write,uaa.admin,uaa.resource,cloud_controller.admin,emails.write,notifications.write"
            authorized-grant-types: "authorization_code,client_credentials,password,implicit"
            scope: "openid,cloud_controller.read,cloud_controller.write,password.write,console.admin,console.support,cloud_controller.admin"
            access-token-validity: (( .uaa.apps_manager_access_token_lifetime.value ))
            refresh-token-validity: (( .uaa.apps_manager_refresh_token_lifetime.value ))
            name: Pivotal Apps Manager
            app-launch-url: "https://apps.(( .cloud_controller.system_domain.value ))"
            show-on-homepage: false
            app-icon: iVBORw0KGgoAAAANSUhEUgAAAGwAAABsCAYAAACPZlfNAAAAAXNSR0IArs4c6QAABYtJREFUeAHtnVtsFFUYx7/d3ruWotUKVIkNaCw02YgJGBRTMd4CokUejD4QH4gxQcIDeHnBmPjkhSghUYLGe3ywPtAHNCo0QgkWwi2tXG2V1kIpLXTbLt1tS9dzlmzSJssZhv32zDk7/2km2znn7Pd9+/vt2Z2dmW0D9Obat4gCiwiLBQQSLflSViAQeN6Can1fYiJBFPQ9BcsAQBiEWUbAsnIxwyDMMgKWlYsZBmGWEbCsXMwwCLOMgGXlYoZBmGUELCsXMwzCLCNgWbmYYRBmGQHLysUMgzDLCFhWLmYYhFlGwLJyMcMgzDIClpWLGQZhlhGwrFzMMAizjIBl5WKGQZhlBCwrV1xbb96y59V1VFJQmLawQNrWa43x8XEaHo1fW+Oj1H8lSqf6eulEbw+dvNhLvcNDinvb0WWksAdm3UWhwiJ2gt2RAWo80UY7jrdSU8cZGrt6lT1HtgMaKSxbD7qqfDq99tAjyTUSG6FP9v1BH+3dTUPxeLZSssf17U5HeXEJbXr8aerY+A6tf7iOxFeu2OFmI6BvhaVgVoRCtHl5PTW8/AoV5xekmo299b2wlJn6+WFqWrOWKkpDqSYjbyFskpZFs++hL1e9NKnFvF+t3OmQOwzdkcgUmnnBABXm5Ys1j8qKisVadFPvS8tramn1goX09eEDU+KbsmGlsMbjbbT6x++UDOVORGXoFppXOYMerLqbVsyrpcWzqykYdH5R+fjZlcnd/8sjV5Q5vOh0rt6LqhhyJsQ3uC+ID8ry89aHYtf90W1bKLzlffr19EnH6HIP8oXasOM4LwbkrLB0MP+6cJ6e+eoz+vTP5nTdU9peDC+Ysm3Khq+ESehy5r3e2ECHu7uUDuqq59Id4iXVtMV3wqSACSHt3V2/KF3I97qayjuVY7zo9KUwCfq3M6coNjamZD6zrFzZ70Wnb4XFxseoK3JZyXzWtGnKfi86fStMwu6LRpXMZ5RBmBKQ7k75XqZa8gLmPZ/Nq0hFkLnvttJSZUT5Oc60xbfC5CGs6lsrlD56hgaV/V50+lbYkuo5VFygPp3SMwxhXjwp0+bcsGRp2vZU48TEBB09153aNObWlzNMHo1/6r4apYTmsx10MTqsHONFp5VH6zMBtWbhYtq6YpVjiJ/ajjmO8WKAL4QFxamWZffPT1678dicex05D4jTKj8cO+Q4zosBOSXs7bonktci5ovjgPIUye3ieo3wzKrk+TC5faPLGz83On6ovtFY3ONySth7Ty67qbPMk6Hu+edv+vzg/slNRv3uy52O6xk40HWW6r/94nrdRrTn1AzLhOju9tP03DfbKTo6mkmYrN/X98L6xQHgTb/vpG0t+5LnybJOPMMEvhXWOXCJvj9yiD7Yu4sGRkYyxKjv7r4RJi+Na+05Rwf/66SG1qO0v/NffZQZM+WUsI07d1BC/MTE144GYzHxJYcYDYq1vb/f8WQlI9OshsopYZubm7IKy4Tg2K03wYKLGiDMBSwThkKYCRZc1ABhLmCZMBTCTLDgogYIcwHLhKEQZoIFFzVAmAtYJgyFMBMsuKgBwlzAMmEohJlgwUUNEOYClglDIcwECy5qgDAXsEwYCmEmWHBRA4S5gGXCUAgzwYKLGow84yyvuyhR/GW19kt9Lh5ibg01UtjS7VtzizLjo8FLIiNMHaEgTAdlxhwQxghTRygI00GZMQeEMcLUEQrCdFBmzAFhjDB1hIIwHZQZc0AYI0wdoSBMB2XGHBDGCFNHKAjTQZkxB4QxwtQRCsJ0UGbMAWGMMHWEgjAdlBlzQBgjTB2hIEwHZcYcEMYIU0coCNNBmTEHhDHC1BEKwnRQZswBYYwwdYSCMB2UGXNAGCNMHaEgTAdlxhziUu1Ei8M/+WFMh1CZEUi0/A+j7hNSB5Wo2wAAAABJRU5ErkJggg==
            redirect-uri: "https://apps.(( .cloud_controller.system_domain.value )),https://apps.(( .cloud_controller.system_domain.value ))/*"
          apps_manager_js:
            name: "PCF Apps Manager"
            override: true
            autoapprove:
              - cloud_controller.read
              - cloud_controller.write
              - cloud_controller.admin
              - cloud_controller.user
              - cloud_controller.admin_read_only
              - cloud_controller.global_auditor
              - actuator.read
              - openid
            scope: cloud_controller.read,cloud_controller.write,cloud_controller.global_auditor,cloud_controller.admin,usage_service.audit,cloud_controller.user,actuator.read,cloud_controller.admin_read_only,openid
            authorized-grant-types: implicit
            show-on-homepage: true
            app-launch-url: "https://apps.(( .cloud_controller.system_domain.value ))"
            access-token-validity: (( .uaa.apps_manager_access_token_lifetime.value ))
            redirect-uri: "https://apps.(( .cloud_controller.system_domain.value ))/**"
            app-icon: (( .properties.push_apps_manager_square_logo.value || "iVBORw0KGgoAAAANSUhEUgAAAGwAAABsCAYAAACPZlfNAAAAAXNSR0IArs4c6QAABYtJREFUeAHtnVtsFFUYx7/d3ruWotUKVIkNaCw02YgJGBRTMd4CokUejD4QH4gxQcIDeHnBmPjkhSghUYLGe3ywPtAHNCo0QgkWwi2tXG2V1kIpLXTbLt1tS9dzlmzSJssZhv32zDk7/2km2znn7Pd9+/vt2Z2dmW0D9Obat4gCiwiLBQQSLflSViAQeN6Can1fYiJBFPQ9BcsAQBiEWUbAsnIxwyDMMgKWlYsZBmGWEbCsXMwwCLOMgGXlYoZBmGUELCsXMwzCLCNgWbmYYRBmGQHLysUMgzDLCFhWLmYYhFlGwLJyMcMgzDIClpWLGQZhlhGwrFzMMAizjIBl5WKGQZhlBCwrV1xbb96y59V1VFJQmLawQNrWa43x8XEaHo1fW+Oj1H8lSqf6eulEbw+dvNhLvcNDinvb0WWksAdm3UWhwiJ2gt2RAWo80UY7jrdSU8cZGrt6lT1HtgMaKSxbD7qqfDq99tAjyTUSG6FP9v1BH+3dTUPxeLZSssf17U5HeXEJbXr8aerY+A6tf7iOxFeu2OFmI6BvhaVgVoRCtHl5PTW8/AoV5xekmo299b2wlJn6+WFqWrOWKkpDqSYjbyFskpZFs++hL1e9NKnFvF+t3OmQOwzdkcgUmnnBABXm5Ys1j8qKisVadFPvS8tramn1goX09eEDU+KbsmGlsMbjbbT6x++UDOVORGXoFppXOYMerLqbVsyrpcWzqykYdH5R+fjZlcnd/8sjV5Q5vOh0rt6LqhhyJsQ3uC+ID8ry89aHYtf90W1bKLzlffr19EnH6HIP8oXasOM4LwbkrLB0MP+6cJ6e+eoz+vTP5nTdU9peDC+Ysm3Khq+ESehy5r3e2ECHu7uUDuqq59Id4iXVtMV3wqSACSHt3V2/KF3I97qayjuVY7zo9KUwCfq3M6coNjamZD6zrFzZ70Wnb4XFxseoK3JZyXzWtGnKfi86fStMwu6LRpXMZ5RBmBKQ7k75XqZa8gLmPZ/Nq0hFkLnvttJSZUT5Oc60xbfC5CGs6lsrlD56hgaV/V50+lbYkuo5VFygPp3SMwxhXjwp0+bcsGRp2vZU48TEBB09153aNObWlzNMHo1/6r4apYTmsx10MTqsHONFp5VH6zMBtWbhYtq6YpVjiJ/ajjmO8WKAL4QFxamWZffPT1678dicex05D4jTKj8cO+Q4zosBOSXs7bonktci5ovjgPIUye3ieo3wzKrk+TC5faPLGz83On6ovtFY3ONySth7Ty67qbPMk6Hu+edv+vzg/slNRv3uy52O6xk40HWW6r/94nrdRrTn1AzLhOju9tP03DfbKTo6mkmYrN/X98L6xQHgTb/vpG0t+5LnybJOPMMEvhXWOXCJvj9yiD7Yu4sGRkYyxKjv7r4RJi+Na+05Rwf/66SG1qO0v/NffZQZM+WUsI07d1BC/MTE144GYzHxJYcYDYq1vb/f8WQlI9OshsopYZubm7IKy4Tg2K03wYKLGiDMBSwThkKYCRZc1ABhLmCZMBTCTLDgogYIcwHLhKEQZoIFFzVAmAtYJgyFMBMsuKgBwlzAMmEohJlgwUUNEOYClglDIcwECy5qgDAXsEwYCmEmWHBRA4S5gGXCUAgzwYKLGow84yyvuyhR/GW19kt9Lh5ibg01UtjS7VtzizLjo8FLIiNMHaEgTAdlxhwQxghTRygI00GZMQeEMcLUEQrCdFBmzAFhjDB1hIIwHZQZc0AYI0wdoSBMB2XGHBDGCFNHKAjTQZkxB4QxwtQRCsJ0UGbMAWGMMHWEgjAdlBlzQBgjTB2hIEwHZcYcEMYIU0coCNNBmTEHhDHC1BEKwnRQZswBYYwwdYSCMB2UGXNAGCNMHaEgTAdlxhziUu1Ei8M/+WFMh1CZEUi0/A+j7hNSB5Wo2wAAAABJRU5ErkJggg==" ))
          (( .uaa.usage_service_client_credentials.identity )):
            id: (( .uaa.usage_service_client_credentials.identity ))
            secret: (( .uaa.usage_service_client_credentials.password ))
            override: true
            authorities: "cloud_controller.read,uaa.resource,cloud_controller.admin"
            authorized-grant-types: client_credentials
          invitations:
            id: (( .uaa.invitations_client_credentials.identity ))
            secret: (( .uaa.invitations_client_credentials.password ))
            scope: uaa.none
            redirect-uri: "https://apps.(( .cloud_controller.system_domain.value ))/**"
            authorized-grant-types: client_credentials
            authorities: emails.write,cloud_controller.read,cloud_controller.write,uaa.resource,scim.invite,notifications.write,cloud_controller.admin
          cf:
            id: cf
            secret: ""
            override: true
            authorities: "uaa.none"
            authorized-grant-types: "password,refresh_token"
            scope: "cloud_controller.read,cloud_controller.write,cloud_controller.global_auditor,openid,password.write,cloud_controller.admin,scim.read,scim.write,doppler.firehose,uaa.user,routing.router_groups.read,routing.router_groups.write,cloud_controller.admin_read_only,network.admin,network.write"
            access-token-validity: (( .uaa.cf_cli_access_token_lifetime.value ))
            refresh-token-validity: (( .uaa.cf_cli_refresh_token_lifetime.value ))
          (( .uaa.network_policy_server_client.identity )):
            id: (( .uaa.network_policy_server_client.identity ))
            secret: (( .uaa.network_policy_server_client.password ))
            authorities: "uaa.resource,cloud_controller.admin_read_only"
            authorized-grant-types: client_credentials
          (( .uaa.autoscale_client_credentials.identity )):
            id: (( .uaa.autoscale_client_credentials.identity ))
            secret: (( .uaa.autoscale_client_credentials.password ))
            override: true
            autoapprove: true
            authorities: "uaa.resource,cloud_controller.write,cloud_controller.read,cloud_controller.admin,notifications.write,critical_notifications.write,emails.write,doppler.firehose"
            authorized-grant-types: "client_credentials,authorization_code,refresh_token"
            scope: "openid,cloud_controller.permissions,cloud_controller.read,cloud_controller.write,doppler.firehose"
            access-token-validity: 3600
            redirect-uri: "https://autoscale.(( .cloud_controller.system_domain.value ))/sessions/create"
          (( .uaa.autoscale_api_client_credentials.identity )):
            id: (( .uaa.autoscale_api_client_credentials.identity ))
            secret: (( .uaa.autoscale_api_client_credentials.password ))
            override: true
            autoapprove: true
            authorities: "uaa.resource,cloud_controller.admin_read_only"
            authorized-grant-types: "client_credentials"
            access-token-validity: 3600
          system_passwords:
            id: (( .uaa.system_passwords_client_credentials.identity ))
            secret: (( .uaa.system_passwords_client_credentials.password ))
            override: true
            autoapprove: true
            authorities: "uaa.admin,scim.read,scim.write,password.write"
            authorized-grant-types: "client_credentials"
          cc-service-dashboards:
            id: (( .uaa.cc_service_dashboards_credentials.identity ))
            secret: (( .uaa.cc_service_dashboards_credentials.password ))
            override: true
            authorities: clients.read,clients.write,clients.admin
            authorized-grant-types: client_credentials
            scope: cloud_controller.write,openid,cloud_controller.read,cloud_controller_service_permissions.read
          cc_service_key_client:
            id: (( .uaa.cc_service_key_credentials.identity ))
            secret: (( .uaa.cc_service_key_credentials.password ))
            override: true
            authorities: credhub.read,credhub.write
            authorized-grant-types: client_credentials
          services_credhub_client:
            id: (( .uaa.services_credhub_credentials.identity ))
            secret: (( .uaa.services_credhub_credentials.password ))
            override: true
            authorities: credhub.read,credhub.write
            authorized-grant-types: client_credentials
          doppler:
            id: (( .uaa.doppler_client_credentials.identity ))
            secret: (( .uaa.doppler_client_credentials.password ))
            authorities: uaa.resource
            authorized-grant-types: client_credentials
          noisy_neighbor_nozzle:
            id: (( .uaa.noisy_neighbor_client_credentials.identity ))
            secret: (( .uaa.noisy_neighbor_client_credentials.password ))
            authorities: doppler.firehose,uaa.resource,cloud_controller.admin_read_only
            authorized-grant-types: client_credentials
            override: true
            scope: doppler.firehose
          gorouter:
            id: (( .uaa.gorouter_client_credentials.identity ))
            secret: (( .uaa.gorouter_client_credentials.password ))
            authorities: clients.read,clients.write,clients.admin,routing.routes.write,routing.routes.read
            authorized-grant-types: client_credentials,refresh_token
            scope: openid,cloud_controller_service_permissions.read
          notifications:
            id: notifications
            secret: (( .uaa.notifications_client_credentials.password ))
            authorities: cloud_controller.admin,scim.read,notifications.write,critical_notifications.write,emails.write
            authorized-grant-types: client_credentials
          notifications_template:
            id: (( .uaa.notifications_template_client_credentials.identity ))
            secret: (( .uaa.notifications_template_client_credentials.password ))
            scope: openid,clients.read,clients.write,clients.secret
            authorities: clients.read,clients.write,clients.secret,notification_templates.write,notification_templates.read,notifications.manage
            authorized-grant-types: client_credentials
          notifications_ui_client:
            id: notifications_ui_client
            secret: (( .uaa.notifications_ui_client_credentials.password ))
            scope: notification_preferences.read,notification_preferences.write,openid
            authorized-grant-types: authorization_code,client_credentials,refresh_token
            authorities: notification_preferences.admin
            autoapprove: true
            override: true
            redirect-uri: "https://notifications-ui.(( .cloud_controller.system_domain.value ))/sessions/create"
          cloud_controller_username_lookup:
            id: (( .uaa.cloud_controller_username_lookup_credentials.identity ))
            secret: (( .uaa.cloud_controller_username_lookup_credentials.password ))
            authorized-grant-types: client_credentials
            authorities: scim.userids
          (( .uaa.cc_routing_credentials.identity )):
            authorities: routing.router_groups.read
            authorized-grant-types: client_credentials
            secret: (( .uaa.cc_routing_credentials.password ))
          ssh-proxy:
            authorized-grant-types: authorization_code
            autoapprove: true
            override: true
            redirect-uri: "https://uaa.(( .cloud_controller.system_domain.value ))/login"
            scope: openid,cloud_controller.read,cloud_controller.write,cloud_controller.admin
            secret: (( .uaa.ssh_proxy_client_credentials.password ))
          apps_metrics:
            id: (( .uaa.apps_metrics_credentials.identity ))
            secret: (( .uaa.apps_metrics_credentials.password ))
            override: true
            autoapprove: true
            authorized-grant-types: authorization_code,refresh_token,client_credentials,password
            redirect-uri: "https://metrics.(( .cloud_controller.system_domain.value )),https://metrics.(( .cloud_controller.system_domain.value ))/,https://metrics.(( .cloud_controller.system_domain.value ))/*"
            authorities: uaa.resource
            scope: cloud_controller.admin,cloud_controller.read,metrics.read
            access-token-validity: 900
            refresh-token-validity: 2628000
          apps_metrics_processing:
            id: (( .uaa.apps_metrics_processing_credentials.identity ))
            secret: (( .uaa.apps_metrics_processing_credentials.password ))
            override: true
            authorized-grant-types: authorization_code,client_credentials,refresh_token
            authorities: oauth.login,doppler.firehose,cloud_controller.admin,uaa.resource
            scope: openid,oauth.approvals,doppler.firehose,cloud_controller.admin
            access-token-validity: 1209600
            redirect-uri: "https://metrics.(( .cloud_controller.system_domain.value ))"
          healthwatch_ui:
            id: "(( .uaa.healthwatch_ui_credentials.identity ))"
            secret: "(( .uaa.healthwatch_ui_credentials.password ))"
            override: true
            authorized-grant-types: authorization_code,password,implicit,refresh_token
            authorities: uaa.resource
            scope: healthwatch.read,healthwatch.admin
            access-token-validity: 900
            redirect-uri: "https://healthwatch.(( .cloud_controller.system_domain.value ))"
            autoapprove: true
            refresh-token-validity: 2628000
          healthwatch_alerts:
            id: "(( .uaa.healthwatch_alerts_credentials.identity ))"
            secret: "(( .uaa.healthwatch_alerts_credentials.password ))"
            override: true
            scope: uaa.none
            authorized-grant-types: client_credentials
            authorities: notifications.write
            access-token-validity: 3600
            autoapprove: true
          healthwatch_firehose:
            id: "(( .uaa.healthwatch_firehose_credentials.identity ))"
            secret: "(( .uaa.healthwatch_firehose_credentials.password ))"
            authorized-grant-types: client_credentials,refresh_token
            authorities: oauth.login,doppler.firehose,cloud_controller.read,uaa.resource,cloud_controller.admin
            scope: openid,oauth.approvals,doppler.firehose,cloud_controller.admin
            access-token-validity: 3600
          tcp_router:
            id: (( .uaa.tcp_router_credentials.identity ))
            secret: (( .uaa.tcp_router_credentials.password ))
            override: true
            authorized-grant-types: client_credentials,refresh_token
            authorities: routing.routes.read,routing.router_groups.read
            scope: routing.routes.read,routing.router_groups.read
            access-token-validity: 1209600
          tcp_emitter:
            id: (( .uaa.tcp_emitter_credentials.identity ))
            secret: (( .uaa.tcp_emitter_credentials.password ))
            override: true
            authorized-grant-types: client_credentials,refresh_token
            authorities: routing.routes.write,routing.routes.read,routing.router_groups.read
            scope: routing.routes.write,routing.routes.read,routing.router_groups.read
            access-token-validity: 1209600
          pivotal_account:
            id: (( .uaa.pivotal_account_client_credentials.identity ))
            secret: (( .uaa.pivotal_account_client_credentials.password ))
            scope: openid,password.write,oauth.approvals
            authorities: uaa.resource,idps.read,clients.read,scim.read,scim.create,scim.write,emails.write,oauth.login,notification_templates.write,notifications.manage,notification_templates.read,uaa.admin
            authorized-grant-types: client_credentials,authorization_code
            access-token-validity: 1209600
            refresh-token-validity: 1209600
            autoapprove: true
            override: true
            redirect-uri: https://account.(( .cloud_controller.system_domain.value ))/**
          concourse_atc:
            id: (( .uaa.concourse_atc_client_credentials.identity ))
            secret: (( .uaa.concourse_atc_client_credentials.password ))
            scope: cloud_controller.read
            authorities: cloud_controller.admin
            authorized-grant-types: "authorization_code,client_credentials,refresh_token"
            access-token-validity: 3600
            refresh-token-validity: 3600
            autoapprove: true
            override: true
            redirect-uri: "https://p-concourse.(( .cloud_controller.system_domain.value ))/auth/uaa/callback"
          push-notifications-dashboard:
            id: (( .uaa.push_notifications_dashboard_client.identity ))
            secret: (( .uaa.push_notifications_dashboard_client.password ))
            scope: cloud_controller.read,cloud_controller.write,openid
            authorities: scim.read
            authorized-grant-types: "refresh_token,client_credentials,authorization_code"
            access-token-validity: 3600
            autoapprove: true
            redirect-uri: "https://push.(( .cloud_controller.system_domain.value ))/auth/cloudfoundry/callback"
          push-api:
            id: (( .uaa.push_api_client.identity ))
            secret: (( .uaa.push_api_client.password ))
            scope: uaa.none
            authorities: uaa.resource
            authorized-grant-types: client_credentials
          solace_router:
            id: (( .uaa.solace_router_client_credentials.identity ))
            secret: (( .uaa.solace_router_client_credentials.password ))
            scope: "uaa.none"
            authorities: "routing.routes.read,routing.routes.write,routing.router_groups.read,cloud_controller.read,cloud_controller.write,cloud_controller.admin"
            authorized-grant-types: "refresh_token,client_credentials"
          greenplum_broker:
            id: (( .uaa.greenplum_broker_client_credentials.identity ))
            secret: (( .uaa.greenplum_broker_client_credentials.password ))
            scope: "uaa.none"
            authorities: "cloud_controller.read"
            authorized-grant-types: "refresh_token,client_credentials"
          greenplum_router_admin:
            id: (( .uaa.greenplum_router_admin_client_credentials.identity ))
            secret: (( .uaa.greenplum_router_admin_client_credentials.password ))
            scope: "uaa.none"
            authorities: "cloud_controller.admin,routing.router_groups.read"
            authorized-grant-types: "refresh_token,client_credentials"
          greenplum_router:
            id: (( .uaa.greenplum_router_client_credentials.identity ))
            secret: (( .uaa.greenplum_router_client_credentials.password ))
            scope: "uaa.none"
            authorities: "routing.routes.write"
            authorized-grant-types: "refresh_token,client_credentials"
          cloudcache_broker:
            id: (( .uaa.cloudcache_broker_client_credentials.identity ))
            secret: (( .uaa.cloudcache_broker_client_credentials.password ))
            scope: "uaa.none"
            authorities: "cloud_controller.admin"
            authorized-grant-types: "refresh_token,client_credentials"
          dedicated-mysql-notifications:
            id: (( .uaa.dedicated_mysql_notifications_client_credentials.identity ))
            secret: (( .uaa.dedicated_mysql_notifications_client_credentials.password ))
            scope: "uaa.none"
            authorities: "notifications.write"
            authorized-grant-types: "client_credentials"
          container-networking-interface:
            id: (( .uaa.container_networking_interface_client_credentials.identity ))
            secret: (( .uaa.container_networking_interface_client_credentials.password ))
            authorities: uaa.resource,cloud_controller.global_auditor
            authorized-grant-types: client_credentials
          credhub_cli:
            id: credhub_cli
            secret: ""
            scope: credhub.read,credhub.write
            authorities: uaa.resource
            authorized-grant-types: password,refresh_token
            access-token-validity: 120
            override: true
            refresh-token-validity: 3600
        servlet:
          session-cookie:
            max-age: (( .properties.uaa_session_cookie_max_age.value ))
          idle-timeout: (( .properties.uaa_session_idle_timeout.value ))
    name: uaa
    release: uaa
  - manifest: |
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          statsd_injector:
            cert: (( .loggregator_trafficcontroller.statsdinjector_tls_cert.cert_pem ))
            key: (( .loggregator_trafficcontroller.statsdinjector_tls_cert.private_key_pem ))
    name: statsd_injector
    release: statsd-injector
  - name: go-buildpack
    release: go-offline-buildpack
  - name: binary-buildpack
    release: binary-offline-buildpack
  - name: nodejs-buildpack
    release: nodejs-offline-buildpack
  - name: ruby-buildpack
    release: ruby-offline-buildpack
  - name: php-buildpack
    release: php-offline-buildpack
  - name: python-buildpack
    release: python-offline-buildpack
  - name: java-buildpack
    release: java-offline-buildpack
  - name: staticfile-buildpack
    release: staticfile-offline-buildpack
  - name: dotnet-core-buildpack
    release: dotnet-core-offline-buildpack
  - consumes: |
      (( .properties.system_database.selected_option.parsed_manifest(ccdb_link) ))
    manifest: |
      uaa:
        url: https://uaa.(( .cloud_controller.system_domain.value ))
        clients:
          cc-service-dashboards:
            scope: cloud_controller.write,openid,cloud_controller.read,cloud_controller_service_permissions.read
            secret: (( .uaa.cc_service_dashboards_credentials.password ))
          cc_service_key_client:
            secret: (( .uaa.cc_service_key_credentials.password ))
          cloud_controller_username_lookup:
            secret: (( .uaa.cloud_controller_username_lookup_credentials.password ))
          cc_routing:
            secret: (( .uaa.cc_routing_credentials.password ))
        ca_cert: (( $ops_manager.ca_certificate ))
      dea_next:
        staging_disk_limit_mb: 6144
      app_domains:
      - (( .cloud_controller.apps_domain.value ))
      login:
        url: https://login.(( .cloud_controller.system_domain.value ))
      domain: (( .cloud_controller.system_domain.value ))
      ccdb: (( .properties.system_database.selected_option.parsed_manifest(ccdb) ))
      cc:
        buildpacks: (( .properties.system_blobstore.selected_option.parsed_manifest(ccbuildpack) ))
        droplets: (( .properties.system_blobstore.selected_option.parsed_manifest(ccdroplet) ))
        packages: (( .properties.system_blobstore.selected_option.parsed_manifest(ccpackage) ))
        resource_pool: (( .properties.system_blobstore.selected_option.parsed_manifest(ccresource) ))
        rate_limiter: (( .properties.cc_api_rate_limit.selected_option.parsed_manifest(rate_limiter) ))
        disable_custom_buildpacks: "(( .cloud_controller.enable_custom_buildpacks.value ? 'false' : 'true' ))"
        mutual_tls:
          private_key: (( .properties.cloud_controller_mutual_cert.private_key_pem ))
          ca_cert: (( $ops_manager.ca_certificate ))
          public_cert: (( .properties.cloud_controller_mutual_cert.cert_pem ))
        stacks:
        - name: cflinuxfs2
          description: Cloud Foundry Linux-based filesystem
        - name: windows2012R2
          description: Microsoft Windows / .Net 64 bit
        - name: windows2016
          description: Microsoft Windows 2016
        min_cli_version: 6.23.0
        bulk_api_password: ((( cloud-controller-bulk-api-credentials.password )))
        default_running_security_groups:
        - default_security_group
        allow_app_ssh_access: (( .cloud_controller.allow_app_ssh_access.value ))
        default_app_disk_in_mb: (( .cloud_controller.default_disk_quota_app.value ))
        app_bits_max_body_size: "(( .cloud_controller.max_file_size.value ))M"
        db_encryption_key: (( .cloud_controller.encrypt_key.value || .cloud_controller.db_encryption_credentials.password ))
        maximum_health_check_timeout: 600
        security_group_definitions:
        - name: default_security_group
          rules:
          - protocol: all
            destination: 0.0.0.0-169.253.255.255
          - protocol: all
            destination: 169.255.0.0-255.255.255.255
        default_app_ssh_access: (( .cloud_controller.default_app_ssh_access.value ))
        min_recommended_cli_version: 6.23.0
        security_event_logging:
          enabled: (( .cloud_controller.security_event_logging_enabled.value ))
        install_buildpacks:
        - name: staticfile_buildpack
          package: staticfile-buildpack
        - name: java_buildpack_offline
          package: java-buildpack
        - name: ruby_buildpack
          package: ruby-buildpack
        - name: nodejs_buildpack
          package: nodejs-buildpack
        - name: go_buildpack
          package: go-buildpack
        - name: python_buildpack
          package: python-buildpack
        - name: php_buildpack
          package: php-buildpack
        - name: dotnet_core_buildpack
          package: dotnet-core-buildpack
        - name: binary_buildpack
          package: binary-buildpack
        broker_client_default_async_poll_interval_seconds: 10
        diego:
          lifecycle_bundles:
            "buildpack/cflinuxfs2": "buildpack_app_lifecycle/buildpack_app_lifecycle.tgz"
            "buildpack/windows2012R2": "windows_app_lifecycle/windows_app_lifecycle.tgz"
            "buildpack/windows2016": "buildpack_app_lifecycle/buildpack_app_lifecycle.tgz"
            "docker": "docker_app_lifecycle/docker_app_lifecycle.tgz"
          temporary_cc_uploader_mtls: true
          temporary_droplet_download_mtls: true
          temporary_local_apps: true
          temporary_local_staging: true
          temporary_local_sync: true
          temporary_local_tasks: true
          temporary_local_tps: true
          file_server_url: http://file-server.service.cf.internal:8084
          pid_limit: 0
        allowed_cors_domains:
        - https://apm.(( .cloud_controller.system_domain.value ))
        - https://metrics.(( .cloud_controller.system_domain.value ))
        maximum_app_disk_in_mb: (( .cloud_controller.max_disk_quota_app.value ))
        default_app_memory: (( .cloud_controller.default_app_memory.value ))
        internal_api_user: ((( cloud-controller-internal-api-user-credentials.username )))
        internal_api_password: ((( cloud-controller-internal-api-user-credentials.password )))
        staging_upload_user: ((( cloud-controller-staging-upload-credentials.username )))
        staging_upload_password: ((( cloud-controller-staging-upload-credentials.password )))
        volume_services_enabled: true
        default_staging_security_groups:
        - default_security_group
        quota_definitions:
          default:
            memory_limit: (( .cloud_controller.default_quota_memory_limit_mb.value ))
            total_services: (( .cloud_controller.default_quota_max_number_services.value ))
            non_basic_services_allowed: true
            total_routes: 1000
            trial_db_allowed: true
          runaway:
            memory_limit: 102400
            total_services: -1
            total_routes: 1000
            non_basic_services_allowed: true
        server_keepalive_timeout: 0
        staging_timeout_in_seconds: (( .cloud_controller.staging_timeout_in_seconds.value ))
        temporary_create_internal_domain: (( .properties.enable_service_discovery_for_apps.value ))
      credhub_api:
        ca_cert: (( $ops_manager.ca_certificate ))
      support_address: https://support.pivotal.io
      routing_api:
        enabled: true
      hm9000:
        port: 12345
      ssl:
        skip_cert_verify: (( .ha_proxy.skip_cert_verify.value ))
      doppler:
        port: (( .properties.logger_endpoint_port.value ))
      router:
        route_services_secret: (( .properties.route_services.selected_option.parsed_manifest(secret) ))
      app_ssh:
        host_key_fingerprint: (( .diego_brain.ssh_host_key.public_key_fingerprint ))
      release_level_backup: true
      system_domain: (( .cloud_controller.system_domain.value ))
      system_domain_organization: system
    name: cloud_controller_ng
    provides: |
      cloud_controller: {as: cloud_controller, shared: true}
    release: capi
  - manifest: |
      release_level_backup: true
      uaa:
        tls_port: 8443
        ca_cert: (( $ops_manager.ca_certificate ))
      routing_api:
        log_level: debug
        router_groups: (( .properties.tcp_routing.selected_option.parsed_manifest(default_router_group) ))
        skip_consul_lock: true
        system_domain: (( .cloud_controller.system_domain.value ))
        sqldb: (( .properties.system_database.selected_option.parsed_manifest(routingdb) ))
        debug_address: "127.0.0.1:17003"
        locket:
          api_location: locket.service.cf.internal:8891
          ca_cert: (( $ops_manager.ca_certificate ))
          client_cert: (( .cloud_controller.locket_client_cert.cert_pem ))
          client_key: (( .cloud_controller.locket_client_cert.private_key_pem ))
    name: routing-api
    release: routing
  - manifest: |
      release_level_backup: true
    name: cloud-controller-backup
    release: cf-backup-and-restore
  - consumes: |
      (( .properties.system_database.selected_option.parsed_manifest(ccdb_link) ))
    manifest: |
      ccdb: (( .properties.system_database.selected_option.parsed_manifest(ccdb) ))
      system_domain_organization: system
      app_domains:
      - (( .cloud_controller.apps_domain.value ))
      uaa:
        url: https://uaa.(( .cloud_controller.system_domain.value ))
        clients:
          cc-service-dashboards:
            secret: (( .uaa.cc_service_dashboards_credentials.password ))
          cc_routing:
            secret: (( .uaa.cc_routing_credentials.password ))
      system_domain: (( .cloud_controller.system_domain.value ))
      cc:
        buildpacks: (( .properties.system_blobstore.selected_option.parsed_manifest(ccbuildpack) ))
        droplets: (( .properties.system_blobstore.selected_option.parsed_manifest(ccdroplet) ))
        packages: (( .properties.system_blobstore.selected_option.parsed_manifest(ccpackage) ))
        resource_pool: (( .properties.system_blobstore.selected_option.parsed_manifest(ccresource) ))
        default_running_security_groups:
        - default_security_group
        db_encryption_key: (( .cloud_controller.encrypt_key.value || .cloud_controller.db_encryption_credentials.password ))
        mutual_tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          public_cert: (( .properties.cloud_controller_mutual_cert.cert_pem ))
          private_key: (( .properties.cloud_controller_mutual_cert.private_key_pem ))
        internal_api_user: ((( cloud-controller-internal-api-user-credentials.username )))
        internal_api_password: ((( cloud-controller-internal-api-user-credentials.password )))
        staging_upload_user: ((( cloud-controller-staging-upload-credentials.username )))
        staging_upload_password: ((( cloud-controller-staging-upload-credentials.password )))
        default_staging_security_groups:
        - default_security_group
        allow_app_ssh_access: (( .cloud_controller.allow_app_ssh_access.value ))
        maximum_health_check_timeout: 600
        security_group_definitions:
        - name: default_security_group
          rules:
          - protocol: all
            destination: 0.0.0.0-169.253.255.255
          - protocol: all
            destination: 169.255.0.0-255.255.255.255
        bulk_api_password: ((( cloud-controller-bulk-api-credentials.password )))
        quota_definitions:
          default:
            memory_limit: (( .cloud_controller.default_quota_memory_limit_mb.value ))
            total_services: (( .cloud_controller.default_quota_max_number_services.value ))
            non_basic_services_allowed: true
            total_routes: 1000
            trial_db_allowed: true
          runaway:
            memory_limit: 102400
            total_services: -1
            total_routes: 1000
            non_basic_services_allowed: true
        diego:
          lifecycle_bundles:
            "buildpack/cflinuxfs2": "buildpack_app_lifecycle/buildpack_app_lifecycle.tgz"
            "buildpack/windows2012R2": "windows_app_lifecycle/windows_app_lifecycle.tgz"
            "buildpack/windows2016": "buildpack_app_lifecycle/buildpack_app_lifecycle.tgz"
            "docker": "docker_app_lifecycle/docker_app_lifecycle.tgz"
          temporary_cc_uploader_mtls: true
          temporary_droplet_download_mtls: true
          temporary_local_apps: true
          temporary_local_staging: true
          temporary_local_sync: true
          temporary_local_tasks: true
          temporary_local_tps: true
          file_server_url: http://file-server.service.cf.internal:8084
          pid_limit: 0
      credhub_api:
        ca_cert: (( $ops_manager.ca_certificate ))
      login:
        url: https://login.(( .cloud_controller.system_domain.value ))
      ssl:
        skip_cert_verify: (( .ha_proxy.skip_cert_verify.value ))
      routing_api:
        enabled: true
      hm9000:
        port: 12345
      release_level_backup: true
    name: cloud_controller_clock
    release: capi
  - consumes: |
      (( .properties.system_database.selected_option.parsed_manifest(ccdb_link) ))
    manifest: |
      ccdb: (( .properties.system_database.selected_option.parsed_manifest(ccdb) ))
      cc:
        buildpacks: (( .properties.system_blobstore.selected_option.parsed_manifest(ccbuildpack) ))
        droplets: (( .properties.system_blobstore.selected_option.parsed_manifest(ccdroplet) ))
        packages: (( .properties.system_blobstore.selected_option.parsed_manifest(ccpackage) ))
        resource_pool: (( .properties.system_blobstore.selected_option.parsed_manifest(ccresource) ))
        bulk_api_password: ((( cloud-controller-bulk-api-credentials.password )))
        db_encryption_key: (( .cloud_controller.encrypt_key.value || .cloud_controller.db_encryption_credentials.password ))
        allow_app_ssh_access: (( .cloud_controller.allow_app_ssh_access.value ))
        internal_api_user: ((( cloud-controller-internal-api-user-credentials.username )))
        internal_api_password: ((( cloud-controller-internal-api-user-credentials.password )))
        staging_upload_user: ((( cloud-controller-staging-upload-credentials.username )))
        staging_upload_password: ((( cloud-controller-staging-upload-credentials.password )))
        perform_blob_cleanup: true
        default_running_security_groups:
        - default_security_group
        maximum_health_check_timeout: 600
        mutual_tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          public_cert: (( .properties.cloud_controller_mutual_cert.cert_pem ))
          private_key: (( .properties.cloud_controller_mutual_cert.private_key_pem ))
        security_group_definitions:
        - name: default_security_group
          rules:
          - protocol: all
            destination: 0.0.0.0-169.253.255.255
          - protocol: all
            destination: 169.255.0.0-255.255.255.255
        default_staging_security_groups:
        - default_security_group
        default_app_ssh_access: (( .cloud_controller.default_app_ssh_access.value ))
        quota_definitions:
          default:
            memory_limit: (( .cloud_controller.default_quota_memory_limit_mb.value ))
            total_services: (( .cloud_controller.default_quota_max_number_services.value ))
            non_basic_services_allowed: true
            total_routes: 1000
            trial_db_allowed: true
          runaway:
            memory_limit: 102400
            total_services: -1
            total_routes: 1000
            non_basic_services_allowed: true
        diego:
          lifecycle_bundles:
            "buildpack/cflinuxfs2": "buildpack_app_lifecycle/buildpack_app_lifecycle.tgz"
            "buildpack/windows2012R2": "windows_app_lifecycle/windows_app_lifecycle.tgz"
            "buildpack/windows2016": "buildpack_app_lifecycle/buildpack_app_lifecycle.tgz"
            "docker": "docker_app_lifecycle/docker_app_lifecycle.tgz"
          temporary_cc_uploader_mtls: true
          temporary_droplet_download_mtls: true
          temporary_local_apps: true
          temporary_local_staging: true
          temporary_local_sync: true
          temporary_local_tasks: true
          temporary_local_tps: true
          file_server_url: http://file-server.service.cf.internal:8084
          pid_limit: 0
      uaa:
        url: https://uaa.(( .cloud_controller.system_domain.value ))
        clients:
          cc-service-dashboards:
            secret: (( .uaa.cc_service_dashboards_credentials.password ))
          cc_routing:
            secret: (( .uaa.cc_routing_credentials.password ))
        ca_cert: (( $ops_manager.ca_certificate ))
      login:
        url: https://login.(( .cloud_controller.system_domain.value ))
      app_domains:
      - (( .cloud_controller.apps_domain.value ))
      hm9000:
        port: 12345
      system_domain: (( .cloud_controller.system_domain.value ))
      ssl:
        skip_cert_verify: (( .ha_proxy.skip_cert_verify.value ))
      routing_api:
        enabled: true
      domain: (( .cloud_controller.system_domain.value ))
      release_level_backup: true
    name: cloud_controller_worker
    release: capi
  - manifest: |
      diego:
        auctioneer:
          skip_consul_lock: true
          starting_container_count_maximum: (( .diego_brain.starting_container_count_maximum.value ))
          ca_cert: (( $ops_manager.ca_certificate ))
          server_cert: (( .properties.auctioneer_server_cert.cert_pem ))
          server_key: (( .properties.auctioneer_server_cert.private_key_pem ))
          bbs:
            client_cert: (( .properties.bbs_client_cert.cert_pem ))
            client_key: (( .properties.bbs_client_cert.private_key_pem ))
            ca_cert: (( $ops_manager.ca_certificate ))
          rep:
            client_cert: (( .properties.rep_client_cert.cert_pem ))
            client_key: (( .properties.rep_client_cert.private_key_pem ))
            require_tls: true
            ca_cert: (( $ops_manager.ca_certificate ))
          locket:
            api_location: locket.service.cf.internal:8891
    name: auctioneer
    release: diego
  - manifest: |
      capi:
        cc_uploader:
          debug_port: 17019
          mutual_tls:
            ca_cert: (( $ops_manager.ca_certificate ))
            server_cert: (( .diego_brain.cc_uploader_server_cert.cert_pem ))
            server_key: (( .diego_brain.cc_uploader_server_cert.private_key_pem ))
          cc:
            job_polling_interval_in_seconds: 5
            ca_cert: (( $ops_manager.ca_certificate ))
            client_cert: (( .properties.cloud_controller_client_cert.cert_pem ))
            client_key: (( .properties.cloud_controller_client_cert.private_key_pem ))
    name: cc_uploader
    release: capi
  - manifest: |
      diego:
        file_server:
          listen_addr: 0.0.0.0:8084
    name: file_server
    release: diego
  - manifest: |
      connect_to_instance_address: (( .properties.container_networking_interface_plugin.selected_option.parsed_manifest(use_container_address) ))
      diego:
        ssh_proxy:
          host_key: (( .diego_brain.ssh_host_key.private_key_pem ))
          enable_cf_auth: true
          diego_credentials: ''
          uaa_token_url: https://uaa.(( .cloud_controller.system_domain.value ))/oauth/token
          uaa_secret: (( .uaa.ssh_proxy_client_credentials.password ))
          bbs:
            client_cert: (( .properties.bbs_client_cert.cert_pem ))
            client_key: (( .properties.bbs_client_cert.private_key_pem ))
            ca_cert: (( $ops_manager.ca_certificate ))
        ssl:
          skip_cert_verify: (( .ha_proxy.skip_cert_verify.value ))
    name: ssh_proxy
    release: diego
  - manifest: |
      capi:
        tps:
          bbs:
            ca_cert: (( $ops_manager.ca_certificate ))
            client_cert: (( .properties.bbs_client_cert.cert_pem ))
            client_key: (( .properties.bbs_client_cert.private_key_pem ))
          cc:
            client_cert: (( .properties.tps_client_cert.cert_pem ))
            client_key: (( .properties.tps_client_cert.private_key_pem ))
            ca_cert: (( $ops_manager.ca_certificate ))
          watcher:
            locket:
              api_location: locket.service.cf.internal:8891
            skip_consul_lock: true
          listener_enabled: false
      diego:
        ssl:
          skip_cert_verify: (( .ha_proxy.skip_cert_verify.value ))
      release_level_backup: true
    name: tps
    release: capi
  - manifest: |
      system_domain: (( .cloud_controller.system_domain.value ))
      ssl:
        skip_cert_verify: (( .ha_proxy.skip_cert_verify.value ))
      cc:
        internal_service_hostname: cloud-controller-ng.service.cf.internal
        mutual_tls:
          ca_cert: (( $ops_manager.ca_certificate ))
        tls_port: 9023
      uaa:
        internal_url: "https://uaa.service.cf.internal:8443"
        ca_cert: (( $ops_manager.ca_certificate ))
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          cc_trafficcontroller:
            cert: (( .loggregator_trafficcontroller.cc_trafficcontroller_tls_cert.cert_pem ))
            key: (( .loggregator_trafficcontroller.cc_trafficcontroller_tls_cert.private_key_pem ))
          trafficcontroller:
            cert: (( .loggregator_trafficcontroller.trafficcontroller_tls_cert.cert_pem ))
            key: (( .loggregator_trafficcontroller.trafficcontroller_tls_cert.private_key_pem ))
        uaa:
          client: (( .uaa.doppler_client_credentials.identity ))
          client_secret: (( .uaa.doppler_client_credentials.password ))
    name: loggregator_trafficcontroller
    release: loggregator
  - manifest: |
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          reverse_log_proxy:
            cert: (( .syslog_adapter.adapter_rlp_tls.cert_pem ))
            key: (( .syslog_adapter.adapter_rlp_tls.private_key_pem ))
      reverse_log_proxy:
        egress:
          port: 8086
    name: reverse_log_proxy
    provides: |
      reverse_log_proxy: {as: reverse_log_proxy, shared: true}
    release: loggregator
  - manifest: |
      scalablesyslog:
        adapter:
          health: 8083
          logs:
            addr: reverse-log-proxy.service.cf.internal:8086
          metrics_to_syslog_enabled: (( .properties.syslog_metrics_to_syslog_enabled.value ))
          tls:
            ca: (( $ops_manager.ca_certificate ))
            cert: (( .syslog_adapter.adapter_tls.cert_pem ))
            key: (( .syslog_adapter.adapter_tls.private_key_pem ))
            cn: ss-adapter
        adapter_rlp:
          tls:
            ca: (( $ops_manager.ca_certificate ))
            cert: (( .syslog_adapter.adapter_rlp_tls.cert_pem ))
            key: (( .syslog_adapter.adapter_rlp_tls.private_key_pem ))
            cn: reverselogproxy
    name: adapter
    release: cf-syslog-drain
  - manifest: |
      scalablesyslog:
        scheduler:
          api:
            url: https://cloud-controller-ng.service.cf.internal:9023
          health: 8085
          tls:
            client:
              cert: (( .syslog_scheduler.scheduler_client_tls.cert_pem ))
              key: (( .syslog_scheduler.scheduler_client_tls.private_key_pem ))
              adapter_cn: ss-adapter
              ca: (( $ops_manager.ca_certificate ))
            api:
              ca: (( $ops_manager.ca_certificate ))
              cert: (( .syslog_scheduler.scheduler_api_tls.cert_pem ))
              key: (( .syslog_scheduler.scheduler_api_tls.private_key_pem ))
              cn: cloud-controller-ng.service.cf.internal
    name: scheduler
    release: cf-syslog-drain
  - manifest: |
      doppler:
        disable_announce: true
        health_addr: localhost:14826
        message_drain_buffer_size: (( .doppler.message_drain_buffer_size.value ))
        outgoing_port: 65123 # This is a random port as nothing cares about what doppler listens on
      loggregator:
        disable_syslog_drains: true
        etcd:
          machines: []
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          doppler:
            cert: (( .doppler.doppler_tls_cert.cert_pem ))
            key: (( .doppler.doppler_tls_cert.private_key_pem ))
    name: doppler
    release: loggregator
  - manifest: |
      credhub:
        authentication:
          mutual_tls:
            trusted_cas:
            - ((( /cf/diego-instance-identity-root-ca.certificate )))
          uaa:
            ca_certs:
            - (( $ops_manager.ca_certificate ))
            url: https://uaa.service.cf.internal:8443
        authorization:
          acls:
            enabled: true
        ca_certificate: (( $ops_manager.ca_certificate ))
        data_storage: (( .properties.credhub_database.selected_option.parsed_manifest(db_config) ))
        encryption:
          keys: (( .properties.credhub_key_encryption_passwords.parsed_manifest(keys) ))
          providers: (( .properties.credhub_hsm_provider_list.selected_option.parsed_manifest(list) ))
        internal_url: credhub.service.cf.internal
        tls:
          certificate: (( .properties.credhub_tls.cert_pem ))
          private_key: (( .properties.credhub_tls.private_key_pem ))
    name: credhub
    provides: |
      credhub: {shared: true}
    release: credhub
  - name: database-backup-restorer
    release: backup-and-restore-sdk
  - manifest: |
      bosh:
        url: https://(( $director.hostname || $director.deployment_ip )):25555
        root_ca_cert: "(( $director.ca_public_key ))"
      metrics_server:
        addr: (( $director.hostname || $director.deployment_ip )):25595
      metrics_forwarder:
        tls:
          ca_cert: "(( $director.ca_public_key ))"
          common_name: (( $director.hostname || $director.deployment_ip ))
      uaa_client:
        identity: (( $director.bosh_metrics_forwarder_client_name ))
        password: (( $director.bosh_metrics_forwarder_client_secret ))
      loggregator:
        ca_cert: (( $ops_manager.ca_certificate ))
        cert: (( .doppler.metron_tls_cert.cert_pem ))
        key: (( .doppler.metron_tls_cert.private_key_pem ))
    name: bosh-system-metrics-forwarder
    release: bosh-system-metrics-forwarder
  - manifest: |
      smoke_tests: (( .properties.smoke_tests.selected_option.parsed_manifest(smoke_tests) ))
    name: smoke_tests
    release: cf-smoke-tests
  - consumes: |
      (( .properties.system_database.selected_option.parsed_manifest(push_app_usage_service_db_link) ))
    manifest: |
      cf:
        api_url: "https://api.(( .cloud_controller.system_domain.value ))"
        uaa_url: "https://login.(( .cloud_controller.system_domain.value ))"
        notifications_service_url: "https://notifications.(( .cloud_controller.system_domain.value ))"
        admin_username: (( .uaa.push_apps_manager_credentials.identity ))
        admin_password: (( .uaa.push_apps_manager_credentials.password ))
        system_domain: (( .cloud_controller.system_domain.value ))
        apps_domain: (( .cloud_controller.apps_domain.value ))
      app_usage_service:
        url: "https://app-usage.(( .cloud_controller.system_domain.value ))"
        uaa_client_id: (( .uaa.usage_service_client_credentials.identity ))
        uaa_client_secret: (( .uaa.usage_service_client_credentials.password ))
        rails_secret_token: ((( push-usage-service-secret-token )))
      databases:
        app_usage_service: (( .properties.system_database.selected_option.parsed_manifest(push-app-usage-service) ))
      ssl:
        skip_cert_verify: (( .ha_proxy.skip_cert_verify.value ))
        disable_http_for_links: (( .properties.routing_disable_http.value ))
    name: push-usage-service
    release: push-usage-service-release
  - name: cflinuxfs2-rootfs-setup
    release: cflinuxfs2
  - manifest: |
      apps_manager:
        generic_white_labeling:
          global_wrapper_footer_content: (( .properties.push_apps_manager_global_wrapper_footer_content.value ))
          accent_color: (( .properties.push_apps_manager_accent_color.value ))
          footer_links: (( .properties.push_apps_manager_footer_links.value ))
          footer_text: (( .properties.push_apps_manager_footer_text.value || "2017 Pivotal Software, Inc. All Rights Reserved." ))
          global_wrapper_bg_color: (( .properties.push_apps_manager_global_wrapper_bg_color.value ))
          global_wrapper_text_color: (( .properties.push_apps_manager_global_wrapper_text_color.value ))
          global_wrapper_header_content: (( .properties.push_apps_manager_global_wrapper_header_content.value ))
          company_name: (( .properties.push_apps_manager_company_name.value || "Pivotal" ))
          square_logo: (( .properties.push_apps_manager_square_logo.value ))
          favicon: (( .properties.push_apps_manager_favicon.value ))
        cf_dial_timeout: (( .properties.cf_dial_timeout_in_seconds.value ))
        enable_invitations: (( .properties.push_apps_manager_enable_invitations.value ))
        display_plan_prices: (( .properties.push_apps_manager_display_plan_prices.value ))
        currency_lookup: (( .properties.push_apps_manager_currency_lookup.value ))
        instances: 2
        memory: (( .properties.push_apps_manager_memory.value ))
        white_labeling:
          marketplace_name: (( .properties.push_apps_manager_marketplace_name.value ))
          nav_links: (( .properties.push_apps_manager_nav_links.value ))
          product_name: (( .properties.push_apps_manager_product_name.value ))
      app_usage_service:
        url: https://app-usage.(( .cloud_controller.system_domain.value ))
      cf:
        api_url: https://api.(( .cloud_controller.system_domain.value ))
        uaa_url: https://login.(( .cloud_controller.system_domain.value ))
        notifications_service_url: https://notifications.(( .cloud_controller.system_domain.value ))
        admin_username: (( .uaa.push_apps_manager_credentials.identity ))
        admin_password: (( .uaa.push_apps_manager_credentials.password ))
        system_domain: (( .cloud_controller.system_domain.value ))
        apps_domain: (( .cloud_controller.apps_domain.value ))
      invitations:
        instances: 1
        memory: (( .properties.push_apps_manager_invitations_memory.value ))
        uaa_client_secret: (( .uaa.invitations_client_credentials.password ))
      ssl:
        skip_cert_verify: (( .ha_proxy.skip_cert_verify.value ))
        disable_http_for_links: (( .properties.routing_disable_http.value ))
    name: push-apps-manager
    release: push-apps-manager-release
  - consumes: |
      (( .properties.system_database.selected_option.parsed_manifest(mysql_db_link) ))
    manifest: |
      domain: (( .cloud_controller.system_domain.value ))
      ssl:
        skip_cert_verify: (( .ha_proxy.skip_cert_verify.value ))
      notifications:
        network: notifications
        database: (( .properties.system_database.selected_option.parsed_manifest(notifications) ))
        uaa:
          admin_client_id: (( .uaa.admin_client_credentials.identity ))
          admin_client_secret: (( .uaa.admin_client_credentials.password ))
          client_id: (( .uaa.notifications_client_credentials.identity ))
          client_secret: (( .uaa.notifications_client_credentials.password ))
        app_domain: (( .cloud_controller.system_domain.value ))
        encryption_key: ((( deploy-notifications-encryption-key )))
        enable_diego: true
        syslog_url: (( .properties.system_logging.selected_option.parsed_manifest(syslog_url) ))
        organization: system
        buildpack_url: go_buildpack
        instance_count: 3
        space: notifications-with-ui
        error_on_misconfiguration: false
        smtp:
          tls: (( .properties.smtp_enable_starttls_auto.value ))
          auth_mechanism: (( .properties.smtp_auth_mechanism.value ))
          crammd5_secret: (( .properties.smtp_crammd5_secret.value ))
          host: (( .properties.smtp_address.value ))
          pass: (( .properties.smtp_credentials.password ))
          port: (( .properties.smtp_port.value ))
          user: (( .properties.smtp_credentials.identity ))
        sender: (( .properties.smtp_from.value ))
        cf:
          admin_user: (( .uaa.admin_credentials.identity ))
          admin_password: (( .uaa.admin_credentials.password ))
          dial_timeout: (( .properties.cf_dial_timeout_in_seconds.value ))
        default_template: |
          {
            "name": "Default Template",
            "subject": "CF Notification: {{.Subject}}",
            "html": "\u003ctable width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"border-collapse:collapse;font-family: Helvetica, Arial,sans-serif\"\u003e\n    \u003ctbody\u003e\n        \u003ctr\u003e\n            \u003ctd width=\"100%\" align=\"center\" bgcolor=\"#F8f8f8\" style=\"padding-right:10px;padding-left:10px\"\u003e\n                \u003ctable width=\"600\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"border-collapse:collapse\"\u003e\n                    \u003ctbody\u003e\n                        \u003ctr\u003e\n                            \u003ctd align=\"left\" valign=\"top\" style=\"padding-bottom:30px;padding-top:30px\"\u003e\n                              \u003cimg src=\"http://notifications-ui.{{.Domain}}/assets/pivotal_logo.png\"\n                                alt=\"Pivotal CF\" border=\"0\" style=\"display:block\" class=\"CToWUd\"\n                                width=\"166px\" height=\"35px\"\u003e\n                            \u003c/td\u003e\n                        \u003c/tr\u003e\n                    \u003c/tbody\u003e\n                \u003c/table\u003e\n                \u003ctable width=\"600\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"border-collapse:collapse\"\u003e\n                    \u003ctbody\u003e\n                        \u003ctr\u003e\n                            \u003ctd align=\"left\" valign=\"top\" bgcolor=\"#FFFFFF\"\u003e\n                                \u003ctable width=\"600\" cellpadding=\"40\" cellspacing=\"0\" border=\"0\" style=\"border-collapse:collapse;border:1px solid #e0e4e5\"\u003e\n                                    \u003ctbody\u003e\n                                        \u003ctr\u003e\n                                            \u003ctd style=\"color:#666666;font-size:16px;line-height:22px\"\u003e\n                                                \u003cdiv\u003e\n                                                    {{.HTML}}\n                                                \u003c/div\u003e\n                                            \u003c/td\u003e\n                                        \u003c/tr\u003e\n                                    \u003c/tbody\u003e\n                                \u003c/table\u003e\n                            \u003c/td\u003e\n                        \u003c/tr\u003e\n                    \u003c/tbody\u003e\n                \u003c/table\u003e\n                \u003ctable width=\"600\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"border-collapse:collapse;font-size:12px;color:#b4b4b4\"\u003e\n                    \u003ctbody\u003e\n                        \u003ctr\u003e\n                          \u003ctd align=\"left\" valign=\"middle\" style=\"padding-top:20px;padding-bottom:20px\"\u003eManage your \u003ca href=\"https://notifications-ui.{{.Domain}}/preferences\"\n                                target=\"_blank\"\u003enotification preferences\u003c/a\u003e or\n                              \u003ca href=\"https://notifications-ui.{{.Domain}}/unsubscribe/{{.UnsubscribeID}}\"\n                                target=\"_blank\"\u003eunsubscribe\u003c/a\u003e\n                            \u003c/td\u003e\n                        \u003c/tr\u003e\n                        \u003ctr\u003e\n                            \u003ctd align=\"left\" valign=\"middle\" style=\"padding-bottom:20px\"\u003ePivotal Cloud Foundry, and the Pivotal Cloud Foundry logo are registered\n                                trademarks or trademarks of Pivotal Software, Inc.\n                                in the United States and other countries. All other\n                                trademarks used herein are the property of their\n                                respective owners.\n                                \u003ca\u003e\n                            \u003c/td\u003e\n                        \u003c/tr\u003e\n                        \u003ctr\u003e\n                            \u003ctd align=\"left\" valign=\"middle\" style=\"padding-bottom:20px\"\u003e\u00A9 2018 Pivotal Software, Inc. All rights reserved.\n                                Published in the USA.\n                                \u003ca\u003e\n                            \u003c/td\u003e\n                        \u003c/tr\u003e\n                    \u003c/tbody\u003e\n                \u003c/table\u003e\n            \u003c/td\u003e\n        \u003c/tr\u003e\n    \u003c/tbody\u003e\n\u003c/table\u003e\n",
            "text": "_____\n\n\nPivotal CF\n\n{{.Text}}\n\nManage your notification preferences:\nhttps://notifications-ui.{{.Domain}}/preferences\n\nUnsubscribe from Pivotal emails:\nhttps://notifications-ui.{{.Domain}}/unsubscribe/{{.UnsubscribeID}}\n\nPivotal Cloud Foundry, and the Pivotal Cloud Foundry logo are registered trademarks or trademarks of Pivotal Software, Inc. in the United States and other countries. All other trademarks used herein are the property of their respective owners.\n\n\u00A9 2018 Pivotal Software, Inc. All rights reserved. Published in the USA.\n\n______\n",
            "metadata": {}
          }
    name: deploy-notifications
    release: notifications
  - manifest: |
      domain: (( .cloud_controller.system_domain.value ))
      ssl:
        skip_cert_verify: (( .ha_proxy.skip_cert_verify.value ))
      notifications_ui:
        organization: system
        space: notifications-with-ui
        syslog_url: (( .properties.system_logging.selected_option.parsed_manifest(syslog_url) ))
        instance_count: 2
        cf:
          dial_timeout: (( .properties.cf_dial_timeout_in_seconds.value ))
          admin_user: (( .uaa.admin_credentials.identity ))
          admin_password: (( .uaa.admin_credentials.password ))
        app_domain: (( .cloud_controller.system_domain.value ))
        network: notifications
        encryption_key: ((( deploy-notifications-encryption-key )))
        footer_text: (( .properties.push_apps_manager_footer_text.value || "" ))
        footer_image: (( .properties.push_apps_manager_logo.value ))
        enable_diego: true
        uaa:
          client_id: (( .uaa.notifications_ui_client_credentials.identity ))
          client_secret: (( .uaa.notifications_ui_client_credentials.password ))
    name: deploy-notifications-ui
    release: notifications-ui
  - consumes: (( .properties.system_database.selected_option.parsed_manifest(mysql_db_link)
      ))
    manifest: |
      cf:
        domain: (( .cloud_controller.system_domain.value ))
        admin_username: (( .uaa.admin_credentials.identity ))
        admin_password: (( .uaa.admin_credentials.password ))
      generic_white_label_config_json:
        company_name: (( .properties.push_apps_manager_company_name.value || "Pivotal" ))
        logo: (( .properties.push_apps_manager_logo.value ))
        smallSquare: (( .properties.push_apps_manager_square_logo.value ))
        legalText: (( .properties.push_apps_manager_footer_text.value ))
        legalLinks: (( .properties.push_apps_manager_footer_links.value ))
      pivotal_account:
        db: (( .properties.system_database.selected_option.parsed_manifest(pivotal_account) ))
        buildpack: java_buildpack_offline
        route: account
        client_id: (( .uaa.pivotal_account_client_credentials.identity ))
        client_secret: (( .uaa.pivotal_account_client_credentials.password ))
        uaa_location: https://login.(( .cloud_controller.system_domain.value ))
        notifications_location: https://notifications.(( .cloud_controller.system_domain.value ))
        notifications_ui_location: https://notifications-ui.(( .cloud_controller.system_domain.value ))
        encryption_key: ((( push-pivotal-account-encryption-key )))
        app_push:
          instance_number: 1
          memory: 768
      ssl:
        skip_cert_verify: (( .ha_proxy.skip_cert_verify.value ))
    name: push-pivotal-account
    release: pivotal-account
  - consumes: |
      (( .properties.system_database.selected_option.parsed_manifest(mysql_db_link) ))
    manifest: |
      autoscale:
        api:
          java_buildpack: 'java_buildpack_offline'
        api_instance_count: (( .properties.autoscale_api_instance_count.value ))
        broker:
          password: ((( deploy-autoscaling-broker-credentials.password )))
          user: ((( deploy-autoscaling-broker-credentials.username )))
        cf:
          admin_password: (( .uaa.admin_credentials.password ))
          admin_user: (( .uaa.admin_credentials.identity ))
          dial_timeout: (( .properties.cf_dial_timeout_in_seconds.value ))
        database: (( .properties.system_database.selected_option.parsed_manifest(autoscaling) ))
        encryption_key: ((( deploy-autoscaling-encryption-key )))
        instance_count: (( .properties.autoscale_instance_count.value ))
        instance_memory: '256M'
        log_level: 'error'
        marketplace_company_name: Pivotal
        marketplace_documentation_url: https://docs.pivotal.io/pivotalcf/2-1/appsman-services/autoscaler/using-autoscaler.html
        marketplace_image_url: data:image/png;base64,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
        metric_bucket_count: (( .properties.autoscale_metric_bucket_count.value ))
        notifications_host: https://notifications.(( .cloud_controller.system_domain.value))
        organization: system
        scaling_interval_in_seconds: (( .properties.autoscale_scaling_interval_in_seconds.value ))
        space: autoscaling
      domain: (( .cloud_controller.system_domain.value ))
      doppler:
        host: wss://doppler.(( .cloud_controller.system_domain.value )):(( .properties.logger_endpoint_port.value || "443" ))
      ssl:
        skip_cert_verify: (( .ha_proxy.skip_cert_verify.value ))
      uaa:
        api_client_id: (( .uaa.autoscale_api_client_credentials.identity ))
        api_client_secret: (( .uaa.autoscale_api_client_credentials.password ))
        client: (( .uaa.autoscale_client_credentials.identity ))
        client_secret: (( .uaa.autoscale_client_credentials.password ))
    name: deploy-autoscaler
    release: cf-autoscaling
  - consumes: (( .properties.system_database.selected_option.parsed_manifest(mysql_db_link)
      ))
    manifest: |
      nfsbrokerpush:
        domain: (( .cloud_controller.system_domain.value ))
        db: (( .properties.system_database.selected_option.parsed_manifest(nfsvolume) ))
        cf:
          admin_user: (( .uaa.admin_credentials.identity ))
          admin_password: (( .uaa.admin_credentials.password ))
          dial_timeout: (( .properties.cf_dial_timeout_in_seconds.value ))
        organization: system
        skip_cert_verify: (( .ha_proxy.skip_cert_verify.value ))
        app_domain: (( .cloud_controller.system_domain.value ))
        space: nfs
        username: ((( nfs-broker-push-db-credentials.username )))
        password: ((( nfs-broker-push-db-credentials.password )))
        syslog_url: (( .properties.system_logging.selected_option.parsed_manifest(syslog_url) ))
        ldap_enabled: (( .properties.nfs_volume_driver.enable.ldap_server_host.value_present? ))
    name: nfsbrokerpush
    release: nfs-volume
  - manifest: |
      cf_mysql:
        mysql:
          galera_healthcheck:
            endpoint_username: ((( mysql-bootstrap-db-credentials.username )))
            endpoint_password: ((( mysql-bootstrap-db-credentials.password )))
    name: bootstrap
    release: cf-mysql
  - manifest: |
      cf_mysql:
        mysql:
          galera_healthcheck:
            endpoint_username: ((( mysql-bootstrap-db-credentials.username )))
            endpoint_password: ((( mysql-bootstrap-db-credentials.password )))
    name: rejoin-unsafe
    release: cf-mysql
  - manifest: |
      dnshttps:
        client:
          ca: (( $ops_manager.ca_certificate ))
        server:
          tls:
            certificate: (( .properties.service_discovery_server_tls.cert_pem ))
            private_key: (( .properties.service_discovery_server_tls.private_key_pem ))
    name: service-discovery-controller
    release: cf-app-sd
  - manifest: |
      autoscale:
        cf:
          admin_password: (( .uaa.admin_credentials.password ))
          admin_user: (( .uaa.admin_credentials.identity ))
          dial_timeout: (( .properties.cf_dial_timeout_in_seconds.value ))
        metric_bucket_count: (( .properties.autoscale_metric_bucket_count.value ))
        organization: system
        scaling_interval_in_seconds: (( .properties.autoscale_scaling_interval_in_seconds.value ))
      domain: (( .cloud_controller.system_domain.value ))
      ssl:
        skip_cert_verify: (( .ha_proxy.skip_cert_verify.value ))
    name: test-autoscaling
    release: cf-autoscaling
- description: Compute
  dynamic_ip: 1
  instance_definition:
    configurable: true
    constraints:
      max: 10
      min: 1
    default: 1
    label: Instances
    name: instances
    type: integer
  label: Compute
  max_in_flight: 4%
  name: compute
  resource_definitions:
  - configurable: true
    constraints:
      min: 2048
    default: 16384
    label: RAM
    name: ram
    type: integer
  - configurable: true
    constraints:
      min: 4096
    default: 65536
    label: Ephemeral Disk
    name: ephemeral_disk
    type: integer
  - configurable: false
    default: 0
    label: Persistent Disk
    name: persistent_disk
    type: integer
  - configurable: true
    constraints:
      min: 1
    default: 2
    label: CPU
    name: cpu
    type: integer
  resource_label: Compute
  single_az_only: false
  static_ip: 0
  templates:
  - consumes: |
      consul_common: {from: consul_common_link}
      consul_client: {from: consul_client_link}
      consul_server: nil
    manifest: |
      consul:
        agent:
          node_name_includes_id: true
    name: consul_agent
    release: consul
  - manifest: |
      containers:
        proxy:
          enabled: (( .properties.rep_proxy_enabled.value ))
          additional_memory_allocation_mb: 32
        trusted_ca_certificates:
          - ((( /cf/diego-instance-identity-root-ca.certificate )))
          - (( $ops_manager.ca_certificate ))
          - (( $ops_manager.trusted_certificates ))
      diego:
        rep:
          bbs:
            ca_cert: (( $ops_manager.ca_certificate ))
            client_cert: (( .properties.bbs_client_cert.cert_pem ))
            client_key: (( .properties.bbs_client_cert.private_key_pem ))
          ca_cert: (( $ops_manager.ca_certificate ))
          enable_legacy_api_endpoints: false
          locket:
            api_location: locket.service.cf.internal:8891
          preloaded_rootfses: '(( .properties.enable_grootfs.value ? .properties.rep_preloaded_rootfses_grootfs.value : .properties.rep_preloaded_rootfses_garden.value ))'
          require_tls: true
          server_cert: (( .properties.rep_server_cert.cert_pem ))
          server_key: (( .properties.rep_server_cert.private_key_pem ))
          use_azure_fault_domains: true
        executor:
          ca_certs_for_downloads: (( $ops_manager.ca_certificate ))
          disk_capacity_mb: (( .diego_cell.executor_disk_capacity.value ))
          instance_identity_ca_cert: ((( /cf/diego-instance-identity-intermediate-ca.certificate )))
          instance_identity_key: ((( /cf/diego-instance-identity-intermediate-ca.private_key )))
          memory_capacity_mb: (( .diego_cell.executor_memory_capacity.value ))
          post_setup_hook: sh -c "rm -f /home/vcap/app/.java-buildpack.log /home/vcap/app/**/.java-buildpack.log"
          post_setup_user: root
      enable_declarative_healthcheck: true
      loggregator:
        use_v2_api: true
        ca_cert: (( $ops_manager.ca_certificate ))
        cert: (( .properties.loggregator_client_cert.cert_pem ))
        key: (( .properties.loggregator_client_cert.private_key_pem ))
      tls:
        ca_cert: (( $ops_manager.ca_certificate ))
        cert: (( .properties.rep_server_cert.cert_pem ))
        key: (( .properties.rep_server_cert.private_key_pem ))
    name: rep
    release: diego
  - manifest: |
      diego:
        route_emitter:
          bbs:
            ca_cert: (( $ops_manager.ca_certificate ))
            client_cert: (( .properties.bbs_client_cert.cert_pem ))
            client_key: (( .properties.bbs_client_cert.private_key_pem ))
          local_mode: true
      internal_routes:
        enabled: (( .properties.enable_service_discovery_for_apps.value ))
      register_direct_instance_routes: (( .properties.container_networking_interface_plugin.selected_option.parsed_manifest(use_container_address) ))
      tcp:
        enabled: true
      uaa:
        ca_cert: (( $ops_manager.ca_certificate ))
        client_name: (( .uaa.tcp_emitter_credentials.identity ))
        client_secret: (( .uaa.tcp_emitter_credentials.password ))
    name: route_emitter
    release: diego
  - manifest: |
      diego:
        cfdot:
          bbs:
            ca_cert: (( $ops_manager.ca_certificate ))
            client_cert: (( .properties.bbs_client_cert.cert_pem ))
            client_key: (( .properties.bbs_client_cert.private_key_pem ))
    name: cfdot
    release: diego
  - manifest: |
      garden:
        cleanup_process_dirs_on_wait: true
        debug_listen_address: 127.0.0.1:17019
        deny_networks:
        - 0.0.0.0/0
        deprecated_use_garden_shed: '(( .properties.enable_grootfs.value ? false : true ))'
        destroy_containers_on_start: true
        graph_cleanup_threshold_in_mb: (( .properties.garden_disk_cleanup.selected_option.parsed_manifest(graph_cleanup_threshold_in_mb) ))
        http_proxy: (( $ops_manager.http_proxy ))
        https_proxy: (( $ops_manager.https_proxy ))
        insecure_docker_registry_list: (( .diego_cell.insecure_docker_registry_list.parsed_strings ))
        network_plugin: /var/vcap/packages/runc-cni/bin/garden-external-networker
        network_plugin_extra_args:
        - --configFile=/var/vcap/jobs/garden-cni/config/adapter.json
        no_proxy: (( $ops_manager.no_proxy ))
        persistent_image_list: '(( .properties.enable_grootfs.value ? .properties.rep_preloaded_rootfses_grootfs.value : .properties.rep_preloaded_rootfses_garden.value ))'
      grootfs:
        graph_cleanup_threshold_in_mb: (( .properties.garden_disk_cleanup.selected_option.parsed_manifest(graph_cleanup_threshold_in_mb) ))
        insecure_docker_registry_list: (( .diego_cell.insecure_docker_registry_list.parsed_strings ))
        reserved_space_for_other_jobs_in_mb: -1
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          cert: (( .properties.rep_server_cert.cert_pem ))
          key: (( .properties.rep_server_cert.private_key_pem ))
    name: garden
    release: garden-runc
  - manifest: |
      cflinuxfs2-rootfs:
        trusted_certs: |
          ((( /cf/diego-instance-identity-root-ca.certificate )))
          (( $ops_manager.ca_certificate ))
          (( $ops_manager.trusted_certificates ))
    name: cflinuxfs2-rootfs-setup
    release: cflinuxfs2
  - manifest: |
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          metron:
            cert: (( .doppler.metron_tls_cert.cert_pem ))
            key: (( .doppler.metron_tls_cert.private_key_pem ))
      metron_agent:
        deployment: cf
      syslog_daemon_config:
        enable: false
    name: metron_agent
    release: loggregator
  - manifest: |
      cf_networking:
        disable: (( .properties.container_networking_interface_plugin.selected_option.parsed_manifest(disable_silk) ))
        dns_servers: '(( $director.dns_release_present ? .properties.bosh_dns_servers.parsed_strings : .properties.container_networking_interface_plugin.silk.dns_servers.parsed_strings ))'
        mtu: (( .properties.container_networking_interface_plugin.silk.network_mtu.value ))
        iptables_logging: (( .properties.container_networking_interface_plugin.silk.enable_log_traffic.value ))
        iptables_accepted_udp_logs_per_sec: (( .properties.container_networking_interface_plugin.silk.iptables_accepted_udp_logs_per_sec.value ))
        iptables_denied_logs_per_sec: (( .properties.container_networking_interface_plugin.silk.iptables_denied_logs_per_sec.value ))
    name: silk-cni
    release: cf-networking
  - consumes: |
      cf_network: {from: cf_network, deployment: (( .deployment_name )) }
    manifest: |
      cf_networking:
        disable: (( .properties.container_networking_interface_plugin.selected_option.parsed_manifest(disable_silk) ))
        silk_daemon:
          ca_cert: (( $ops_manager.ca_certificate ))
          client_cert: (( .diego_database.silk_daemon_client_cert.cert_pem ))
          client_key: (( .diego_database.silk_daemon_client_cert.private_key_pem ))
        vtep_port: (( .properties.container_networking_interface_plugin.silk.vtep_port.value ))
    name: silk-daemon
    release: cf-networking
  - manifest: |
      cf_networking:
        cni_config_dir: (( .properties.container_networking_interface_plugin.selected_option.parsed_manifest(cni_config_dir) ))
        cni_plugin_dir: (( .properties.container_networking_interface_plugin.selected_option.parsed_manifest(cni_plugin_dir) ))
    name: garden-cni
    release: cf-networking
  - manifest: |
      cf_networking:
        disable: (( .properties.container_networking_interface_plugin.selected_option.parsed_manifest(disable_silk) ))
    name: netmon
    release: cf-networking
  - manifest: |
      cf_networking:
        disable: (( .properties.container_networking_interface_plugin.selected_option.parsed_manifest(disable_silk) ))
        iptables_logging: (( .properties.container_networking_interface_plugin.silk.enable_log_traffic.value ))
        iptables_accepted_udp_logs_per_sec: (( .properties.container_networking_interface_plugin.silk.iptables_accepted_udp_logs_per_sec.value ))
        policy_server:
          hostname: network-policy-server.service.cf.internal
        vxlan_policy_agent:
          client_cert: (( .properties.network_policy_agent_cert.cert_pem ))
          client_key: (( .properties.network_policy_agent_cert.private_key_pem ))
          ca_cert: (( $ops_manager.ca_certificate ))
    name: vxlan-policy-agent
    release: cf-networking
  - manifest: |
      nfsv3driver: (( .properties.nfs_volume_driver.selected_option.parsed_manifest(nfsv3driver_properties) ))
    name: nfsv3driver
    release: nfs-volume
  - manifest: |
      syslog: (( .properties.system_logging.selected_option.parsed_manifest(syslog) ))
    name: syslog_forwarder
    release: syslog-migration
  - manifest: |
      cf_app_sd_disable: "(( .properties.enable_service_discovery_for_apps.value ? false : true ))"
      dnshttps:
        client:
          tls:
            certificate: (( .properties.service_discovery_client_tls.cert_pem ))
            private_key: (( .properties.service_discovery_client_tls.private_key_pem ))
        server:
          ca: (( $ops_manager.ca_certificate ))
    name: bosh-dns-adapter
    release: cf-app-sd
  - name: iptables-logger
    release: cf-networking
- description: null
  dynamic_ip: 0
  instance_definition:
    configurable: false
    constraints:
      may_only_be_odd_or_zero: true
      min: 0
    default: 0
    label: Instances
    name: instances
    type: integer
  label: Consul
  max_in_flight: 1
  name: consul_server
  resource_definitions:
  - configurable: true
    constraints:
      min: 1024
    default: 1024
    label: RAM
    name: ram
    type: integer
  - configurable: true
    constraints:
      min: 1024
    default: 2048
    label: Ephemeral Disk
    name: ephemeral_disk
    type: integer
  - configurable: true
    constraints:
      min: 1024
    default: 1024
    label: Persistent Disk
    name: persistent_disk
    type: integer
  - configurable: true
    constraints:
      min: 1
    default: 1
    label: CPU
    name: cpu
    type: integer
  resource_label: Consul
  serial: true
  single_az_only: false
  static_ip: 1
  templates:
  - manifest: |
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          metron:
            cert: (( .doppler.metron_tls_cert.cert_pem ))
            key: (( .doppler.metron_tls_cert.private_key_pem ))
    name: metron_agent
    release: loggregator
- description: Acts as the Pivotal CF Application Service message bus
  dynamic_ip: 0
  instance_definition:
    configurable: false
    constraints:
      min: 0
    default: 0
    label: Instances
    name: instances
    type: integer
  label: NATS
  max_in_flight: 1
  name: nats
  resource_definitions:
  - configurable: true
    constraints:
      min: 1024
    default: 1024
    label: RAM
    name: ram
    type: integer
  - configurable: true
    constraints:
      min: 1024
    default: 2048
    label: Ephemeral Disk
    name: ephemeral_disk
    type: integer
  - configurable: false
    default: 0
    label: Persistent Disk
    name: persistent_disk
    type: integer
  - configurable: true
    constraints:
      min: 1
    default: 1
    label: CPU
    name: cpu
    type: integer
  resource_label: NATS
  single_az_only: false
  static_ip: 1
  templates:
  - manifest: |
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          metron:
            cert: (( .doppler.metron_tls_cert.cert_pem ))
            key: (( .doppler.metron_tls_cert.private_key_pem ))
    name: metron_agent
    release: loggregator
- description: Stores droplets and app packages on behalf of Cloud Controller
  dynamic_ip: 0
  instance_definition:
    configurable: false
    constraints:
      max: 0
      min: 0
    default: 0
    label: Instances
    name: instances
    type: integer
    zero_if:
      property_reference: .properties.system_blobstore
      property_values:
      - external
      - external_gcs
      - external_gcs_service_account
      - external_azure
  label: File Storage
  max_in_flight: 1
  name: nfs_server
  property_blueprints:
  - configurable: false
    default:
      domains:
      - blobstore.service.cf.internal
    name: blobstore_cert
    type: rsa_cert_credentials
  - configurable: true
    default: allow 10.0.0.0/8;,allow 172.16.0.0/12;,allow 192.168.0.0/16;
    name: blobstore_internal_access_rules
    type: string_list
  resource_definitions:
  - configurable: true
    constraints:
      min: 4096
    default: 4096
    label: RAM
    name: ram
    type: integer
  - configurable: true
    constraints:
      min: 8192
    default: 8192
    label: Ephemeral Disk
    name: ephemeral_disk
    type: integer
  - configurable: true
    constraints:
      min: 10240
    default: 102400
    label: Persistent Disk
    name: persistent_disk
    type: integer
  - configurable: true
    constraints:
      min: 1
    default: 1
    label: CPU
    name: cpu
    type: integer
  resource_label: File Storage
  serial: true
  single_az_only: true
  static_ip: 1
  templates:
  - manifest: |
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          metron:
            cert: (( .doppler.metron_tls_cert.cert_pem ))
            key: (( .doppler.metron_tls_cert.private_key_pem ))
    name: metron_agent
    release: loggregator
- description: MySQL Proxy
  dynamic_ip: 0
  instance_definition:
    configurable: false
    default: 0
    label: Instances
    name: instances
    type: integer
    zero_if:
      property_reference: .properties.system_database
      property_values:
      - external
  label: MySQL Proxy
  max_in_flight: 1
  name: mysql_proxy
  property_blueprints:
  - configurable: true
    name: static_ips
    optional: true
    type: ip_ranges
  - configurable: true
    name: service_hostname
    optional: true
    type: network_address
  - configurable: true
    default: 0
    name: startup_delay
    type: integer
  - configurable: true
    constraints:
      min: 0
    default: 30
    name: shutdown_delay
    type: integer
  resource_definitions:
  - configurable: true
    constraints:
      min: 1024
    default: 1024
    label: RAM
    name: ram
    type: integer
  - configurable: true
    constraints:
      min: 4096
    default: 4096
    label: Ephemeral Disk
    name: ephemeral_disk
    type: integer
  - configurable: false
    default: 0
    label: Persistent Disk
    name: persistent_disk
    type: integer
  - configurable: true
    constraints:
      min: 1
    default: 1
    label: CPU
    name: cpu
    type: integer
  resource_label: MySQL Proxy
  single_az_only: false
  static_ip: 1
  templates:
  - manifest: |
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          metron:
            cert: (( .doppler.metron_tls_cert.cert_pem ))
            key: (( .doppler.metron_tls_cert.private_key_pem ))
    name: metron_agent
    release: loggregator
- description: Multi-tenant MySQL server.
  dynamic_ip: 0
  instance_definition:
    configurable: false
    constraints:
      may_only_be_odd_or_zero: true
      min: 0
    default: 0
    label: Instances
    name: instances
    type: integer
    zero_if:
      property_reference: .properties.system_database
      property_values:
      - external
  label: MySQL Server
  max_in_flight: 1
  name: mysql
  property_blueprints:
  - configurable: true
    default: true
    name: cli_history
    type: boolean
  - configurable: true
    name: cluster_probe_timeout
    optional: true
    type: integer
  - configurable: true
    default: false
    name: prevent_node_auto_rejoin
    type: boolean
  - configurable: true
    default: false
    name: remote_admin_access
    type: boolean
  - default:
      domains:
      - streaming-mysql-backup-tool
    name: backup_server_certificate
    type: rsa_cert_credentials
  resource_definitions:
  - configurable: true
    constraints:
      min: 4096
    default: 8192
    label: RAM
    name: ram
    type: integer
  - configurable: true
    constraints:
      min: 10000
    default: 30000
    label: Ephemeral Disk
    name: ephemeral_disk
    type: integer
  - configurable: true
    constraints:
      min: 10000
    default: 100000
    label: Persistent Disk
    name: persistent_disk
    type: integer
  - configurable: true
    constraints:
      min: 1
    default: 2
    label: CPU
    name: cpu
    type: integer
  resource_label: MySQL Server
  single_az_only: false
  static_ip: 1
  templates:
  - manifest: |
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          metron:
            cert: (( .doppler.metron_tls_cert.cert_pem ))
            key: (( .doppler.metron_tls_cert.private_key_pem ))
    name: metron_agent
    release: loggregator
- description: Streams backups from MySQL Cluster
  dynamic_ip: 0
  instance_definition:
    configurable: true
    constraints:
      max: 1
      min: 0
    default: 1
    label: Instances
    name: instances
    type: integer
  label: Backup Prepare Node
  max_in_flight: 1
  name: backup-prepare
  resource_definitions:
  - configurable: true
    constraints:
      min: 1024
    default: 1024
    label: RAM
    name: ram
    type: integer
  - configurable: true
    constraints:
      min: 2000
    default: 4000
    label: Ephemeral Disk
    name: ephemeral_disk
    type: integer
  - configurable: false
    constraints:
      min: 10000
    default: 200000
    label: Persistent Disk
    name: persistent_disk
    type: integer
  - configurable: true
    constraints:
      min: 1
    default: 1
    label: CPU
    name: cpu
    type: integer
  resource_label: Backup Prepare Node
  single_az_only: true
  static_ip: 1
  templates:
  - consumes: |
      (( .properties.system_database.selected_option.parsed_manifest(mysql_db_link) ))
    manifest: |
      domain: (( .cloud_controller.system_domain.value ))
      notifications:
        app_domain: (( .cloud_controller.system_domain.value ))
        cf:
          admin_password: (( .uaa.admin_credentials.password ))
          admin_user: (( .uaa.admin_credentials.identity ))
        database: (( .properties.system_database.selected_option.parsed_manifest(notifications) ))
        organization: system
        space: notifications-with-ui
      release_level_backup: true
      ssl:
        skip_cert_verify: (( .ha_proxy.skip_cert_verify.value ))
    name: backup-restore-notifications
    release: notifications
  - consumes: |
      (( .properties.system_database.selected_option.parsed_manifest(mysql_db_link) ))
    manifest: |
      autoscale:
        cf:
          admin_password: (( .uaa.admin_credentials.password ))
          admin_user: (( .uaa.admin_credentials.identity ))
          dial_timeout: (( .properties.cf_dial_timeout_in_seconds.value ))
        database: (( .properties.system_database.selected_option.parsed_manifest(autoscaling) ))
        organization: system
        space: autoscaling
      domain: (( .cloud_controller.system_domain.value ))
      release_level_backup: true
      ssl:
        skip_cert_verify: (( .ha_proxy.skip_cert_verify.value ))
    name: backup-restore-pcf-autoscaling
    release: cf-autoscaling
  - manifest: |
      release_level_backup: true
    name: bbr-cfnetworkingdb
    release: cf-networking
  - manifest: |
      release_level_backup: true
    name: bbr-cloudcontrollerdb
    release: capi
  - name: bbr-routingdb
    release: routing
  - name: bbr-uaadb
    release: uaa
  - consumes: |
      (( .properties.system_database.selected_option.parsed_manifest(push_app_usage_service_db_link) ))
    manifest: |
      cf:
        admin_password: (( .uaa.push_apps_manager_credentials.password ))
        admin_username: (( .uaa.push_apps_manager_credentials.identity ))
        api_url: "https://api.(( .cloud_controller.system_domain.value ))"
      database: (( .properties.system_database.selected_option.parsed_manifest(bbr-usage-servicedb) ))
      release_level_backup: true
    name: bbr-usage-servicedb
    release: push-usage-service-release
  - consumes: |
      consul_common: {from: consul_common_link}
      consul_client: {from: consul_client_link}
      consul_server: nil
    name: consul_agent
    release: consul
  - name: database-backup-restorer
    release: backup-and-restore-sdk
  - manifest: |
      autoscale:
        cf:
          admin_password: (( .uaa.admin_credentials.password ))
          admin_user: (( .uaa.admin_credentials.identity ))
          dial_timeout: (( .properties.cf_dial_timeout_in_seconds.value ))
        organization: system
        space: autoscaling
      domain: (( .cloud_controller.system_domain.value ))
      release_level_backup: true
      ssl:
        skip_cert_verify: (( .ha_proxy.skip_cert_verify.value ))
    name: lock-unlock-pcf-autoscaling
    release: cf-autoscaling
  - manifest: |
      release_level_backup: true
    name: mysql-backup
    release: cf-backup-and-restore
  - manifest: |
      nfsbroker: (( .properties.system_database.selected_option.parsed_manifest(nfsvolume_bbr) ))
    name: nfsbroker-bbr
    release: nfs-volume
  - manifest: |
      enabled: (( .properties.system_blobstore.external.versioning.value ))
      buckets:
        droplets:
          name: (( .properties.system_blobstore.external.droplets_bucket.value ))
          region: (( .properties.system_blobstore.external.region.value ))
          aws_access_key_id: (( .properties.system_blobstore.external.access_key.value ))
          aws_secret_access_key: (( .properties.system_blobstore.external.secret_key.value ))
          endpoint: (( .properties.system_blobstore.external.endpoint.value ))
        packages:
          name: (( .properties.system_blobstore.external.packages_bucket.value ))
          region: (( .properties.system_blobstore.external.region.value ))
          aws_access_key_id: (( .properties.system_blobstore.external.access_key.value ))
          aws_secret_access_key: (( .properties.system_blobstore.external.secret_key.value ))
          endpoint: (( .properties.system_blobstore.external.endpoint.value ))
        buildpacks:
          name: (( .properties.system_blobstore.external.buildpacks_bucket.value ))
          region: (( .properties.system_blobstore.external.region.value ))
          aws_access_key_id: (( .properties.system_blobstore.external.access_key.value ))
          aws_secret_access_key: (( .properties.system_blobstore.external.secret_key.value ))
          endpoint: (( .properties.system_blobstore.external.endpoint.value ))
        resources:
          name: (( .properties.system_blobstore.external.resources_bucket.value ))
          region: (( .properties.system_blobstore.external.region.value ))
          aws_access_key_id: (( .properties.system_blobstore.external.access_key.value ))
          aws_secret_access_key: (( .properties.system_blobstore.external.secret_key.value ))
          endpoint: (( .properties.system_blobstore.external.endpoint.value ))
    name: s3-versioned-blobstore-backup-restorer
    release: backup-and-restore-sdk
  - manifest: |
      syslog: (( .properties.system_logging.selected_option.parsed_manifest(syslog) ))
    name: syslog_forwarder
    release: syslog-migration
- description: An datastore node for Diego
  dynamic_ip: 1
  instance_definition:
    configurable: false
    constraints:
      min: 0
    default: 0
    label: Instances
    name: instances
    type: integer
  label: Diego BBS
  max_in_flight: 1
  name: diego_database
  property_blueprints:
  - configurable: false
    default:
      domains:
      - locket.service.cf.internal
    name: locket_server_cert
    type: rsa_cert_credentials
  - configurable: false
    default:
      domains:
      - silk-controller.service.cf.internal
    name: silk_controller_server_cert
    type: rsa_cert_credentials
  - configurable: false
    name: silk_daemon_client_cert
    type: rsa_cert_credentials
  resource_definitions:
  - configurable: true
    constraints:
      min: 1024
    default: 1024
    label: RAM
    name: ram
    type: integer
  - configurable: true
    constraints:
      min: 1024
    default: 2048
    label: Ephemeral Disk
    name: ephemeral_disk
    type: integer
  - configurable: false
    default: 0
    label: Persistent Disk
    name: persistent_disk
    type: integer
  - configurable: true
    constraints:
      min: 1
    default: 1
    label: CPU
    name: cpu
    type: integer
  resource_label: Diego BBS
  serial: true
  single_az_only: false
  static_ip: 0
  templates:
  - manifest: |
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          metron:
            cert: (( .doppler.metron_tls_cert.cert_pem ))
            key: (( .doppler.metron_tls_cert.private_key_pem ))
    name: metron_agent
    release: loggregator
- description: Pivotal CF Application Service's Authentication and Authorization server
  dynamic_ip: 1
  instance_definition:
    configurable: false
    constraints:
      min: 0
    default: 0
    label: Instances
    name: instances
    type: integer
  label: UAA
  max_in_flight: 1
  name: uaa
  property_blueprints:
  - default:
      identity: admin
    name: admin_credentials
    type: simple_credentials
  - default:
      identity: push_apps_manager
    name: push_apps_manager_credentials
    type: simple_credentials
  - default:
      identity: smoke_tests
    name: run_smoke_tests_credentials
    type: simple_credentials
  - default:
      identity: system_services
    name: system_services_credentials
    type: simple_credentials
  - default:
      identity: system_verification
    name: system_verification_credentials
    type: simple_credentials
  - default:
      identity: system_passwords
    name: system_passwords_client_credentials
    type: simple_credentials
  - default:
      identity: login
    name: login_client_credentials
    type: simple_credentials
  - default:
      identity: identity
    label: Identity client credentials
    name: identity_client_credentials
    type: simple_credentials
  - default:
      identity: gorouter
    name: gorouter_client_credentials
    type: simple_credentials
  - default:
      identity: doppler
    name: doppler_client_credentials
    type: simple_credentials
  - default:
      identity: noisy_neighbor_nozzle
    name: noisy_neighbor_client_credentials
    type: simple_credentials
  - default:
      identity: opentsdb-firehose-nozzle
    name: opentsdb_nozzle_credentials
    type: simple_credentials
  - default:
      identity: portal
    name: apps_manager_client_credentials
    type: simple_credentials
  - default:
      identity: usage_service
    name: usage_service_client_credentials
    type: simple_credentials
  - default:
      identity: invitations
    name: invitations_client_credentials
    type: simple_credentials
  - default:
      identity: autoscaling_service
    name: autoscale_client_credentials
    type: simple_credentials
  - default:
      identity: autoscaling_api
    name: autoscale_api_client_credentials
    type: simple_credentials
  - default:
      identity: cc-service-dashboards
    name: cc_service_dashboards_credentials
    type: simple_credentials
  - default:
      identity: cc_service_key_client
    name: cc_service_key_credentials
    type: simple_credentials
  - default:
      identity: services_credhub_client
    name: services_credhub_credentials
    type: simple_credentials
  - default:
      identity: cloud_controller
    name: cc_client_credentials
    type: simple_credentials
  - default:
      identity: admin
    name: admin_client_credentials
    type: simple_credentials
  - name: jwt_signing_key_credentials
    type: rsa_pkey_credentials
  - default:
      identity: notifications
    name: notifications_client_credentials
    type: simple_credentials
  - default:
      identity: notifications_template
    name: notifications_template_client_credentials
    type: simple_credentials
  - default:
      identity: ssh_proxy
    name: ssh_proxy_client_credentials
    type: simple_credentials
  - default:
      identity: notifications_ui_client
    name: notifications_ui_client_credentials
    type: simple_credentials
  - default:
      identity: cloud_controller_username_lookup
    name: cloud_controller_username_lookup_credentials
    type: simple_credentials
  - default:
      identity: cc_routing
    name: cc_routing_credentials
    type: simple_credentials
  - default:
      identity: apps_metrics
    name: apps_metrics_credentials
    type: simple_credentials
  - default:
      identity: apps_metrics_processing
    name: apps_metrics_processing_credentials
    type: simple_credentials
  - default:
      identity: healthwatch_ui
    name: healthwatch_ui_credentials
    type: simple_credentials
  - default:
      identity: healthwatch_alerts
    name: healthwatch_alerts_credentials
    type: simple_credentials
  - default:
      identity: healthwatch_firehose
    name: healthwatch_firehose_credentials
    type: simple_credentials
  - default:
      identity: tcp_router
    name: tcp_router_credentials
    type: simple_credentials
  - default:
      identity: tcp_emitter
    name: tcp_emitter_credentials
    type: simple_credentials
  - default:
      identity: loggregator
    name: loggregator_credentials
    type: simple_credentials
  - configurable: true
    name: service_provider_key_credentials
    type: rsa_cert_credentials
  - configurable: true
    name: service_provider_key_password
    optional: true
    type: secret
  - configurable: true
    default: 1209600
    name: apps_manager_access_token_lifetime
    type: integer
  - configurable: true
    default: 1209600
    name: apps_manager_refresh_token_lifetime
    type: integer
  - configurable: true
    default: 7200
    name: cf_cli_access_token_lifetime
    type: integer
  - configurable: true
    default: 1209600
    name: cf_cli_refresh_token_lifetime
    type: integer
  - default:
      domains:
      - uaa.service.cf.internal
    name: ssl_credentials
    type: rsa_cert_credentials
  - default:
      identity: pivotal_account
    name: pivotal_account_client_credentials
    type: simple_credentials
  - default:
      identity: concourse_atc
    name: concourse_atc_client_credentials
    type: simple_credentials
  - default:
      identity: logsearch-firehose
    name: logsearch_firehose_credentials
    type: simple_credentials
  - default:
      identity: splunk-firehose
    name: splunk_firehose_credentials
    type: simple_credentials
  - default:
      identity: stackdriver-nozzle
    name: stackdriver_nozzle_credentials
    type: simple_credentials
  - default:
      identity: solace_router
    name: solace_router_client_credentials
    type: simple_credentials
  - default:
      identity: greenplum_broker
    name: greenplum_broker_client_credentials
    type: simple_credentials
  - default:
      identity: greenplum_router_admin
    name: greenplum_router_admin_client_credentials
    type: simple_credentials
  - default:
      identity: greenplum_router
    name: greenplum_router_client_credentials
    type: simple_credentials
  - default:
      identity: cloudcache_broker
    name: cloudcache_broker_client_credentials
    type: simple_credentials
  - default:
      identity: dedicated-mysql-notifications
    name: dedicated_mysql_notifications_client_credentials
    type: simple_credentials
  - configurable: true
    default: Email
    name: customize_username_label
    type: string
  - configurable: true
    default: Password
    name: customize_password_label
    type: string
  - default:
      identity: push-notifications-dashboard
    name: push_notifications_dashboard_client
    type: simple_credentials
  - default:
      identity: push-api-client
    name: push_api_client
    type: simple_credentials
  - default:
      identity: network-policy-server
    name: network_policy_server_client
    type: simple_credentials
  - default:
      identity: container-networking-interface
    name: container_networking_interface_client_credentials
    type: simple_credentials
  - configurable: true
    default: 10\.\d{1,3}\.\d{1,3}\.\d{1,3}|192\.168\.\d{1,3}\.\d{1,3}|169\.254\.\d{1,3}\.\d{1,3}|127\.\d{1,3}\.\d{1,3}\.\d{1,3}|172\.1[6-9]{1}\.\d{1,3}\.\d{1,3}|172\.2[0-9]{1}\.\d{1,3}\.\d{1,3}|172\.3[0-1]{1}\.\d{1,3}\.\d{1,3}
    name: proxy_ips_regex
    type: string
  - configurable: true
    name: issuer_uri
    optional: true
    type: string
  resource_definitions:
  - configurable: true
    constraints:
      min: 1024
    default: 4096
    label: RAM
    name: ram
    type: integer
  - configurable: true
    constraints:
      min: 2048
    default: 32768
    label: Ephemeral Disk
    name: ephemeral_disk
    type: integer
  - configurable: false
    default: 0
    label: Persistent Disk
    name: persistent_disk
    type: integer
  - configurable: true
    constraints:
      min: 1
    default: 2
    label: CPU
    name: cpu
    type: integer
  resource_label: UAA
  serial: true
  single_az_only: false
  static_ip: 0
  templates:
  - manifest: |
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          metron:
            cert: (( .doppler.metron_tls_cert.cert_pem ))
            key: (( .doppler.metron_tls_cert.private_key_pem ))
    name: metron_agent
    release: loggregator
- description: Coordinates Pivotal CF Application Service application lifecycles
  dynamic_ip: 1
  instance_definition:
    configurable: false
    constraints:
      min: 0
    default: 0
    label: Instances
    name: instances
    type: integer
  label: Cloud Controller
  max_in_flight: 1
  name: cloud_controller
  property_blueprints:
  - default:
      identity: db_encryption
    name: db_encryption_credentials
    type: simple_credentials
  - configurable: true
    name: encrypt_key
    optional: true
    type: secret
  - configurable: true
    constraints:
      max: 2048
      min: 1024
    default: 1024
    name: max_file_size
    optional: false
    type: integer
  - configurable: true
    constraints:
      max: 2048
      min: 64
    default: 1024
    name: default_app_memory
    optional: false
    type: integer
  - configurable: true
    constraints:
      max: 20480
      min: 512
    default: 2048
    name: max_disk_quota_app
    optional: false
    type: integer
  - configurable: true
    constraints:
      max: 20480
      min: 512
    default: 1024
    name: default_disk_quota_app
    optional: false
    type: integer
  - configurable: true
    default: true
    name: enable_custom_buildpacks
    optional: false
    type: boolean
  - configurable: true
    name: system_domain
    type: wildcard_domain
  - configurable: true
    name: apps_domain
    type: wildcard_domain
  - configurable: true
    constraints:
      max: 102400
      min: 10240
    default: 10240
    name: default_quota_memory_limit_mb
    type: integer
  - configurable: true
    constraints:
      max: 1000
      min: 0
    default: 100
    name: default_quota_max_number_services
    type: integer
  - configurable: true
    default: 900
    name: staging_timeout_in_seconds
    type: integer
  - configurable: true
    default: true
    name: allow_app_ssh_access
    type: boolean
  - configurable: true
    default: true
    name: default_app_ssh_access
    type: boolean
  - configurable: true
    default: true
    name: security_event_logging_enabled
    type: boolean
  - configurable: false
    name: locket_client_cert
    type: rsa_cert_credentials
  resource_definitions:
  - configurable: true
    constraints:
      min: 4096
    default: 4096
    label: RAM
    name: ram
    type: integer
  - configurable: true
    constraints:
      min: 20480
    default: 20480
    label: Ephemeral Disk
    name: ephemeral_disk
    type: integer
  - configurable: false
    default: 0
    label: Persistent Disk
    name: persistent_disk
    type: integer
  - configurable: true
    constraints:
      min: 1
    default: 1
    label: CPU
    name: cpu
    type: integer
  resource_label: Cloud Controller
  serial: true
  single_az_only: false
  static_ip: 0
  templates:
  - manifest: |
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          metron:
            cert: (( .doppler.metron_tls_cert.cert_pem ))
            key: (( .doppler.metron_tls_cert.private_key_pem ))
    name: metron_agent
    release: loggregator
- description: HAProxy is the default load balancer for SSL termination. Alternatively,
    you can use your own load balancer and forward traffic to the Pivotal CF Application
    Service router IP. Self signed certificates will function properly.
  dynamic_ip: 0
  instance_definition:
    configurable: true
    constraints:
      min: 0
    default: 0
    label: Instances
    name: instances
    type: integer
  label: HAProxy
  max_in_flight: 1
  name: ha_proxy
  property_blueprints:
  - configurable: true
    name: static_ips
    optional: true
    type: ip_ranges
  - configurable: true
    name: skip_cert_verify
    type: boolean
  - configurable: true
    name: internal_only_domains
    optional: true
    type: string_list
  - configurable: true
    name: trusted_domain_cidrs
    optional: true
    type: string
  resource_definitions:
  - configurable: true
    constraints:
      min: 1024
    default: 1024
    label: RAM
    name: ram
    type: integer
  - configurable: true
    constraints:
      min: 2048
    default: 2048
    label: Ephemeral Disk
    name: ephemeral_disk
    type: integer
  - configurable: false
    default: 0
    label: Persistent Disk
    name: persistent_disk
    type: integer
  - configurable: true
    constraints:
      min: 1
    default: 1
    label: CPU
    name: cpu
    type: integer
  resource_label: HAProxy
  single_az_only: false
  static_ip: 1
  templates:
  - consumes: |
      consul_common: {from: consul_common_link}
      consul_client: {from: consul_client_link}
      consul_server: nil
    name: consul_agent
    release: consul
  - manifest: |
      ha_proxy:
        backend_ca_file: (( .properties.haproxy_forward_tls.enable.backend_ca.value ))
        backend_crt: |
          (( .properties.haproxy_client_certificate.cert_pem ))
          (( .properties.haproxy_client_certificate.private_key_pem ))
        backend_port: (( .properties.haproxy_forward_tls.selected_option.parsed_manifest(backend_port) ))
        backend_ssl: (( .properties.haproxy_forward_tls.selected_option.parsed_manifest(backend_ssl) ))
        buffer_size_bytes: (( .properties.haproxy_max_buffer_size.value ))
        client_ca_file: |
          (( .properties.routing_custom_ca_certificates.value ))
          (( $ops_manager.ca_certificate ))
          ((( /cf/diego-instance-identity-root-ca.certificate )))
        client_cert: (( .properties.routing_tls_termination.selected_option.parsed_manifest(haproxy_client_cert) ))
        client_timeout: (( .router.request_timeout_in_seconds.value ))
        disable_http: (( .properties.routing_disable_http.value ))
        disable_tls_10: (( .properties.routing_minimum_tls_version.selected_option.parsed_manifest(disable_tls_10) ))
        disable_tls_11: (( .properties.routing_minimum_tls_version.selected_option.parsed_manifest(disable_tls_11) ))
        enable_health_check_http: true
        hsts_enable: (( .properties.haproxy_hsts_support.selected_option.parsed_manifest(hsts_enable) ))
        hsts_include_subdomains: (( .properties.haproxy_hsts_support.selected_option.parsed_manifest(hsts_include_subdomains) ))
        hsts_max_age: (( .properties.haproxy_hsts_support.selected_option.parsed_manifest(hsts_max_age) ))
        hsts_preload: (( .properties.haproxy_hsts_support.selected_option.parsed_manifest(hsts_preload) ))
        internal_only_domains: (( .ha_proxy.internal_only_domains.parsed_strings ))
        keepalive_timeout: (( .router.frontend_idle_timeout.value ))
        server_timeout: (( .router.request_timeout_in_seconds.value ))
        ssl_ciphers: (( .properties.haproxy_ssl_ciphers.value ))
        ssl_pem: (( .properties.networking_poe_ssl_certs.parsed_manifest(routing_certificates_and_private_keys) ))
        tcp_link_port: 2222
        trusted_domain_cidrs: (( .ha_proxy.trusted_domain_cidrs.value ))
    name: haproxy
    release: haproxy
  - manifest: |
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          metron:
            cert: (( .doppler.metron_tls_cert.cert_pem ))
            key: (( .doppler.metron_tls_cert.private_key_pem ))
      metron_agent:
        deployment: cf
      syslog_daemon_config:
        enable: false
    name: metron_agent
    release: loggregator
  - manifest: |
      syslog: (( .properties.system_logging.selected_option.parsed_manifest(syslog) ))
    name: syslog_forwarder
    release: syslog-migration
- description: Routers route Internet traffic to applications and between Pivotal
    CF Application Service components.
  dynamic_ip: 0
  instance_definition:
    configurable: true
    constraints:
      min: 1
    default: 1
    label: Instances
    name: instances
    type: integer
  label: Router
  max_in_flight: 1
  name: router
  property_blueprints:
  - configurable: true
    name: static_ips
    optional: true
    type: ip_ranges
  - configurable: true
    default: false
    name: disable_insecure_cookies
    type: boolean
  - configurable: true
    constraints:
      min: 1
    default: 900
    name: request_timeout_in_seconds
    type: integer
  - configurable: true
    constraints:
      min: 1
    default: 900
    name: frontend_idle_timeout
    type: integer
  - configurable: true
    default: 20
    name: drain_wait
    type: integer
  - configurable: true
    default: 20
    name: lb_healthy_threshold
    type: integer
  - configurable: true
    default: true
    name: enable_zipkin
    type: boolean
  - configurable: true
    default: true
    name: enable_write_access_logs
    type: boolean
  - configurable: true
    name: extra_headers_to_log
    optional: true
    type: string_list
  - configurable: true
    default: false
    name: enable_isolated_routing
    type: boolean
  resource_definitions:
  - configurable: true
    constraints:
      min: 1024
    default: 1024
    label: RAM
    name: ram
    type: integer
  - configurable: true
    constraints:
      min: 2048
    default: 2048
    label: Ephemeral Disk
    name: ephemeral_disk
    type: integer
  - configurable: false
    default: 0
    label: Persistent Disk
    name: persistent_disk
    type: integer
  - configurable: true
    constraints:
      min: 1
    default: 1
    label: CPU
    name: cpu
    type: integer
  resource_label: Router
  serial: true
  single_az_only: false
  static_ip: 1
  templates:
  - consumes: |
      consul_common: {from: consul_common_link}
      consul_client: {from: consul_client_link}
      consul_server: nil
    name: consul_agent
    release: consul
  - manifest: |
      uaa:
        clients:
          gorouter:
            secret: (( .uaa.gorouter_client_credentials.password ))
        ca_cert: (( $ops_manager.ca_certificate ))
        ssl:
          port: 8443
      request_timeout_in_seconds: (( .router.request_timeout_in_seconds.value ))
      router:
        ca_certs: |
          (( .properties.routing_custom_ca_certificates.value ))
          (( $ops_manager.ca_certificate ))
          ((( /cf/diego-instance-identity-root-ca.certificate )))
        forwarded_client_cert: (( .properties.routing_tls_termination.selected_option.parsed_manifest(gorouter_forwarded_client_cert) ))
        disable_log_forwarded_for: (( .properties.routing_log_client_ips.selected_option.parsed_manifest(disable_log_forwarded_for) ))
        disable_log_source_ips: (( .properties.routing_log_client_ips.selected_option.parsed_manifest(disable_log_source_ips) ))
        max_idle_connections: (( .properties.router_keepalive_connections.selected_option.parsed_manifest(max_idle_connections) ))
        client_cert_validation: (( .properties.router_client_cert_validation.selected_option.parsed_manifest(client_cert_validation) ))
        enable_proxy: (( .properties.router_enable_proxy.value ))
        route_services_secret: (( .properties.route_services.selected_option.parsed_manifest(secret) ))
        ssl_skip_validation: (( .ha_proxy.skip_cert_verify.value ))
        drain_wait: (( .router.drain_wait.value ))
        tracing:
          enable_zipkin: (( .router.enable_zipkin.value ))
        write_access_logs_locally: (( .router.enable_write_access_logs.value ))
        secure_cookies: (( .router.disable_insecure_cookies.value ))
        load_balancer_healthy_threshold: (( .router.lb_healthy_threshold.value ))
        extra_headers_to_log: (( .router.extra_headers_to_log.parsed_strings ))
        routing_table_sharding_mode: '(( .router.enable_isolated_routing.value ? "shared-and-segments" : "all" ))'
        status:
          user: ((( router-status-credentials.username )))
          password: ((( router-status-credentials.password )))
        cipher_suites: (( .properties.gorouter_ssl_ciphers.value ))
        disable_http: (( .properties.routing_disable_http.value ))
        enable_ssl: true
        tls_pem: (( .properties.networking_poe_ssl_certs.parsed_manifest(routing_certificates_and_private_keys) ))
        min_tls_version: (( .properties.routing_minimum_tls_version.selected_option.parsed_manifest(min_tls_version) ))
        backends:
          max_conns: (( .properties.router_backend_max_conn.value ))
          enable_tls: true
        frontend_idle_timeout: (( .router.frontend_idle_timeout.value ))
      routing_api:
        enabled: true
    name: gorouter
    release: routing
  - manifest: |
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          metron:
            cert: (( .doppler.metron_tls_cert.cert_pem ))
            key: (( .doppler.metron_tls_cert.private_key_pem ))
      metron_agent:
        deployment: cf
      syslog_daemon_config:
        enable: false
    name: metron_agent
    release: loggregator
  - manifest: |
      syslog: (( .properties.system_logging.selected_option.parsed_manifest(syslog) ))
    name: syslog_forwarder
    release: syslog-migration
- description: Provides routing information for internal app routes
  dynamic_ip: 1
  instance_definition:
    configurable: false
    constraints:
      min: 0
    default: 0
    label: Instances
    name: instances
    type: integer
    zero_if:
      property_reference: .properties.enable_service_discovery_for_apps
      property_values:
      - false
  label: Service Discovery Controller
  max_in_flight: 1
  name: service-discovery-controller
  resource_definitions:
  - configurable: true
    constraints:
      min: 1024
    default: 1024
    label: RAM
    name: ram
    type: integer
  - configurable: true
    constraints:
      min: 1024
    default: 2048
    label: Ephemeral Disk
    name: ephemeral_disk
    type: integer
  - configurable: false
    default: 0
    label: Persistent Disk
    name: persistent_disk
    type: integer
  - configurable: true
    constraints:
      min: 1
    default: 1
    label: CPU
    name: cpu
    type: integer
  resource_label: Service Discovery Controller
  single_az_only: false
  static_ip: 0
  templates:
  - manifest: |
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          metron:
            cert: (( .doppler.metron_tls_cert.cert_pem ))
            key: (( .doppler.metron_tls_cert.private_key_pem ))
    name: metron_agent
    release: loggregator
- description: Monitors the MySQL Cluster
  dynamic_ip: 0
  instance_definition:
    configurable: true
    constraints:
      max: 1
    default: 1
    label: Instances
    name: instances
    type: integer
  label: MySQL Monitor
  max_in_flight: 1
  name: mysql_monitor
  property_blueprints:
  - configurable: true
    default: 30
    name: poll_frequency
    type: integer
  - configurable: true
    default: 20
    name: write_read_delay
    type: integer
  - configurable: true
    name: recipient_email
    type: string
  resource_definitions:
  - configurable: true
    constraints:
      min: 256
    default: 1024
    label: RAM
    name: ram
    type: integer
  - configurable: true
    constraints:
      min: 1024
    default: 1024
    label: Ephemeral Disk
    name: ephemeral_disk
    type: integer
  - configurable: false
    default: 0
    label: Persistent Disk
    name: persistent_disk
    type: integer
  - configurable: true
    constraints:
      min: 1
    default: 1
    label: CPU
    name: cpu
    type: integer
  resource_label: MySQL Monitor
  single_az_only: true
  static_ip: 1
  templates:
  - name: mysql-diag
    release: mysql-monitoring
  - manifest: |
      cf_mysql:
        external_host: p-mysql-ert.(( .cloud_controller.system_domain.value ))
      cf:
        skip_ssl_validation: (( .ha_proxy.skip_cert_verify.value ))
      domain: (( .cloud_controller.system_domain.value ))
      mysql-monitoring:
        cluster_identifier: cf
        recipient_email: (( recipient_email.value ))
        replication-canary:
          canary_database: monitor
          canary_username: ((( mysql-monitor-db-credentials.username )))
          canary_password: ((( mysql-monitor-db-credentials.password )))
          mysql_port: 33306
          notifications_client_username: (( .uaa.notifications_client_credentials.identity ))
          notifications_client_secret: (( .uaa.notifications_client_credentials.password ))
          poll_frequency: (( poll_frequency.value ))
          switchboard_count: (( .mysql_proxy.instances ))
          switchboard_username: ((( mysql-proxy-dashboard-credentials.username )))
          switchboard_password: ((( mysql-proxy-dashboard-credentials.password )))
          uaa_admin_client_username: (( .uaa.admin_client_credentials.identity ))
          uaa_admin_client_secret: (( .uaa.admin_client_credentials.password ))
          write_read_delay: (( write_read_delay.value ))
    name: replication-canary
    release: mysql-monitoring
  - manifest: |
      syslog: (( .properties.system_logging.selected_option.parsed_manifest(syslog) ))
    name: syslog_forwarder
    release: syslog-migration
- description: Schedules asynchronous tasks for cloud controller
  dynamic_ip: 1
  instance_definition:
    configurable: false
    constraints:
      min: 0
    default: 0
    label: Instances
    name: instances
    type: integer
  label: Clock Global
  max_in_flight: 1
  name: clock_global
  resource_definitions:
  - configurable: true
    constraints:
      min: 1024
    default: 1024
    label: RAM
    name: ram
    type: integer
  - configurable: true
    constraints:
      min: 20480
    default: 20480
    label: Ephemeral Disk
    name: ephemeral_disk
    type: integer
  - configurable: false
    default: 0
    label: Persistent Disk
    name: persistent_disk
    type: integer
  - configurable: true
    constraints:
      min: 1
    default: 1
    label: CPU
    name: cpu
    type: integer
  resource_label: Clock Global
  single_az_only: false
  static_ip: 0
  templates:
  - manifest: |
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          metron:
            cert: (( .doppler.metron_tls_cert.cert_pem ))
            key: (( .doppler.metron_tls_cert.private_key_pem ))
    name: metron_agent
    release: loggregator
- description: Worker for cloud controller asynchronous tasks
  dynamic_ip: 1
  instance_definition:
    configurable: false
    constraints:
      min: 0
    default: 0
    label: Instances
    name: instances
    type: integer
  label: Cloud Controller Worker
  max_in_flight: 1
  name: cloud_controller_worker
  resource_definitions:
  - configurable: true
    constraints:
      min: 1024
    default: 1024
    label: RAM
    name: ram
    type: integer
  - configurable: true
    constraints:
      min: 2048
    default: 2048
    label: Ephemeral Disk
    name: ephemeral_disk
    type: integer
  - configurable: false
    default: 0
    label: Persistent Disk
    name: persistent_disk
    type: integer
  - configurable: true
    constraints:
      min: 1
    default: 1
    label: CPU
    name: cpu
    type: integer
  resource_label: Cloud Controller Worker
  single_az_only: false
  static_ip: 0
  templates:
  - manifest: |
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          metron:
            cert: (( .doppler.metron_tls_cert.cert_pem ))
            key: (( .doppler.metron_tls_cert.private_key_pem ))
    name: metron_agent
    release: loggregator
- description: Diego Brain
  dynamic_ip: 0
  instance_definition:
    configurable: false
    constraints:
      min: 0
    default: 0
    label: Instances
    name: instances
    type: integer
  label: Diego Brain
  max_in_flight: 1
  name: diego_brain
  property_blueprints:
  - configurable: false
    name: ssh_host_key
    type: rsa_pkey_credentials
  - configurable: true
    name: static_ips
    optional: true
    type: ip_ranges
  - configurable: true
    default: 200
    name: starting_container_count_maximum
    type: integer
  - configurable: false
    default:
      domains:
      - cc-uploader.service.cf.internal
    name: cc_uploader_server_cert
    type: rsa_cert_credentials
  resource_definitions:
  - configurable: true
    constraints:
      min: 1024
    default: 2048
    label: RAM
    name: ram
    type: integer
  - configurable: true
    constraints:
      min: 4096
    default: 4096
    label: Ephemeral Disk
    name: ephemeral_disk
    type: integer
  - configurable: false
    default: 0
    label: Persistent Disk
    name: persistent_disk
    type: integer
  - configurable: true
    constraints:
      min: 1
    default: 1
    label: CPU
    name: cpu
    type: integer
  resource_label: Diego Brain
  single_az_only: false
  static_ip: 1
  templates:
  - manifest: |
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          metron:
            cert: (( .doppler.metron_tls_cert.cert_pem ))
            key: (( .doppler.metron_tls_cert.private_key_pem ))
    name: metron_agent
    release: loggregator
- description: Diego Cell
  dynamic_ip: 1
  instance_definition:
    configurable: false
    constraints:
      min: 0
    default: 0
    label: Instances
    name: instances
    type: integer
  label: Diego Cell
  max_in_flight: 4%
  name: diego_cell
  property_blueprints:
  - configurable: true
    constraints:
      min: 1
    label: Cell Disk Capacity (in MB)
    name: executor_disk_capacity
    optional: true
    type: integer
  - configurable: true
    constraints:
      min: 1
    label: Cell Memory Capacity (in MB)
    name: executor_memory_capacity
    optional: true
    type: integer
  - configurable: true
    name: insecure_docker_registry_list
    optional: true
    type: string_list
  resource_definitions:
  - configurable: true
    constraints:
      min: 2048
    default: 16384
    label: RAM
    name: ram
    type: integer
  - configurable: true
    constraints:
      min: 4096
    default: 65536
    label: Ephemeral Disk
    name: ephemeral_disk
    type: integer
  - configurable: false
    default: 0
    label: Persistent Disk
    name: persistent_disk
    type: integer
  - configurable: true
    constraints:
      min: 1
    default: 2
    label: CPU
    name: cpu
    type: integer
  resource_label: Diego Cell
  single_az_only: false
  static_ip: 0
  templates:
  - manifest: |
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          metron:
            cert: (( .doppler.metron_tls_cert.cert_pem ))
            key: (( .doppler.metron_tls_cert.private_key_pem ))
    name: metron_agent
    release: loggregator
- description: Loggregator trafficcontroller distributes requests to Loggregator servers
  dynamic_ip: 1
  instance_definition:
    configurable: false
    constraints:
      min: 0
    default: 0
    label: Instances
    name: instances
    type: integer
  label: Loggregator Trafficcontroller
  max_in_flight: 1
  name: loggregator_trafficcontroller
  property_blueprints:
  - configurable: false
    default:
      domains:
      - cc_trafficcontroller
    name: cc_trafficcontroller_tls_cert
    type: rsa_cert_credentials
  - configurable: false
    default:
      domains:
      - trafficcontroller
    name: trafficcontroller_tls_cert
    type: rsa_cert_credentials
  - configurable: false
    default:
      domains:
      - statsdinjector
    name: statsdinjector_tls_cert
    type: rsa_cert_credentials
  resource_definitions:
  - configurable: true
    constraints:
      min: 1024
    default: 1024
    label: RAM
    name: ram
    type: integer
  - configurable: true
    constraints:
      min: 2048
    default: 2048
    label: Ephemeral Disk
    name: ephemeral_disk
    type: integer
  - configurable: false
    default: 0
    label: Persistent Disk
    name: persistent_disk
    type: integer
  - configurable: true
    constraints:
      min: 1
    default: 1
    label: CPU
    name: cpu
    type: integer
  resource_label: Loggregator Trafficcontroller
  single_az_only: false
  static_ip: 0
  templates:
  - manifest: |
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          metron:
            cert: (( .doppler.metron_tls_cert.cert_pem ))
            key: (( .doppler.metron_tls_cert.private_key_pem ))
    name: metron_agent
    release: loggregator
- description: This component manages the connections to drains. It should be scaled
    with the number of drains.
  dynamic_ip: 1
  instance_definition:
    configurable: false
    constraints:
      min: 0
    default: 0
    label: Instances
    name: instances
    type: integer
  label: Syslog Adapter
  max_in_flight: 1
  name: syslog_adapter
  property_blueprints:
  - configurable: false
    default:
      domains:
      - ss-adapter
    name: adapter_tls
    type: rsa_cert_credentials
  - configurable: false
    default:
      domains:
      - reverselogproxy
    name: adapter_rlp_tls
    type: rsa_cert_credentials
  resource_definitions:
  - configurable: true
    constraints:
      min: 1024
    default: 1024
    label: RAM
    name: ram
    type: integer
  - configurable: true
    constraints:
      min: 2048
    default: 2048
    label: Ephemeral Disk
    name: ephemeral_disk
    type: integer
  - configurable: false
    default: 0
    label: Persistent Disk
    name: persistent_disk
    type: integer
  - configurable: true
    constraints:
      min: 1
    default: 1
    label: CPU
    name: cpu
    type: integer
  resource_label: Syslog Adapter
  single_az_only: false
  static_ip: 0
  templates:
  - manifest: |
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          metron:
            cert: (( .doppler.metron_tls_cert.cert_pem ))
            key: (( .doppler.metron_tls_cert.private_key_pem ))
    name: metron_agent
    release: loggregator
- description: This component handles communication with the Cloud Controller to receive
    new bindings.
  dynamic_ip: 1
  instance_definition:
    configurable: false
    constraints:
      max: 0
      min: 0
    default: 0
    label: Instances
    name: instances
    type: integer
  label: Syslog Scheduler
  max_in_flight: 1
  name: syslog_scheduler
  property_blueprints:
  - configurable: false
    default:
      domains:
      - cloud-controller-ng.service.cf.internal
    name: scheduler_api_tls
    type: rsa_cert_credentials
  - configurable: false
    default:
      domains:
      - ss-adapter
    name: scheduler_client_tls
    type: rsa_cert_credentials
  resource_definitions:
  - configurable: true
    constraints:
      min: 1024
    default: 1024
    label: RAM
    name: ram
    type: integer
  - configurable: true
    constraints:
      min: 2048
    default: 2048
    label: Ephemeral Disk
    name: ephemeral_disk
    type: integer
  - configurable: false
    default: 0
    label: Persistent Disk
    name: persistent_disk
    type: integer
  - configurable: true
    constraints:
      min: 1
    default: 1
    label: CPU
    name: cpu
    type: integer
  resource_label: Syslog Scheduler
  single_az_only: false
  static_ip: 0
  templates:
  - manifest: |
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          metron:
            cert: (( .doppler.metron_tls_cert.cert_pem ))
            key: (( .doppler.metron_tls_cert.private_key_pem ))
    name: metron_agent
    release: loggregator
- description: Doppler server collects application logs
  dynamic_ip: 1
  instance_definition:
    configurable: false
    constraints:
      min: 0
    default: 0
    label: Instances
    name: instances
    type: integer
  label: Doppler Server
  max_in_flight: 1
  name: doppler
  property_blueprints:
  - configurable: true
    default: 10000
    name: message_drain_buffer_size
    type: integer
  - configurable: false
    default:
      domains:
      - doppler
    name: doppler_tls_cert
    type: rsa_cert_credentials
  - configurable: false
    default:
      domains:
      - metron
    name: metron_tls_cert
    type: rsa_cert_credentials
  - configurable: false
    default:
      domains:
      - syslogdrainbinder
    name: syslogdrainbinder_tls_cert
    type: rsa_cert_credentials
  resource_definitions:
  - configurable: true
    constraints:
      min: 1024
    default: 1024
    label: RAM
    name: ram
    type: integer
  - configurable: true
    constraints:
      min: 2048
    default: 2048
    label: Ephemeral Disk
    name: ephemeral_disk
    type: integer
  - configurable: false
    default: 0
    label: Persistent Disk
    name: persistent_disk
    type: integer
  - configurable: true
    constraints:
      min: 1
    default: 1
    label: CPU
    name: cpu
    type: integer
  resource_label: Doppler Server
  single_az_only: false
  static_ip: 0
  templates:
  - manifest: |
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          metron:
            cert: (( .doppler.metron_tls_cert.cert_pem ))
            key: (( .doppler.metron_tls_cert.private_key_pem ))
    name: metron_agent
    release: loggregator
- description: TCP Routers route TCP traffic.
  dynamic_ip: 0
  instance_definition:
    configurable: true
    constraints:
      min: 0
    default: 1
    label: Instances
    name: instances
    type: integer
    zero_if:
      property_reference: .properties.tcp_routing
      property_values:
      - disable
  label: TCP Router
  max_in_flight: 1
  name: tcp_router
  property_blueprints:
  - configurable: true
    name: static_ips
    optional: true
    type: ip_ranges
  resource_definitions:
  - configurable: true
    constraints:
      min: 1024
    default: 1024
    label: RAM
    name: ram
    type: integer
  - configurable: false
    default: 0
    label: Ephemeral Disk
    name: ephemeral_disk
    type: integer
  - configurable: false
    constraints:
      min: 1024
    default: 1024
    label: Persistent Disk
    name: persistent_disk
    type: integer
  - configurable: true
    constraints:
      min: 1
    default: 1
    label: CPU
    name: cpu
    type: integer
  resource_label: TCP Router
  single_az_only: false
  static_ip: 1
  templates:
  - consumes: |
      consul_common: {from: consul_common_link}
      consul_client: {from: consul_client_link}
      consul_server: nil
    name: consul_agent
    release: consul
  - manifest: |
      uaa:
        tls_port: 8443
        ca_cert: (( $ops_manager.ca_certificate ))
      tcp_router:
        oauth_secret: (( .uaa.tcp_router_credentials.password ))
        log_level: debug
    name: tcp_router
    release: routing
  - manifest: |
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          metron:
            cert: (( .doppler.metron_tls_cert.cert_pem ))
            key: (( .doppler.metron_tls_cert.private_key_pem ))
      metron_agent:
        deployment: cf
      syslog_daemon_config:
        enable: false
    name: metron_agent
    release: loggregator
  - manifest: |
      syslog: (( .properties.system_logging.selected_option.parsed_manifest(syslog) ))
    name: syslog_forwarder
    release: syslog-migration
- description: CredHub
  dynamic_ip: 1
  instance_definition:
    configurable: false
    default: 0
    label: Instances
    name: instances
    type: integer
  label: CredHub
  max_in_flight: 1
  name: credhub
  resource_definitions:
  - configurable: true
    constraints:
      min: 2
    default: 2
    label: CPU
    name: cpu
    type: integer
  - configurable: true
    constraints:
      min: 8192
    default: 8192
    label: RAM
    name: ram
    type: integer
  - configurable: true
    constraints:
      min: 10240
    default: 10240
    label: Ephemeral Disk
    name: ephemeral_disk
    type: integer
  - configurable: false
    default: 0
    label: Persistent Disk
    name: persistent_disk
    type: integer
  resource_label: CredHub
  single_az_only: false
  static_ip: 0
  templates:
  - manifest: |
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          metron:
            cert: (( .doppler.metron_tls_cert.cert_pem ))
            key: (( .doppler.metron_tls_cert.private_key_pem ))
    name: metron_agent
    release: loggregator
- description: Pushes the Pivotal Apps Manager application to your Application Service
    installation
  dynamic_ip: 1
  instance_definition:
    configurable: false
    default: 0
    label: Instances
    name: instances
    type: integer
  label: Apps Manager Errand
  max_in_flight: 1
  name: push-apps-manager
  property_blueprints: []
  resource_definitions:
  - configurable: true
    constraints:
      min: 1024
    default: 1024
    label: RAM
    name: ram
    type: integer
  - configurable: true
    constraints:
      min: 2048
    default: 2048
    label: Ephemeral Disk
    name: ephemeral_disk
    type: integer
  - configurable: false
    default: 0
    label: Persistent Disk
    name: persistent_disk
    type: integer
  - configurable: true
    constraints:
      min: 1
    default: 1
    label: CPU
    name: cpu
    type: integer
  resource_label: Apps Manager Errand
  single_az_only: false
  static_ip: 0
  templates:
  - manifest: |
      loggregator:
        tls:
          ca_cert: (( $ops_manager.ca_certificate ))
          metron:
            cert: (( .doppler.metron_tls_cert.cert_pem ))
            key: (( .doppler.metron_tls_cert.private_key_pem ))
    name: metron_agent
    release: loggregator
kiln_metadata:
  metadata_git_sha: 336cf04b2e299a1c33fff79b2f4300b84c5f9cd9
label: Small Footprint PAS
metadata_version: "2.1"
minimum_version_for_upgrade: 2.0.0
name: cf
post_deploy_errands:
- colocated: true
  description: Runs Smoke Tests against your Application Service installation
  instances:
  - control/first
  label: Smoke Test Errand
  name: smoke_tests
  run_default: true
- colocated: true
  description: Pushes the Pivotal Usage Service application to your Application Service
    installation. Pivotal Apps Manager depends on this application.
  instances:
  - control/first
  label: Usage Service Errand
  name: push-usage-service
  run_default: true
- colocated: true
  description: Pushes the Pivotal Apps Manager application to your Application Service
    installation
  instances:
  - control/first
  label: Apps Manager Errand
  name: push-apps-manager
  run_default: true
- colocated: true
  description: |
    Pushes the Pivotal Notifications application to your Application Service installation
  instances:
  - control/first
  label: Notifications Errand
  name: deploy-notifications
  run_default: true
- colocated: true
  description: Pushes the Notifications UI component to your Application Service installation
  instances:
  - control/first
  label: Notifications UI Errand
  name: deploy-notifications-ui
  run_default: true
- colocated: true
  description: Pushes the Pivotal Account application to your Application Service
    installation
  instances:
  - control/first
  label: Pivotal Account Errand
  name: push-pivotal-account
  run_default: true
- colocated: true
  description: Pushes the Pivotal App Autoscaler application to your Application Service
    installation
  instances:
  - control/first
  label: App Autoscaler Errand
  name: deploy-autoscaler
  run_default: true
- colocated: true
  description: Runs Smoke Tests against the App Autoscaling Service.
  instances:
  - control/first
  label: App Autoscaler Smoke Test Errand
  name: test-autoscaling
  run_default: true
- colocated: true
  description: Pushes the NFS Broker application to your Application Service installation
  instances:
  - control/first
  label: NFS Broker Errand
  name: nfsbrokerpush
  run_default: true
product_version: 2.1.6
property_blueprints:
- configurable: false
  default: account
  name: account_database_name
  type: string
- configurable: false
  default: app_usage_service
  name: app_usage_service_database_name
  type: string
- configurable: false
  name: auctioneer_client_cert
  type: rsa_cert_credentials
- configurable: false
  default:
    domains:
    - auctioneer.service.cf.internal
    - '*.auctioneer.service.cf.internal'
  name: auctioneer_server_cert
  type: rsa_cert_credentials
- configurable: true
  constraints:
    min: 1
  default: 1
  name: autoscale_api_instance_count
  type: integer
- configurable: false
  default: autoscale
  name: autoscale_database_name
  type: string
- configurable: true
  constraints:
    min: 1
  default: 3
  name: autoscale_instance_count
  type: integer
- configurable: true
  constraints:
    max: 120
    min: 15
  default: 35
  name: autoscale_metric_bucket_count
  type: integer
- configurable: true
  constraints:
    max: 120
    min: 15
  default: 35
  name: autoscale_scaling_interval_in_seconds
  type: integer
- configurable: false
  name: bbs_client_cert
  type: rsa_cert_credentials
- configurable: false
  default:
    domains:
    - bbs.service.cf.internal
    - '*.bbs.service.cf.internal'
  name: bbs_server_cert
  type: rsa_cert_credentials
- configurable: false
  default: 169.254.0.2
  name: bosh_dns_servers
  type: string_list
- configurable: true
  default: disable
  name: cc_api_rate_limit
  option_templates:
  - name: enable
    named_manifests:
    - manifest: |
        enabled: true
        general_limit: (( .properties.cc_api_rate_limit.enable.general_limit.value ))
        unauthenticated_limit: (( .properties.cc_api_rate_limit.enable.unauthenticated_limit.value ))
      name: rate_limiter
    property_blueprints:
    - configurable: true
      default: 2000
      name: general_limit
      type: integer
    - configurable: true
      default: 100
      name: unauthenticated_limit
      type: integer
    select_value: enable
  - name: disable
    named_manifests:
    - manifest: |
        enabled: false
      name: rate_limiter
    select_value: disable
  type: selector
- configurable: false
  default: ccdb
  name: ccdb_database_name
  type: string
- configurable: true
  name: cf_dial_timeout_in_seconds
  optional: true
  type: integer
- configurable: true
  default: false
  name: cf_networking_enable_space_developer_self_service
  type: boolean
- configurable: false
  name: cloud_controller_client_cert
  type: rsa_cert_credentials
- configurable: false
  default:
    domains:
    - cloud-controller-ng.service.cf.internal
  name: cloud_controller_mutual_cert
  type: rsa_cert_credentials
- configurable: false
  name: consul_agent_cert
  type: rsa_cert_credentials
- configurable: false
  default:
    domains:
    - server.dc1.cf.internal
  name: consul_server_cert
  type: rsa_cert_credentials
- configurable: true
  default: enable
  name: container_networking
  option_templates:
  - name: enable
    select_value: enable
  - name: disable
    select_value: disable
  type: selector
- configurable: true
  default: silk
  name: container_networking_interface_plugin
  option_templates:
  - name: silk
    named_manifests:
    - manifest: |
        false
      name: disable_silk
    - manifest: |
        false
      name: use_container_address
    - manifest: |
        /var/vcap/jobs/silk-cni/config/cni
      name: cni_config_dir
    - manifest: |
        /var/vcap/packages/silk-cni/bin
      name: cni_plugin_dir
    property_blueprints:
    - configurable: true
      default: 1454
      name: network_mtu
      type: integer
    - configurable: true
      name: network_cidr
      optional: true
      type: string
    - configurable: true
      default: 4789
      name: vtep_port
      type: integer
    - configurable: true
      default: 1
      name: iptables_denied_logs_per_sec
      type: integer
    - configurable: true
      default: 100
      name: iptables_accepted_udp_logs_per_sec
      type: integer
    - configurable: true
      default: false
      name: enable_log_traffic
      type: boolean
    - configurable: true
      name: dns_servers
      optional: true
      type: string_list
    select_value: silk
  - name: external
    named_manifests:
    - manifest: |
        true
      name: disable_silk
    - manifest: |
        true
      name: use_container_address
    - manifest: |
        /var/vcap/jobs/cni/config/cni
      name: cni_config_dir
    - manifest: |
        /var/vcap/packages/cni/bin
      name: cni_plugin_dir
    select_value: external
  type: selector
- configurable: true
  default: internal_mysql
  name: credhub_database
  option_templates:
  - name: internal_mysql
    named_manifests:
    - manifest: |
        type: mysql
        host: mysql.service.cf.internal
        port: 3306
        username: ((( credhub-db-credentials.username )))
        password: ((( credhub-db-credentials.password )))
        database: (( .properties.credhub_database_name.value ))
        require_tls: false
      name: db_config
    select_value: internal_mysql
  - name: external
    named_manifests:
    - manifest: |
        type: mysql
        host: (( .properties.credhub_database.external.host.value ))
        port: (( .properties.credhub_database.external.port.value ))
        username: (( .properties.credhub_database.external.username.value ))
        password: (( .properties.credhub_database.external.password.value ))
        database: (( .properties.credhub_database_name.value ))
        tls_ca: (( .properties.credhub_database.external.tls_ca.value ))
      name: db_config
    property_blueprints:
    - configurable: true
      name: host
      type: string
    - configurable: true
      name: port
      type: port
    - configurable: true
      name: username
      type: string
    - configurable: true
      name: password
      type: secret
    - configurable: true
      name: tls_ca
      type: text
    select_value: external
  type: selector
- configurable: false
  default: credhub
  name: credhub_database_name
  type: string
- configurable: true
  name: credhub_hsm_provider_client_certificate
  optional: true
  type: rsa_cert_credentials
- configurable: false
  default: only-option
  name: credhub_hsm_provider_list
  option_templates:
  - name: doesnt-matter
    named_manifests:
    - manifest: |
        "(( .properties.credhub_hsm_provider_partition.value ? .properties.credhub_hsm_provider_list.selected_option.parsed_manifest(internal_hsm) : .properties.credhub_hsm_provider_list.selected_option.parsed_manifest(internal_only) ))"
      name: list
    - manifest: |
        - name: internal-provider
          type: internal
        - name: hsm-provider
          type: hsm
          partition: (( .properties.credhub_hsm_provider_partition.value ))
          partition_password: ((  .properties.credhub_hsm_provider_partition_password.value ))
          client_certificate: (( .properties.credhub_hsm_provider_client_certificate.cert_pem ))
          client_key: (( .properties.credhub_hsm_provider_client_certificate.private_key_pem ))
          servers: (( .properties.credhub_hsm_provider_servers.parsed_manifest(servers) ))
      name: internal_hsm
    - manifest: |
        - name: internal-provider
          type: internal
      name: internal_only
    select_value: only-option
  type: selector
- configurable: true
  name: credhub_hsm_provider_partition
  optional: true
  type: string
- configurable: true
  name: credhub_hsm_provider_partition_password
  optional: true
  type: secret
- configurable: true
  name: credhub_hsm_provider_servers
  named_manifests:
  - manifest: |
      host: (( current_record.host_address.value ))
      port: (( current_record.port.value ))
      partition_serial_number: (( current_record.partition_serial_number.value ))
      certificate: (( current_record.hsm_certificate.value ))
    name: servers
  optional: true
  property_blueprints:
  - configurable: true
    name: host_address
    type: string
  - configurable: true
    name: port
    type: integer
  - configurable: true
    name: partition_serial_number
    type: string
  - configurable: true
    name: hsm_certificate
    type: text
  type: collection
- configurable: true
  name: credhub_key_encryption_passwords
  named_manifests:
  - manifest: |
      active: (( current_record.primary.value ))
      encryption_key_name: (( current_record.key.value ))
      encryption_password: (( current_record.key.value ))
      provider_name: (( current_record.provider.value ))-provider
    name: keys
  property_blueprints:
  - configurable: true
    name: name
    type: string
  - configurable: true
    default: internal
    name: provider
    options:
    - label: Internal
      name: internal
    - label: HSM
      name: hsm
    type: dropdown_select
  - configurable: true
    name: key
    type: secret
  - configurable: true
    default: false
    name: primary
    type: boolean
  type: collection
- configurable: false
  default:
    domains:
    - credhub.service.cf.internal
  name: credhub_tls
  type: rsa_cert_credentials
- configurable: false
  default: diego
  name: diego_database_name
  type: string
- configurable: true
  default: true
  name: enable_grootfs
  type: boolean
- configurable: true
  default: false
  name: enable_service_discovery_for_apps
  type: boolean
- configurable: true
  default: threshold
  name: garden_disk_cleanup
  option_templates:
  - name: never
    named_manifests:
    - manifest: |
        -1
      name: graph_cleanup_threshold_in_mb
    select_value: never
  - name: routine
    named_manifests:
    - manifest: |
        0
      name: graph_cleanup_threshold_in_mb
    select_value: routine
  - name: threshold
    named_manifests:
    - manifest: |
        (( .properties.garden_disk_cleanup.threshold.cleanup_threshold_in_mb.value ))
      name: graph_cleanup_threshold_in_mb
    property_blueprints:
    - constraints:
        min: 1
      default: 10240
      name: cleanup_threshold_in_mb
      type: integer
    select_value: threshold
  type: selector
- configurable: true
  default: ECDHE-RSA-AES128-GCM-SHA256:TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
  name: gorouter_ssl_ciphers
  type: text
- configurable: false
  name: haproxy_client_certificate
  type: rsa_cert_credentials
- configurable: true
  default: enable
  name: haproxy_forward_tls
  option_templates:
  - name: enable
    named_manifests:
    - manifest: |
        443
      name: backend_port
    - manifest: |
        "verify"
      name: backend_ssl
    property_blueprints:
    - configurable: true
      name: backend_ca
      type: text
    select_value: enable
  - name: disable
    named_manifests:
    - manifest: |
        80
      name: backend_port
    - manifest: |
        "off"
      name: backend_ssl
    select_value: disable
  type: selector
- configurable: true
  default: disable
  name: haproxy_hsts_support
  option_templates:
  - name: enable
    named_manifests:
    - manifest: |
        true
      name: hsts_enable
    - manifest: |
        (( .properties.haproxy_hsts_support.enable.include_subdomains.value ))
      name: hsts_include_subdomains
    - manifest: |
        (( .properties.haproxy_hsts_support.enable.max_age.value ))
      name: hsts_max_age
    - manifest: |
        (( .properties.haproxy_hsts_support.enable.enable_preload.value ))
      name: hsts_preload
    property_blueprints:
    - configurable: true
      default: 31536000
      name: max_age
      type: integer
    - configurable: true
      default: false
      name: include_subdomains
      type: boolean
    - configurable: true
      default: false
      name: enable_preload
      type: boolean
    select_value: enable
  - name: disable
    named_manifests:
    - manifest: |
        false
      name: hsts_enable
    - manifest: |
        false
      name: hsts_include_subdomains
    - manifest: |
        0
      name: hsts_max_age
    - manifest: |
        false
      name: hsts_preload
    select_value: disable
  type: selector
- configurable: true
  default: 16384
  name: haproxy_max_buffer_size
  type: integer
- configurable: true
  default: DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384
  name: haproxy_ssl_ciphers
  type: text
- configurable: false
  default: locket
  name: locket_database_name
  type: string
- configurable: true
  name: logger_endpoint_port
  optional: true
  type: port
- configurable: false
  name: loggregator_client_cert
  type: rsa_cert_credentials
- configurable: true
  default: enable
  name: mysql_activity_logging
  option_templates:
  - name: disable
    named_manifests:
    - manifest: ""
      name: mysql_audit_events
    select_value: disable
  - name: enable
    named_manifests:
    - manifest: (( .properties.mysql_activity_logging.enable.audit_logging_events.value
        ))
      name: mysql_audit_events
    property_blueprints:
    - configurable: true
      default: connect,query
      name: audit_logging_events
      type: string
    select_value: enable
  type: selector
- name: network_policy_agent_cert
  type: rsa_cert_credentials
- default:
    domains:
    - network-policy-server.service.cf.internal
    - '*.network-policy-server.service.cf.internal'
  name: network_policy_server_cert
  type: rsa_cert_credentials
- configurable: true
  name: networking_poe_ssl_certs
  named_manifests:
  - manifest: |
      cert_chain: (( current_record.certificate.cert_pem ))
      private_key: (( current_record.certificate.private_key_pem ))
    name: routing_certificates_and_private_keys
  property_blueprints:
  - configurable: true
    name: name
    type: string
  - configurable: true
    name: certificate
    type: rsa_cert_credentials
  type: collection
- configurable: false
  default: networkpolicyserver
  name: networkpolicyserver_database_name
  type: string
- configurable: true
  default: enable
  name: nfs_volume_driver
  option_templates:
  - name: enable
    named_manifests:
    - manifest: |
        disable: false
        ldap_svc_user: (( .properties.nfs_volume_driver.enable.ldap_service_account_user.value ))
        ldap_svc_password: (( .properties.nfs_volume_driver.enable.ldap_service_account_password.value ))
        ldap_host: (( .properties.nfs_volume_driver.enable.ldap_server_host.value ))
        ldap_port: (( .properties.nfs_volume_driver.enable.ldap_server_port.value ))
        ldap_user_fqdn: (( .properties.nfs_volume_driver.enable.ldap_user_fqdn.value ))
      name: nfsv3driver_properties
    property_blueprints:
    - configurable: true
      name: ldap_service_account_user
      optional: true
      type: string
    - configurable: true
      name: ldap_service_account_password
      optional: true
      type: secret
    - configurable: true
      name: ldap_server_host
      optional: true
      type: string
    - configurable: true
      name: ldap_server_port
      optional: true
      type: integer
    - configurable: true
      name: ldap_user_fqdn
      optional: true
      type: string
    select_value: enable
  - name: disable
    named_manifests:
    - manifest: |
        disable: true
      name: nfsv3driver_properties
    select_value: disable
  type: selector
- configurable: false
  default: nfsvolume
  name: nfsvolume_database_name
  type: string
- configurable: false
  default: notifications
  name: notifications_database_name
  type: string
- configurable: true
  name: push_apps_manager_accent_color
  optional: true
  type: string
- configurable: true
  name: push_apps_manager_company_name
  optional: true
  type: string
- configurable: true
  default: '{ "usd": "$", "eur": "" }'
  name: push_apps_manager_currency_lookup
  type: string
- configurable: true
  default: false
  name: push_apps_manager_display_plan_prices
  type: boolean
- configurable: true
  default: true
  name: push_apps_manager_enable_invitations
  type: boolean
- configurable: true
  name: push_apps_manager_favicon
  optional: true
  type: text
- configurable: true
  name: push_apps_manager_footer_links
  optional: true
  property_blueprints:
  - name: name
    type: string
  - name: href
    type: string
  type: collection
- configurable: true
  name: push_apps_manager_footer_text
  optional: true
  type: string
- configurable: true
  name: push_apps_manager_global_wrapper_bg_color
  optional: true
  type: string
- configurable: true
  name: push_apps_manager_global_wrapper_footer_content
  optional: true
  type: text
- configurable: true
  name: push_apps_manager_global_wrapper_header_content
  optional: true
  type: text
- configurable: true
  name: push_apps_manager_global_wrapper_text_color
  optional: true
  type: string
- configurable: true
  constraints:
    min: 256
  name: push_apps_manager_invitations_memory
  optional: true
  type: integer
- configurable: true
  name: push_apps_manager_logo
  optional: true
  type: text
- configurable: true
  name: push_apps_manager_marketplace_name
  optional: true
  type: string
- configurable: true
  constraints:
    min: 128
  name: push_apps_manager_memory
  optional: true
  type: integer
- configurable: true
  default:
  - href: /marketplace
    name: Marketplace
  - href: https://docs.pivotal.io/pivotalcf/2-1/pas/intro.html
    name: Docs
  - href: /tools
    name: Tools
  name: push_apps_manager_nav_links
  property_blueprints:
  - name: name
    type: string
  - name: href
    type: string
  type: collection
- configurable: true
  name: push_apps_manager_product_name
  optional: true
  type: string
- configurable: true
  name: push_apps_manager_square_logo
  optional: true
  type: text
- configurable: false
  name: rep_client_cert
  type: rsa_cert_credentials
- configurable: false
  default:
  - cflinuxfs2:/var/vcap/packages/cflinuxfs2/rootfs
  name: rep_preloaded_rootfses_garden
  type: string_list
- configurable: false
  default:
  - cflinuxfs2:/var/vcap/packages/cflinuxfs2/rootfs.tar
  name: rep_preloaded_rootfses_grootfs
  type: string_list
- configurable: true
  default: false
  name: rep_proxy_enabled
  type: boolean
- configurable: false
  default:
    domains:
    - cell.service.cf.internal
    - '*.cell.service.cf.internal'
  name: rep_server_cert
  type: rsa_cert_credentials
- configurable: true
  default: enable
  name: route_services
  option_templates:
  - name: enable
    named_manifests:
    - manifest: |
        ((( router-route-services-secret )))
      name: secret
    property_blueprints:
    - configurable: true
      default: false
      name: ignore_ssl_cert_verification
      type: boolean
    select_value: enable
  - name: disable
    named_manifests:
    - manifest: ""
      name: secret
    select_value: disable
  type: selector
- configurable: true
  default: 500
  name: router_backend_max_conn
  type: integer
- configurable: true
  default: request
  name: router_client_cert_validation
  option_templates:
  - name: none
    named_manifests:
    - manifest: |
        none
      name: client_cert_validation
    select_value: none
  - name: request
    named_manifests:
    - manifest: |
        request
      name: client_cert_validation
    select_value: request
  - name: require
    named_manifests:
    - manifest: |
        require
      name: client_cert_validation
    select_value: require
  type: selector
- configurable: true
  default: false
  name: router_enable_proxy
  type: boolean
- configurable: true
  default: enable
  name: router_keepalive_connections
  option_templates:
  - name: enable
    named_manifests:
    - manifest: |
        49000
      name: max_idle_connections
    select_value: enable
  - name: disable
    named_manifests:
    - manifest: |
        0
      name: max_idle_connections
    select_value: disable
  type: selector
- configurable: true
  name: routing_custom_ca_certificates
  optional: true
  type: text
- configurable: false
  default: routing
  name: routing_database_name
  type: string
- configurable: true
  default: tls_v1_2
  name: routing_minimum_tls_version
  option_templates:
  - name: tls_v1_0
    named_manifests:
    - manifest: |
        TLSv1.0
      name: min_tls_version
    - manifest: |
        false
      name: disable_tls_10
    - manifest: |
        false
      name: disable_tls_11
    select_value: tls_v1_0
  - name: tls_v1_1
    named_manifests:
    - manifest: |
        TLSv1.1
      name: min_tls_version
    - manifest: |
        true
      name: disable_tls_10
    - manifest: |
        false
      name: disable_tls_11
    select_value: tls_v1_1
  - name: tls_v1_2
    named_manifests:
    - manifest: |
        TLSv1.2
      name: min_tls_version
    - manifest: |
        true
      name: disable_tls_10
    - manifest: |
        true
      name: disable_tls_11
    select_value: tls_v1_2
  type: selector
- configurable: true
  default: log_client_ips
  name: routing_log_client_ips
  option_templates:
  - name: log_client_ips
    named_manifests:
    - manifest: |
        false
      name: disable_log_forwarded_for
    - manifest: |
        false
      name: disable_log_source_ips
    select_value: log_client_ips
  - name: disable_x_forwarded_for
    named_manifests:
    - manifest: |
        true
      name: disable_log_forwarded_for
    - manifest: |
        false
      name: disable_log_source_ips
    select_value: disable_x_forwarded_for
  - name: disable_all_log_client_ips
    named_manifests:
    - manifest: |
        true
      name: disable_log_forwarded_for
    - manifest: |
        true
      name: disable_log_source_ips
    select_value: disable_all_log_client_ips
  type: selector
- configurable: true
  default: false
  name: routing_disable_http
  type: boolean
- configurable: true
  default: load_balancer
  name: routing_tls_termination
  option_templates:
  - name: load_balancer
    named_manifests:
    - manifest: |
        always_forward
      name: gorouter_forwarded_client_cert
    - manifest: |
        false
      name: haproxy_client_cert
    select_value: load_balancer
  - name: ha_proxy
    named_manifests:
    - manifest: |
        forward
      name: gorouter_forwarded_client_cert
    - manifest: |
        true
      name: haproxy_client_cert
    select_value: ha_proxy
  - name: router
    named_manifests:
    - manifest: |
        sanitize_set
      name: gorouter_forwarded_client_cert
    - manifest: |
        false
      name: haproxy_client_cert
    select_value: router
  type: selector
- configurable: true
  name: saml_entity_id_override
  optional: true
  type: string
- configurable: true
  default: SHA256
  name: saml_signature_algorithm
  optional: false
  options:
  - label: SHA256
    name: SHA256
  - label: SHA512
    name: SHA512
  type: dropdown_select
- configurable: true
  default: false
  name: secure_service_instance_credentials
  type: boolean
- configurable: true
  name: security_acknowledgement
  type: string
- configurable: false
  default:
    domains:
    - service-discovery-controller.service.cf.internal
  name: service_discovery_client_tls
  type: rsa_cert_credentials
- configurable: false
  default:
    domains:
    - service-discovery-controller.service.cf.internal
  name: service_discovery_server_tls
  type: rsa_cert_credentials
- configurable: false
  default: silk
  name: silk_database_name
  type: string
- configurable: true
  default: on_demand
  name: smoke_tests
  option_templates:
  - name: on_demand
    named_manifests:
    - manifest: |
        api: "https://api.(( .cloud_controller.system_domain.value ))"
        apps_domain: (( .cloud_controller.apps_domain.value ))
        user: (( .uaa.run_smoke_tests_credentials.identity ))
        password: (( .uaa.run_smoke_tests_credentials.password ))
        org: system
        space: CF_SMOKE_TEST_SPACE
        skip_ssl_validation: (( .ha_proxy.skip_cert_verify.value ))
        use_existing_org: true
        use_existing_space: false
        cf_dial_timeout_in_seconds: (( .properties.cf_dial_timeout_in_seconds.value ))
      name: smoke_tests
    select_value: on_demand
  - name: specified
    named_manifests:
    - manifest: |
        api: "https://api.(( .cloud_controller.system_domain.value ))"
        apps_domain: (( .properties.smoke_tests.specified.apps_domain.value ))
        user: (( .uaa.run_smoke_tests_credentials.identity ))
        password: (( .uaa.run_smoke_tests_credentials.password ))
        org: (( .properties.smoke_tests.specified.org_name.value ))
        space: (( .properties.smoke_tests.specified.space_name.value ))
        skip_ssl_validation: (( .ha_proxy.skip_cert_verify.value ))
        use_existing_org: true
        use_existing_space: true
        cf_dial_timeout_in_seconds: (( .properties.cf_dial_timeout_in_seconds.value ))
      name: smoke_tests
    property_blueprints:
    - configurable: true
      name: org_name
      type: string
    - configurable: true
      name: space_name
      type: string
    - configurable: true
      name: apps_domain
      type: string
    select_value: specified
  type: selector
- configurable: true
  name: smtp_address
  optional: true
  type: network_address
- configurable: true
  default: plain
  name: smtp_auth_mechanism
  options:
  - label: None
    name: none
  - label: Plain
    name: plain
  - label: CRAMMD5
    name: cram-md5
  type: dropdown_select
- configurable: true
  name: smtp_crammd5_secret
  optional: true
  type: string
- configurable: true
  name: smtp_credentials
  optional: true
  type: simple_credentials
- configurable: true
  default: false
  name: smtp_enable_starttls_auto
  type: boolean
- configurable: true
  name: smtp_from
  optional: true
  type: email
- configurable: true
  name: smtp_port
  optional: true
  type: port
- configurable: true
  name: syslog_host
  optional: true
  type: network_address
- configurable: true
  default: true
  name: syslog_metrics_to_syslog_enabled
  type: boolean
- configurable: true
  name: syslog_port
  optional: true
  type: port
- configurable: true
  name: syslog_protocol
  optional: true
  options:
  - label: TCP protocol
    name: tcp
  - label: RELP protocol
    name: relp
  - label: UDP protocol
    name: udp
  type: dropdown_select
- configurable: true
  name: syslog_rule
  optional: true
  type: text
- configurable: true
  default: disabled
  name: syslog_tls
  option_templates:
  - name: disabled
    named_manifests:
    - manifest: |
        false
      name: tls_enabled
    - manifest: ""
      name: ca_cert
    - manifest: |
        ""
      name: permitted_peer
    select_value: disabled
  - name: enabled
    named_manifests:
    - manifest: |
        true
      name: tls_enabled
    - manifest: |
        (( .properties.syslog_tls.enabled.tls_ca_cert.value ))
      name: ca_cert
    - manifest: |
        (( .properties.syslog_tls.enabled.tls_permitted_peer.value ))
      name: permitted_peer
    property_blueprints:
    - configurable: true
      name: tls_ca_cert
      type: ca_certificate
    - configurable: true
      name: tls_permitted_peer
      type: string
    select_value: enabled
  type: selector
- configurable: true
  default: false
  name: syslog_use_tcp_for_file_forwarding_local_transport
  type: boolean
- configurable: true
  default: internal
  name: system_blobstore
  option_templates:
  - name: internal
    named_manifests:
    - manifest: |
        blobstore_type: webdav
        webdav_config:
          username: ((( webdav-blobstore-credentials.username )))
          password: ((( webdav-blobstore-credentials.password )))
          public_endpoint: https://blobstore.(( .cloud_controller.system_domain.value ))
          ca_cert: (( $ops_manager.ca_certificate ))
      name: ccbuildpack
    - manifest: |
        max_staged_droplets_stored: 2
        blobstore_type: webdav
        webdav_config:
          username: ((( webdav-blobstore-credentials.username )))
          password: ((( webdav-blobstore-credentials.password )))
          public_endpoint: https://blobstore.(( .cloud_controller.system_domain.value ))
          ca_cert: (( $ops_manager.ca_certificate ))
      name: ccdroplet
    - manifest: |
        max_package_size: 2147483648
        blobstore_type: webdav
        webdav_config:
          username: ((( webdav-blobstore-credentials.username )))
          password: ((( webdav-blobstore-credentials.password )))
          public_endpoint: https://blobstore.(( .cloud_controller.system_domain.value ))
          ca_cert: (( $ops_manager.ca_certificate ))
      name: ccpackage
    - manifest: |
        blobstore_type: webdav
        webdav_config:
          username: ((( webdav-blobstore-credentials.username )))
          password: ((( webdav-blobstore-credentials.password )))
          public_endpoint: https://blobstore.(( .cloud_controller.system_domain.value ))
          ca_cert: (( $ops_manager.ca_certificate ))
      name: ccresource
    select_value: internal
  - name: external
    named_manifests:
    - manifest: |
        encryption: "AES256"
      name: aes_hash
    - manifest: |
        encryption: "aws:kms"
        x-amz-server-side-encryption-aws-kms-key-id: (( .properties.system_blobstore.external.encryption_kms_key_id.value ))
      name: kms_hash
    - manifest: |
        "(( .properties.system_blobstore.external.encryption_kms_key_id.value ? .properties.system_blobstore.selected_option.parsed_manifest(kms_hash) : .properties.system_blobstore.selected_option.parsed_manifest(aes_hash) ))"
      name: encrypt_hash
    - manifest: '{}'
      name: empty_hash
    - manifest: |
        blobstore_type: fog
        buildpack_directory_key: (( .properties.system_blobstore.external.buildpacks_bucket.value ))
        fog_connection:
          provider: AWS
          aws_access_key_id: (( .properties.system_blobstore.external.access_key.value ))
          aws_secret_access_key: (( .properties.system_blobstore.external.secret_key.value ))
          aws_signature_version: (( .properties.system_blobstore.external.signature_version.value ))
          region:  (( .properties.system_blobstore.external.region.value ))
          path_style: true
          endpoint: (( .properties.system_blobstore.external.endpoint.value ))
        fog_aws_storage_options: '(( .properties.system_blobstore.external.encryption.value ? .properties.system_blobstore.selected_option.parsed_manifest(encrypt_hash) : .properties.system_blobstore.selected_option.parsed_manifest(empty_hash) ))'
      name: ccbuildpack
    - manifest: |
        max_staged_droplets_stored: 2
        blobstore_type: fog
        droplet_directory_key: (( .properties.system_blobstore.external.droplets_bucket.value ))
        fog_connection:
          provider: AWS
          aws_access_key_id: (( .properties.system_blobstore.external.access_key.value ))
          aws_secret_access_key: (( .properties.system_blobstore.external.secret_key.value ))
          aws_signature_version: (( .properties.system_blobstore.external.signature_version.value ))
          region:  (( .properties.system_blobstore.external.region.value ))
          path_style: true
          endpoint: (( .properties.system_blobstore.external.endpoint.value ))
        fog_aws_storage_options: '(( .properties.system_blobstore.external.encryption.value ? .properties.system_blobstore.selected_option.parsed_manifest(encrypt_hash) : .properties.system_blobstore.selected_option.parsed_manifest(empty_hash) ))'
      name: ccdroplet
    - manifest: |
        max_package_size: 2147483648
        app_package_directory_key: (( .properties.system_blobstore.external.packages_bucket.value ))
        blobstore_type: fog
        fog_connection:
          provider: AWS
          aws_access_key_id: (( .properties.system_blobstore.external.access_key.value ))
          aws_secret_access_key: (( .properties.system_blobstore.external.secret_key.value ))
          aws_signature_version: (( .properties.system_blobstore.external.signature_version.value ))
          region:  (( .properties.system_blobstore.external.region.value ))
          path_style: true
          endpoint: (( .properties.system_blobstore.external.endpoint.value ))
        fog_aws_storage_options: '(( .properties.system_blobstore.external.encryption.value ? .properties.system_blobstore.selected_option.parsed_manifest(encrypt_hash) : .properties.system_blobstore.selected_option.parsed_manifest(empty_hash) ))'
      name: ccpackage
    - manifest: |
        blobstore_type: fog
        resource_directory_key: (( .properties.system_blobstore.external.resources_bucket.value ))
        fog_connection:
          provider: AWS
          aws_access_key_id: (( .properties.system_blobstore.external.access_key.value ))
          aws_secret_access_key: (( .properties.system_blobstore.external.secret_key.value ))
          aws_signature_version: (( .properties.system_blobstore.external.signature_version.value ))
          region:  (( .properties.system_blobstore.external.region.value ))
          path_style: true
          endpoint: (( .properties.system_blobstore.external.endpoint.value ))
        fog_aws_storage_options: '(( .properties.system_blobstore.external.encryption.value ? .properties.system_blobstore.selected_option.parsed_manifest(encrypt_hash) : .properties.system_blobstore.selected_option.parsed_manifest(empty_hash) ))'
      name: ccresource
    property_blueprints:
    - configurable: true
      default: https://s3.amazonaws.com
      name: endpoint
      type: string
    - configurable: true
      name: buildpacks_bucket
      type: string
    - configurable: true
      name: droplets_bucket
      type: string
    - configurable: true
      name: packages_bucket
      type: string
    - configurable: true
      name: resources_bucket
      type: string
    - configurable: true
      name: access_key
      type: string
    - configurable: true
      name: secret_key
      type: secret
    - configurable: true
      default: 4
      name: signature_version
      optional: false
      options:
      - label: V2 Signature
        name: 2
      - label: V4 Signature
        name: 4
      type: dropdown_select
    - configurable: true
      name: region
      optional: true
      type: string
    - configurable: true
      default: false
      name: encryption
      optional: false
      type: boolean
    - configurable: true
      name: encryption_kms_key_id
      optional: true
      type: string
    - configurable: true
      default: false
      name: versioning
      type: boolean
    select_value: external
  - name: external_gcs
    named_manifests:
    - manifest: |
        blobstore_type: fog
        buildpack_directory_key: (( .properties.system_blobstore.external_gcs.buildpacks_bucket.value ))
        fog_connection:
          provider: Google
          google_storage_access_key_id: (( .properties.system_blobstore.external_gcs.access_key.value ))
          google_storage_secret_access_key: (( .properties.system_blobstore.external_gcs.secret_key.value ))
      name: ccbuildpack
    - manifest: |
        max_staged_droplets_stored: 2
        blobstore_type: fog
        droplet_directory_key: (( .properties.system_blobstore.external_gcs.droplets_bucket.value ))
        fog_connection:
          provider: Google
          google_storage_access_key_id: (( .properties.system_blobstore.external_gcs.access_key.value ))
          google_storage_secret_access_key: (( .properties.system_blobstore.external_gcs.secret_key.value ))
      name: ccdroplet
    - manifest: |
        max_package_size: 2147483648
        blobstore_type: fog
        app_package_directory_key: (( .properties.system_blobstore.external_gcs.packages_bucket.value ))
        fog_connection:
          provider: Google
          google_storage_access_key_id: (( .properties.system_blobstore.external_gcs.access_key.value ))
          google_storage_secret_access_key: (( .properties.system_blobstore.external_gcs.secret_key.value ))
      name: ccpackage
    - manifest: |
        blobstore_type: fog
        resource_directory_key: (( .properties.system_blobstore.external_gcs.resources_bucket.value ))
        fog_connection:
          provider: Google
          google_storage_access_key_id: (( .properties.system_blobstore.external_gcs.access_key.value ))
          google_storage_secret_access_key: (( .properties.system_blobstore.external_gcs.secret_key.value ))
      name: ccresource
    property_blueprints:
    - configurable: true
      name: buildpacks_bucket
      type: string
    - configurable: true
      name: droplets_bucket
      type: string
    - configurable: true
      name: packages_bucket
      type: string
    - configurable: true
      name: resources_bucket
      type: string
    - configurable: true
      name: access_key
      type: string
    - configurable: true
      name: secret_key
      type: secret
    select_value: external_gcs
  - name: external_gcs_service_account
    named_manifests:
    - manifest: |
        blobstore_type: fog
        buildpack_directory_key: (( .properties.system_blobstore.external_gcs_service_account.buildpacks_bucket.value ))
        fog_connection:
          provider: Google
          google_project: (( .properties.system_blobstore.external_gcs_service_account.project_id.value ))
          google_client_email: (( .properties.system_blobstore.external_gcs_service_account.service_account_email.value ))
          google_json_key_string: (( .properties.system_blobstore.external_gcs_service_account.service_account_json_key.value ))
      name: ccbuildpack
    - manifest: |
        max_staged_droplets_stored: 2
        blobstore_type: fog
        droplet_directory_key: (( .properties.system_blobstore.external_gcs_service_account.droplets_bucket.value ))
        fog_connection:
          provider: Google
          google_project: (( .properties.system_blobstore.external_gcs_service_account.project_id.value ))
          google_client_email: (( .properties.system_blobstore.external_gcs_service_account.service_account_email.value ))
          google_json_key_string: (( .properties.system_blobstore.external_gcs_service_account.service_account_json_key.value ))
      name: ccdroplet
    - manifest: |
        max_package_size: 2147483648
        blobstore_type: fog
        app_package_directory_key: (( .properties.system_blobstore.external_gcs_service_account.packages_bucket.value ))
        fog_connection:
          provider: Google
          google_project: (( .properties.system_blobstore.external_gcs_service_account.project_id.value ))
          google_client_email: (( .properties.system_blobstore.external_gcs_service_account.service_account_email.value ))
          google_json_key_string: (( .properties.system_blobstore.external_gcs_service_account.service_account_json_key.value ))
      name: ccpackage
    - manifest: |
        blobstore_type: fog
        resource_directory_key: (( .properties.system_blobstore.external_gcs_service_account.resources_bucket.value ))
        fog_connection:
          provider: Google
          google_project: (( .properties.system_blobstore.external_gcs_service_account.project_id.value ))
          google_client_email: (( .properties.system_blobstore.external_gcs_service_account.service_account_email.value ))
          google_json_key_string: (( .properties.system_blobstore.external_gcs_service_account.service_account_json_key.value ))
      name: ccresource
    property_blueprints:
    - configurable: true
      name: buildpacks_bucket
      type: string
    - configurable: true
      name: droplets_bucket
      type: string
    - configurable: true
      name: packages_bucket
      type: string
    - configurable: true
      name: resources_bucket
      type: string
    - configurable: true
      name: project_id
      type: string
    - configurable: true
      name: service_account_email
      type: string
    - configurable: true
      name: service_account_json_key
      type: text
    select_value: external_gcs_service_account
  - name: external_azure
    named_manifests:
    - manifest: |
        blobstore_type: fog
        buildpack_directory_key: (( .properties.system_blobstore.external_azure.buildpacks_container.value ))
        fog_connection:
          provider: AzureRM
          environment: (( .properties.system_blobstore.external_azure.environment.value ))
          azure_storage_account_name: (( .properties.system_blobstore.external_azure.account_name.value ))
          azure_storage_access_key: (( .properties.system_blobstore.external_azure.access_key.value ))
      name: ccbuildpack
    - manifest: |
        max_staged_droplets_stored: 2
        blobstore_type: fog
        droplet_directory_key: (( .properties.system_blobstore.external_azure.droplets_container.value ))
        fog_connection:
          provider: AzureRM
          environment: (( .properties.system_blobstore.external_azure.environment.value ))
          azure_storage_account_name: (( .properties.system_blobstore.external_azure.account_name.value ))
          azure_storage_access_key: (( .properties.system_blobstore.external_azure.access_key.value ))
      name: ccdroplet
    - manifest: |
        max_package_size: 2147483648
        blobstore_type: fog
        app_package_directory_key: (( .properties.system_blobstore.external_azure.packages_container.value ))
        fog_connection:
          provider: AzureRM
          environment: (( .properties.system_blobstore.external_azure.environment.value ))
          azure_storage_account_name: (( .properties.system_blobstore.external_azure.account_name.value ))
          azure_storage_access_key: (( .properties.system_blobstore.external_azure.access_key.value ))
      name: ccpackage
    - manifest: |
        blobstore_type: fog
        resource_directory_key: (( .properties.system_blobstore.external_azure.resources_container.value ))
        fog_connection:
          provider: AzureRM
          environment: (( .properties.system_blobstore.external_azure.environment.value ))
          azure_storage_account_name: (( .properties.system_blobstore.external_azure.account_name.value ))
          azure_storage_access_key: (( .properties.system_blobstore.external_azure.access_key.value ))
      name: ccresource
    property_blueprints:
    - configurable: true
      name: buildpacks_container
      type: string
    - configurable: true
      name: droplets_container
      type: string
    - configurable: true
      name: packages_container
      type: string
    - configurable: true
      name: resources_container
      type: string
    - configurable: true
      name: account_name
      type: string
    - configurable: true
      name: access_key
      type: secret
    - configurable: true
      default: AzureCloud
      name: environment
      optional: false
      type: string
    select_value: external_azure
  type: selector
- configurable: true
  default: internal_mysql
  name: system_database
  option_templates:
  - name: internal_mysql
    named_manifests:
    - manifest: |
        (( .properties.system_db_link.selected_option.parsed_manifest(proxy) ))
      name: mysql_db_link
    - manifest: |
        db_scheme: mysql
        address: mysql.service.cf.internal
        port: 3306
        roles:
        - tag: admin
          name: ((( cc-db-credentials.username )))
          password: ((( cc-db-credentials.password )))
        databases:
        - tag: cc
          name: (( .properties.ccdb_database_name.value ))
          citext: true
      name: ccdb
    - manifest: |
        (( .properties.system_db_link.selected_option.parsed_manifest(proxy) ))
      name: ccdb_link
    - manifest: |
        port: 3306
        username: ((( notifications-db-credentials.username )))
        password: ((( notifications-db-credentials.password )))
        database: (( .properties.notifications_database_name.value ))
        max_open_connections: 10
      name: notifications
    - manifest: |
        adapter: mysql
        port: 3306
        username: ((( autoscale-db-credentials.username )))
        password: ((( autoscale-db-credentials.password )))
        name: (( .properties.autoscale_database_name.value ))
      name: autoscaling
    - manifest: |
        port: 3306
        username: ((( app-usage-db-credentials.username )))
        password: ((( app-usage-db-credentials.password )))
        name: (( .properties.app_usage_service_database_name.value ))
      name: push-app-usage-service
    - manifest: |
        port: 3306
        user: ((( app-usage-db-credentials.username )))
        password: ((( app-usage-db-credentials.password )))
        name: (( .properties.app_usage_service_database_name.value ))
      name: bbr-usage-servicedb
    - manifest: |
        (( .properties.system_db_link.selected_option.parsed_manifest(app_usage_database_proxy) ))
      name: push_app_usage_service_db_link
    - manifest: |
        db_host: mysql.service.cf.internal
        db_port: 3306
        db_username: ((( diego-db-credentials.username )))
        db_password: ((( diego-db-credentials.password )))
        db_schema: (( .properties.diego_database_name.value ))
        max_open_connections: 100
      name: diegodb
    - manifest: |
        db_host: mysql.service.cf.internal
        db_port: 3306
        db_username: ((( locket-db-credentials.username )))
        db_password: ((( locket-db-credentials.password )))
        db_schema: (( .properties.locket_database_name.value ))
      name: locketdb
    - manifest: |
        type: mysql
        host: mysql.service.cf.internal
        port: 3306
        username: ((( routing-db-credentials.username )))
        password: ((( routing-db-credentials.password )))
        schema: (( .properties.routing_database_name.value ))
      name: routingdb
    - manifest: |
        type: mysql
        host: mysql.service.cf.internal
        port: 3306
        username: ((( silk-db-credentials.username )))
        password: ((( silk-db-credentials.password )))
        name: (( .properties.silk_database_name.value ))
      name: silkdb
    - manifest: |
        type: mysql
        host: mysql.service.cf.internal
        port: 3306
        username: ((( network-policy-server-db-credentials.username )))
        password: ((( network-policy-server-db-credentials.password )))
        name: (( .properties.networkpolicyserver_database_name.value ))
      name: networkpolicyserverdb
    - manifest: |
        adapter: mysql
        port: 3306
        username: ((( pivotal-account-db-credentials.username )))
        password: ((( pivotal-account-db-credentials.password )))
        database: (( .properties.account_database_name.value ))
      name: pivotal_account
    - manifest: |
        username: ((( nfs-volume-db-credentials.username )))
        password: ((( nfs-volume-db-credentials.password )))
        name: (( .properties.nfsvolume_database_name.value ))
      name: nfsvolume
    - manifest: |
        db_username: ((( nfs-volume-db-credentials.username )))
        db_password: ((( nfs-volume-db-credentials.password )))
        db_name: (( .properties.nfsvolume_database_name.value ))
        db_hostname: mysql.service.cf.internal
        db_port: 3306
        db_driver: mysql
        release_level_backup: true
      name: nfsvolume_bbr
    select_value: internal_mysql
  - name: external
    named_manifests:
    - manifest: |
        database: nil
      name: mysql_db_link
    - manifest: |
        db_scheme: "mysql"
        address: (( .properties.system_database.external.host.value ))
        port: (( .properties.system_database.external.port.value ))
        roles:
        - tag: admin
          name: (( .properties.system_database.external.ccdb_username.value ))
          password: (( .properties.system_database.external.ccdb_password.value ))
        databases:
        - tag: cc
          name: (( .properties.ccdb_database_name.value ))
      name: ccdb
    - manifest: |
        database: nil
      name: ccdb_link
    - manifest: |
        host: (( .properties.system_database.external.host.value ))
        port: (( .properties.system_database.external.port.value ))
        username: (( .properties.system_database.external.notifications_username.value ))
        password: (( .properties.system_database.external.notifications_password.value ))
        database: (( .properties.notifications_database_name.value ))
        max_open_connections: 10
      name: notifications
    - manifest: |
        adapter: mysql
        host: (( .properties.system_database.external.host.value ))
        port: (( .properties.system_database.external.port.value ))
        username: (( .properties.system_database.external.autoscale_username.value ))
        password: (( .properties.system_database.external.autoscale_password.value ))
        name: (( .properties.autoscale_database_name.value ))
      name: autoscaling
    - manifest: |
        ip: (( .properties.system_database.external.host.value ))
        port: (( .properties.system_database.external.port.value ))
        username: (( .properties.system_database.external.app_usage_service_username.value ))
        password: (( .properties.system_database.external.app_usage_service_password.value ))
        name: (( .properties.app_usage_service_database_name.value ))
      name: push-app-usage-service
    - manifest: |
        host: (( .properties.system_database.external.host.value ))
        port: (( .properties.system_database.external.port.value ))
        user: (( .properties.system_database.external.app_usage_service_username.value ))
        password: (( .properties.system_database.external.app_usage_service_password.value ))
        name: (( .properties.app_usage_service_database_name.value ))
      name: bbr-usage-servicedb
    - manifest: |
        app-usage-database: nil
      name: push_app_usage_service_db_link
    - manifest: |
        db_host: (( .properties.system_database.external.host.value ))
        db_port: (( .properties.system_database.external.port.value ))
        db_username: (( .properties.system_database.external.diego_username.value ))
        db_password: (( .properties.system_database.external.diego_password.value ))
        db_schema: (( .properties.diego_database_name.value ))
        max_open_connections: 100
      name: diegodb
    - manifest: |
        db_host: (( .properties.system_database.external.host.value ))
        db_port: (( .properties.system_database.external.port.value ))
        db_username: (( .properties.system_database.external.locket_username.value ))
        db_password: (( .properties.system_database.external.locket_password.value ))
        db_schema: (( .properties.locket_database_name.value ))
      name: locketdb
    - manifest: |
        type: mysql
        host: (( .properties.system_database.external.host.value ))
        port: (( .properties.system_database.external.port.value ))
        username: (( .properties.system_database.external.routing_username.value ))
        password: (( .properties.system_database.external.routing_password.value ))
        schema: (( .properties.routing_database_name.value ))
      name: routingdb
    - manifest: |
        type: mysql
        host: (( .properties.system_database.external.host.value ))
        port: (( .properties.system_database.external.port.value ))
        username: (( .properties.system_database.external.silk_username.value ))
        password: (( .properties.system_database.external.silk_password.value ))
        name: (( .properties.silk_database_name.value ))
      name: silkdb
    - manifest: |
        type: mysql
        host: (( .properties.system_database.external.host.value ))
        port: (( .properties.system_database.external.port.value ))
        username: (( .properties.system_database.external.networkpolicyserver_username.value ))
        password: (( .properties.system_database.external.networkpolicyserver_password.value ))
        name: (( .properties.networkpolicyserver_database_name.value ))
      name: networkpolicyserverdb
    - manifest: |
        adapter: mysql
        host: (( .properties.system_database.external.host.value ))
        port: (( .properties.system_database.external.port.value ))
        username: (( .properties.system_database.external.account_username.value ))
        password: (( .properties.system_database.external.account_password.value ))
        database: (( .properties.account_database_name.value ))
      name: pivotal_account
    - manifest: |
        host: (( .properties.system_database.external.host.value ))
        port: (( .properties.system_database.external.port.value ))
        username: (( .properties.system_database.external.nfsvolume_username.value ))
        password: (( .properties.system_database.external.nfsvolume_password.value ))
        name: (( .properties.nfsvolume_database_name.value ))
      name: nfsvolume
    - manifest: |
        db_driver: mysql
        db_hostname: (( .properties.system_database.external.host.value ))
        db_name: (( .properties.nfsvolume_database_name.value ))
        db_password: (( .properties.system_database.external.nfsvolume_password.value ))
        db_port: (( .properties.system_database.external.port.value ))
        db_username: (( .properties.system_database.external.nfsvolume_username.value ))
        release_level_backup: true
      name: nfsvolume_bbr
    property_blueprints:
    - configurable: true
      name: host
      type: string
    - configurable: true
      name: port
      type: port
    - configurable: true
      name: account_username
      type: string
    - configurable: true
      name: account_password
      type: secret
    - configurable: true
      name: app_usage_service_username
      type: string
    - configurable: true
      name: app_usage_service_password
      type: secret
    - configurable: true
      name: autoscale_username
      type: string
    - configurable: true
      name: autoscale_password
      type: secret
    - configurable: true
      name: ccdb_username
      type: string
    - configurable: true
      name: ccdb_password
      type: secret
    - configurable: true
      name: diego_username
      type: string
    - configurable: true
      name: diego_password
      type: secret
    - configurable: true
      name: locket_username
      type: string
    - configurable: true
      name: locket_password
      type: secret
    - configurable: true
      name: networkpolicyserver_username
      type: string
    - configurable: true
      name: networkpolicyserver_password
      type: secret
    - configurable: true
      name: nfsvolume_username
      type: string
    - configurable: true
      name: nfsvolume_password
      type: secret
    - configurable: true
      name: notifications_username
      type: string
    - configurable: true
      name: notifications_password
      type: secret
    - configurable: true
      name: routing_username
      type: string
    - configurable: true
      name: routing_password
      type: secret
    - configurable: true
      name: silk_username
      type: string
    - configurable: true
      name: silk_password
      type: secret
    select_value: external
  type: selector
- configurable: false
  default: only-option
  name: system_db_link
  option_templates:
  - name: doesnt-matter
    named_manifests:
    - manifest: |
        "(( .mysql_proxy.service_hostname.value ? .properties.system_db_link.selected_option.parsed_manifest(proxy_service_hostname) : .properties.system_db_link.selected_option.parsed_manifest(proxy_link) ))"
      name: proxy
    - manifest: |
        database:
          instances:
          - address: (( .mysql_proxy.service_hostname.value ))
      name: proxy_service_hostname
    - manifest: |
        database: {from: proxy-mysql}
      name: proxy_link
    - manifest: |
        "(( .mysql_proxy.service_hostname.value ? .properties.system_db_link.selected_option.parsed_manifest(app_usage_database_proxy_service_hostname) : .properties.system_db_link.selected_option.parsed_manifest(app_usage_database_proxy_link) ))"
      name: app_usage_database_proxy
    - manifest: |
        app-usage-database:
          instances:
          - address: (( .mysql_proxy.service_hostname.value ))
      name: app_usage_database_proxy_service_hostname
    - manifest: |
        app-usage-database: {from: proxy-mysql}
      name: app_usage_database_proxy_link
    select_value: only-option
  type: selector
- configurable: false
  default: only-option
  name: system_logging
  option_templates:
  - name: doesnt-matter
    named_manifests:
    - manifest: |
        "(( .properties.syslog_host.value ? .properties.system_logging.selected_option.parsed_manifest(syslog_enabled) : .properties.system_logging.selected_option.parsed_manifest(syslog_disabled) ))"
      name: syslog
    - manifest: |
        address: (( .properties.syslog_host.value ))
        port: (( .properties.syslog_port.value ))
        transport: (( .properties.syslog_protocol.value ))
        tls_enabled: (( .properties.syslog_tls.selected_option.parsed_manifest(tls_enabled) ))
        ca_cert: (( .properties.syslog_tls.selected_option.parsed_manifest(ca_cert) ))
        permitted_peer: (( .properties.syslog_tls.selected_option.parsed_manifest(permitted_peer) ))
        use_tcp_for_file_forwarding_local_transport: (( .properties.syslog_use_tcp_for_file_forwarding_local_transport.value ))
        custom_rule: |
          (( .properties.syslog_rule.value ))
          if ($programname startswith "vcap.") then stop
      name: syslog_enabled
    - manifest: |
        migration:
          disabled: true
      name: syslog_disabled
    - manifest: |
        "(( .properties.syslog_host.value ? .properties.system_logging.selected_option.parsed_manifest(syslog_aggregator_enabled) : .properties.system_logging.selected_option.parsed_manifest(syslog_aggregator_disabled) ))"
      name: syslog_aggregator
    - manifest: |
        address: (( .properties.syslog_host.value ))
        port: (( .properties.syslog_port.value ))
        transport: (( .properties.syslog_protocol.value ))
      name: syslog_aggregator_enabled
    - manifest: |
        {}
      name: syslog_aggregator_disabled
    - manifest: |
        "(( .properties.syslog_host.value ? .properties.system_logging.selected_option.parsed_manifest(syslog_url_enabled) : .properties.system_logging.selected_option.parsed_manifest(syslog_url_disabled) ))"
      name: syslog_url
    - manifest: (( .properties.syslog_protocol.value ))://(( .properties.syslog_host.value
        )):(( .properties.syslog_port.value ))
      name: syslog_url_enabled
    - manifest: |
        ""
      name: syslog_url_disabled
    select_value: only-option
  type: selector
- configurable: true
  default: disable
  name: tcp_routing
  option_templates:
  - name: disable
    named_manifests:
    - manifest: |
        []
      name: default_router_group
    select_value: disable
  - name: enable
    named_manifests:
    - manifest: |
        - name: default-tcp
          reservable_ports: (( .properties.tcp_routing.enable.reservable_ports.value ))
          type: tcp
      name: default_router_group
    property_blueprints:
    - configurable: true
      name: reservable_ports
      placeholder: 'e.g: 1024-10000,65535'
      type: string
    select_value: enable
  type: selector
- configurable: false
  default: SRT
  name: tile_name
  type: string
- configurable: false
  name: tps_client_cert
  type: rsa_cert_credentials
- configurable: true
  default: internal
  name: uaa
  option_templates:
  - name: internal
    named_manifests:
    - manifest: ""
      name: saml_provider
    - manifest: |
        true
      name: self_service_links_enabled
    - manifest: |
        http://login.(( .cloud_controller.system_domain.value ))
      name: default_saml_entity_id
      type: string
    property_blueprints:
    - configurable: true
      default: 0
      name: password_min_length
      type: integer
    - configurable: true
      default: 0
      name: password_min_uppercase
      type: integer
    - configurable: true
      default: 0
      name: password_min_lowercase
      type: integer
    - configurable: true
      default: 0
      name: password_min_numeric
      type: integer
    - configurable: true
      default: 0
      name: password_min_special
      type: integer
    - configurable: true
      default: 0
      name: password_expires_after_months
      type: integer
    - configurable: true
      default: 5
      name: password_max_retry
      type: integer
    select_value: internal
  - name: saml
    named_manifests:
    - manifest: |
        (( .properties.uaa.saml.sso_name.value )):
          metadataTrustCheck: false
          idpMetadata: "(( .properties.uaa.saml.sso_url.value_present? ? .properties.uaa.saml.sso_url.value : .properties.uaa.saml.sso_xml.value ))"
          nameID: (( .properties.uaa.saml.name_id_format.value ))
          showSamlLoginLink: true
          linkText: (( .properties.uaa.saml.display_name.value ))
          emailDomain: (( .properties.uaa.saml.email_domains.parsed_strings ))
          attributeMappings:
            given_name: (( .properties.uaa.saml.first_name_attribute.value ))
            family_name: (( .properties.uaa.saml.last_name_attribute.value ))
            email: (( .properties.uaa.saml.email_attribute.value ))
            external_groups: (( .properties.uaa.saml.external_groups_attribute.value ))
      name: saml_provider
    - manifest: |
        false
      name: self_service_links_enabled
    - manifest: |
        http://login.(( .cloud_controller.system_domain.value ))
      name: default_saml_entity_id
      type: string
    property_blueprints:
    - configurable: true
      name: sso_name
      type: string
    - configurable: true
      name: display_name
      type: string
    - configurable: true
      name: sso_url
      optional: true
      type: http_url
    - configurable: true
      default: urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress
      name: name_id_format
      optional: false
      options:
      - label: Email Address
        name: urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress
      - label: Unspecified
        name: urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified
      - label: Persistent
        name: urn:oasis:names:tc:SAML:2.0:nameid-format:persistent
      type: dropdown_select
    - configurable: true
      name: sso_xml
      optional: true
      type: text
    - configurable: true
      default: true
      name: sign_auth_requests
      type: boolean
    - configurable: true
      name: require_signed_assertions
      type: boolean
    - configurable: true
      name: email_domains
      optional: true
      type: string_list
    - configurable: true
      name: first_name_attribute
      optional: true
      type: string
    - configurable: true
      name: last_name_attribute
      optional: true
      type: string
    - configurable: true
      name: email_attribute
      optional: true
      type: string
    - configurable: true
      name: external_groups_attribute
      optional: true
      type: string
    - configurable: true
      name: entity_id_override
      optional: true
      type: string
    select_value: saml
  - name: ldap
    named_manifests:
    - manifest: ""
      name: saml_provider
    - manifest: |
        false
      name: self_service_links_enabled
    - manifest: |
        http://login.(( .cloud_controller.system_domain.value ))
      name: default_saml_entity_id
      type: string
    property_blueprints:
    - configurable: true
      name: url
      type: ldap_url
    - configurable: true
      name: credentials
      type: simple_credentials
    - configurable: true
      name: search_base
      type: string
    - configurable: true
      default: cn={0}
      name: search_filter
      type: string
    - configurable: true
      name: group_search_base
      optional: true
      type: string
    - configurable: true
      default: member={0}
      name: group_search_filter
      type: string
    - configurable: true
      name: server_ssl_cert
      optional: true
      type: text
    - configurable: true
      name: server_ssl_cert_alias
      optional: true
      type: string
    - configurable: true
      default: mail
      name: mail_attribute_name
      type: string
    - configurable: true
      name: email_domains
      optional: true
      type: string_list
    - configurable: true
      name: first_name_attribute
      optional: true
      type: string
    - configurable: true
      name: last_name_attribute
      optional: true
      type: string
    - configurable: true
      default: follow
      name: ldap_referrals
      optional: false
      options:
      - label: Automatically follow any referrals
        name: follow
      - label: Ignore referrals and return partial result
        name: ignore
      - label: Throw exception for each referral and abort authentication
        name: throw
      type: dropdown_select
    select_value: ldap
  type: selector
- configurable: true
  default: internal_mysql
  name: uaa_database
  option_templates:
  - name: internal_mysql
    named_manifests:
    - manifest: |
        db_scheme: mysql
        address: mysql.service.cf.internal
        port: 3306
        roles:
        - tag: admin
          name: ((( uaa-db-credentials.username )))
          password: ((( uaa-db-credentials.password )))
        databases:
        - tag: uaa
          name: (( .properties.uaa_database_name.value ))
      name: db_config
    - manifest: |
        (( .properties.system_db_link.selected_option.parsed_manifest(proxy) ))
      name: db_link
    select_value: internal_mysql
  - name: external
    named_manifests:
    - manifest: |
        db_scheme: mysql
        address: (( .properties.uaa_database.external.host.value ))
        port: (( .properties.uaa_database.external.port.value ))
        roles:
        - tag: admin
          name: (( .properties.uaa_database.external.uaa_username.value ))
          password: (( .properties.uaa_database.external.uaa_password.value ))
        databases:
        - tag: uaa
          name: (( .properties.uaa_database_name.value ))
      name: db_config
    - manifest: |
        database: nil
      name: db_link
    property_blueprints:
    - configurable: true
      name: host
      type: string
    - configurable: true
      name: port
      type: port
    - configurable: true
      name: uaa_username
      type: string
    - configurable: true
      name: uaa_password
      type: secret
    select_value: external
  type: selector
- configurable: false
  default: uaa
  name: uaa_database_name
  type: string
- configurable: true
  default: 28800
  name: uaa_session_cookie_max_age
  type: integer
- configurable: true
  default: 1800
  name: uaa_session_idle_timeout
  type: integer
provides_product_versions:
- name: cf
  version: 2.1.6
rank: 90
releases:
- file: backup-and-restore-sdk-1.5.3-3541.25.0.tgz
  name: backup-and-restore-sdk
  sha1: 2afc0d7d03c7ab6a2d018db5a2720c94f063bee6
  version: 1.5.3
- file: binary-offline-buildpack-1.0.18-3541.25.0.tgz
  name: binary-offline-buildpack
  sha1: 667a62c73c39a6df184f397315d56e149686f9d8
  version: 1.0.18
- file: bosh-dns-aliases-0.0.2-3541.25.0.tgz
  name: bosh-dns-aliases
  sha1: 6e84fa4dfa027675d597a4598a530b0c44d05d8e
  version: 0.0.2
- file: bosh-system-metrics-forwarder-0.0.11-3541.25.0.tgz
  name: bosh-system-metrics-forwarder
  sha1: 103bd7d9223821dc3c35905b2ee23ce917b5356c
  version: 0.0.11
- file: capi-1.49.6-3541.25.0.tgz
  name: capi
  sha1: fc1466a836d556b758774f22cd50011ec750ede5
  version: 1.49.6
- file: cf-app-sd-0.5.0-3541.25.0.tgz
  name: cf-app-sd
  sha1: d5d7d3cce1e3542f6ceaed0342309d746e90659a
  version: 0.5.0
- file: cf-autoscaling-118.4.0-3541.25.0.tgz
  name: cf-autoscaling
  sha1: 831269c88db158f7c99505c916b10335250dfa2a
  version: "118.4"
- file: cf-backup-and-restore-0.0.10-3541.25.0.tgz
  name: cf-backup-and-restore
  sha1: fd37f4573e095052bf03ef7b7879a50795319e84
  version: 0.0.10
- file: cf-mysql-36.11.0-3541.25.0.tgz
  name: cf-mysql
  sha1: 12e35688db78d1cc9df446e5db135c848973d48a
  version: 36.11.0
- file: cf-networking-1.10.2-3541.25.0.tgz
  name: cf-networking
  sha1: 62ec2647a6acdd1a8b02d03c464439fcf2b27653
  version: 1.10.2
- file: cf-smoke-tests-40.0.0-3541.25.0.tgz
  name: cf-smoke-tests
  sha1: 4df624c91c2a058604792bb53f7e2a0107575a4d
  version: "40"
- file: cf-syslog-drain-5.1.0-3541.25.0.tgz
  name: cf-syslog-drain
  sha1: c8e8856f663d9653d799d10a9f97add8d76f1e8f
  version: "5.1"
- file: cflinuxfs2-1.210.0-3541.25.0.tgz
  name: cflinuxfs2
  sha1: d6dec1bed8ffe64e4b26cbf6c1b603a86e964a54
  version: 1.210.0
- file: consul-191.0.0-3541.25.0.tgz
  name: consul
  sha1: 74e7614736911e25e3ffd736fec0448370877035
  version: "191"
- file: credhub-1.7.3-3541.25.0.tgz
  name: credhub
  sha1: 5abf23bd82e8b531b7906a9e281e6232f3d78ff9
  version: 1.7.3
- file: diego-1.35.4-3541.25.0.tgz
  name: diego
  sha1: 7431b5fe1eb7a869333ab0b0214798926b3b6372
  version: 1.35.4
- file: dotnet-core-offline-buildpack-2.0.6-3541.25.0.tgz
  name: dotnet-core-offline-buildpack
  sha1: f4df847ff557bfbb315fabac9606ec1a2989df3f
  version: 2.0.6
- file: garden-runc-1.13.1-3541.25.0.tgz
  name: garden-runc
  sha1: 616d9d835d8e103b42b8d6e094c2819c7ade39b5
  version: 1.13.1
- file: go-offline-buildpack-1.8.21-3541.25.0.tgz
  name: go-offline-buildpack
  sha1: 6697d74452ad4e8ab40d24c1ab2b5da5962d65e1
  version: 1.8.21
- file: haproxy-8.6.0-3541.25.0.tgz
  name: haproxy
  sha1: d5c9172ad9d7e434328339c80907a6a200f4f0cb
  version: 8.6.0
- file: java-offline-buildpack-4.12.0-3541.25.0.tgz
  name: java-offline-buildpack
  sha1: 7816b6bbea40087b0f7f00715ca219cb6404a0b1
  version: "4.12"
- file: loggregator-101.11.0-3541.25.0.tgz
  name: loggregator
  sha1: d4510d38bfa166b6338e10afec00df9b486d766b
  version: "101.11"
- file: mysql-backup-1.38.0-3541.25.0.tgz
  name: mysql-backup
  sha1: 0375cce00a6135be2e22f7fd2fd4404b09a8edf9
  version: 1.38.0
- file: mysql-monitoring-8.18.0-3541.25.0.tgz
  name: mysql-monitoring
  sha1: 0e0a6742ee0ca9977e5488198d5eec09138d29e6
  version: 8.18.0
- file: nats-24.0.0-3541.25.0.tgz
  name: nats
  sha1: 3ca8475d7303f7482559f750dfd06dd88643a09e
  version: "24"
- file: nfs-volume-1.2.0-3541.25.0.tgz
  name: nfs-volume
  sha1: 6289544b71b2eec13b11f6c80cb3098a5c2ed438
  version: 1.2.0
- file: nodejs-offline-buildpack-1.6.23-3541.25.0.tgz
  name: nodejs-offline-buildpack
  sha1: a6a559512409780d1705f887f9d868c4d0b10c3e
  version: 1.6.23
- file: notifications-44.0.0-3541.25.0.tgz
  name: notifications
  sha1: 1db09657a3beafd45e0fe33982282e9c70a86ece
  version: "44"
- file: notifications-ui-31.0.0-3541.25.0.tgz
  name: notifications-ui
  sha1: 5c1cfb680f5033de9e91ba55f731d8fb64e16972
  version: "31"
- file: php-offline-buildpack-4.3.54-3541.25.0.tgz
  name: php-offline-buildpack
  sha1: ddbdc16ecc707273ec8b62ea668ec78278e78665
  version: 4.3.54
- file: pivotal-account-1.8.3-3541.25.0.tgz
  name: pivotal-account
  sha1: 0bd79b8c10a9c5df83ae963e1cd8edbeba0d30f9
  version: 1.8.3
- file: push-apps-manager-release-664.0.11-3541.25.0.tgz
  name: push-apps-manager-release
  sha1: 18aa8f8ea8d3b90533308fdb4469c6215f2d143d
  version: 664.0.11
- file: push-usage-service-release-666.0.1-3541.25.0.tgz
  name: push-usage-service-release
  sha1: 703b294774db37e26371c27d1ff4e2a805716c98
  version: 666.0.1
- file: python-offline-buildpack-1.6.15-3541.25.0.tgz
  name: python-offline-buildpack
  sha1: d33a741e0cdafbe43dca1d974f239839e2a4d60d
  version: 1.6.15
- file: routing-0.174.1-3541.25.0.tgz
  name: routing
  sha1: b334b33e0463dcb0a3208c34734726744421da65
  version: 0.174.1
- file: ruby-offline-buildpack-1.7.18-3541.25.0.tgz
  name: ruby-offline-buildpack
  sha1: 33d86cfb84483935bee203f71fba12cc056bebe4
  version: 1.7.18
- file: staticfile-offline-buildpack-1.4.27-3541.25.0.tgz
  name: staticfile-offline-buildpack
  sha1: bda1a0c0beb089ed9705d8f1d5f105fd7cbd50d4
  version: 1.4.27
- file: statsd-injector-1.1.0-3541.25.0.tgz
  name: statsd-injector
  sha1: f946cc20325398580c17d46a28ea6025b3e68850
  version: 1.1.0
- file: syslog-migration-11.1.1-3541.25.0.tgz
  name: syslog-migration
  sha1: 6bae0ad6e95eea212405d7d01a6319ba8932c0a4
  version: 11.1.1
- file: uaa-55.0.0-3541.25.0.tgz
  name: uaa
  sha1: 292c315c95e76181e3043cf929dcacab5dac514b
  version: "55"
runtime_configs:
- name: bosh-dns-aliases
  runtime_config: |
    releases:
    - {"file":"bosh-dns-aliases-0.0.2-3541.25.0.tgz","name":"bosh-dns-aliases","sha1":"6e84fa4dfa027675d597a4598a530b0c44d05d8e","version":"0.0.2"}
    addons:
    - name: bosh-dns-aliases
      jobs:
      - name: bosh-dns-aliases
        release: bosh-dns-aliases
        properties:
          aliases:
          - domain: auctioneer.service.cf.internal
            targets:
            - query: "*"
              instance_group: "control"
              deployment: (( ..cf.deployment_name ))
              network: (( ..cf.network_name ))
              domain: bosh
          - domain: bbs.service.cf.internal
            targets:
            - query: "*"
              instance_group: "control"
              deployment: (( ..cf.deployment_name ))
              network: (( ..cf.network_name ))
              domain: bosh
          - domain: blobstore.service.cf.internal
            targets:
            - query: "*"
              instance_group: "blobstore"
              deployment: (( ..cf.deployment_name ))
              network: (( ..cf.network_name ))
              domain: bosh
          - domain: cc-uploader.service.cf.internal
            targets:
            - query: "*"
              instance_group: "control"
              deployment: (( ..cf.deployment_name ))
              network: (( ..cf.network_name ))
              domain: bosh
          - domain: cell.service.cf.internal
            targets:
            - query: "*"
              instance_group: "compute"
              deployment: (( ..cf.deployment_name ))
              network: (( ..cf.network_name ))
              domain: bosh
            - query: "*"
              instance_group: "isolated_diego_cell*"
              deployment: "p-isolation-segment-*"
              network: "*"
              domain: bosh
            - query: "*"
              instance_group: "windows_diego_cell*"
              deployment: "p-windows-runtime-*"
              network: "*"
              domain: bosh
            - query: "*"
              instance_group: "windows_diego_cell*"
              deployment: "pas-windows-*"
              network: "*"
              domain: bosh
          - domain: _.cell.service.cf.internal
            targets:
            - query: "_"
              instance_group: "compute"
              deployment: (( ..cf.deployment_name ))
              network: (( ..cf.network_name ))
              domain: bosh
            - query: "_"
              instance_group: "isolated_diego_cell*"
              deployment: "p-isolation-segment-*"
              network: "*"
              domain: bosh
            - query: "_"
              instance_group: "windows_diego_cell*"
              deployment: "p-windows-runtime-*"
              network: "*"
              domain: bosh
            - query: "_"
              instance_group: "windows_diego_cell*"
              deployment: "pas-windows-*"
              network: "*"
              domain: bosh
          - domain: cloud-controller-ng.service.cf.internal
            targets:
            - query: "*"
              instance_group: "control"
              deployment: (( ..cf.deployment_name ))
              network: (( ..cf.network_name ))
              domain: bosh
          - domain: consul.service.cf.internal
            targets:
            - query: "*"
              instance_group: "database"
              deployment: (( ..cf.deployment_name ))
              network: (( ..cf.network_name ))
              domain: bosh
          - domain: credhub.service.cf.internal
            targets:
            - query: "*"
              instance_group: "control"
              deployment: (( ..cf.deployment_name ))
              network: (( ..cf.network_name ))
              domain: bosh
          - domain: doppler.service.cf.internal
            targets:
            - query: "*"
              instance_group: "control"
              deployment: (( ..cf.deployment_name ))
              network: (( ..cf.network_name ))
              domain: bosh
          - domain: file-server.service.cf.internal
            targets:
            - query: "*"
              instance_group: "control"
              deployment: (( ..cf.deployment_name ))
              network: (( ..cf.network_name ))
              domain: bosh
          - domain: locket.service.cf.internal
            targets:
            - query: "*"
              instance_group: "control"
              deployment: (( ..cf.deployment_name ))
              network: (( ..cf.network_name ))
              domain: bosh
          - domain: loggregator-trafficcontroller.service.cf.internal
            targets:
            - query: "*"
              instance_group: "control"
              deployment: (( ..cf.deployment_name ))
              network: (( ..cf.network_name ))
              domain: bosh
          - domain: mysql.service.cf.internal
            targets:
            - query: "*"
              instance_group: "database"
              deployment: (( ..cf.deployment_name ))
              network: (( ..cf.network_name ))
              domain: bosh
          - domain: network-policy-server.service.cf.internal
            targets:
            - query: "*"
              instance_group: "control"
              deployment: (( ..cf.deployment_name ))
              network: (( ..cf.network_name ))
              domain: bosh
          - domain: reverse-log-proxy.service.cf.internal
            targets:
            - query: "*"
              instance_group: "control"
              deployment: (( ..cf.deployment_name ))
              network: (( ..cf.network_name ))
              domain: bosh
          - domain: routing-api.service.cf.internal
            targets:
            - query: "*"
              instance_group: "control"
              deployment: (( ..cf.deployment_name ))
              network: (( ..cf.network_name ))
              domain: bosh
          - domain: silk-controller.service.cf.internal
            targets:
            - query: "*"
              instance_group: "control"
              deployment: (( ..cf.deployment_name ))
              network: (( ..cf.network_name ))
              domain: bosh
          - domain: ssh-proxy.service.cf.internal
            targets:
            - query: "*"
              instance_group: "control"
              deployment: (( ..cf.deployment_name ))
              network: (( ..cf.network_name ))
              domain: bosh
          - domain: uaa.service.cf.internal
            targets:
            - query: "*"
              instance_group: "control"
              deployment: (( ..cf.deployment_name ))
              network: (( ..cf.network_name ))
              domain: bosh
serial: false
stemcell_criteria:
  os: ubuntu-trusty
  version: "3541.25"
variables:
- name: /cf/diego-instance-identity-root-ca
  options:
    common_name: Diego Instance Identity Root CA
    duration: 1095
    is_ca: true
  type: certificate
- name: /cf/diego-instance-identity-intermediate-ca
  options:
    ca: /cf/diego-instance-identity-root-ca
    common_name: Diego Instance Identity Intermediate CA
    duration: 730
    is_ca: true
    key_usage:
    - key_cert_sign
  type: certificate
- name: app-usage-db-credentials
  options:
    username: app_usage
  type: user
- name: autoscale-db-credentials
  type: user
- name: backup-prepare-backup-encryption-key
  type: password
- name: cc-db-credentials
  type: user
- name: cloud-controller-bulk-api-credentials
  options:
    username: bulk_api
  type: user
- name: cloud-controller-internal-api-user-credentials
  type: user
- name: cloud-controller-staging-upload-credentials
  options:
    username: staging_upload_user
  type: user
- name: consul-encryption-key
  type: password
- name: credhub-db-credentials
  type: user
- name: deploy-autoscaling-broker-credentials
  type: user
- name: deploy-autoscaling-encryption-key
  type: password
- name: deploy-notifications-encryption-key
  type: password
- name: diego-db-bbs-encryption-passphrase
  type: password
- name: diego-db-credentials
  type: user
- name: locket-db-credentials
  type: user
- name: mysql-admin-credentials
  options:
    username: root
  type: user
- name: mysql-backup-server-db-credentials
  type: user
- name: mysql-bootstrap-db-credentials
  type: user
- name: mysql-cluster-health-credentials
  options:
    username: cluster-health-logger
  type: user
- name: mysql-diag-agent-db-credentials
  type: user
- name: mysql-galera-sidecar-credentials
  options:
    username: galera-healthcheck
  type: user
- name: mysql-metrics-db-credentials
  type: user
- name: mysql-monitor-db-credentials
  type: user
- name: mysql-proxy-dashboard-credentials
  options:
    username: admin
  type: user
- name: nats-credentials
  options:
    username: nats
  type: user
- name: network-policy-server-db-credentials
  type: user
- name: nfs-broker-push-db-credentials
  type: user
- name: nfs-server-blobstore-secret
  type: password
- name: nfs-volume-db-credentials
  type: user
- name: notifications-db-credentials
  type: user
- name: pivotal-account-db-credentials
  type: user
- name: push-pivotal-account-encryption-key
  type: password
- name: push-usage-service-secret-token
  type: password
- name: router-route-services-secret
  type: password
- name: router-status-credentials
  options:
    username: router_status
  type: user
- name: routing-db-credentials
  type: user
- name: silk-db-credentials
  type: user
- name: uaa-db-credentials
  type: user
- name: webdav-blobstore-credentials
  options:
    username: blobstore
  type: user
