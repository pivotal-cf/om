# Squid configuration with Kerberos authentication
pid_filename /run/squid/squid.pid
http_port 3128

# Access control
acl localnet src 172.20.0.0/16
acl Safe_ports port 80
acl Safe_ports port 443
acl CONNECT method CONNECT

http_access deny !Safe_ports
http_access deny CONNECT !Safe_ports
http_access allow localnet

# Kerberos authentication
auth_param negotiate program /usr/lib/squid/negotiate_kerberos_auth -d
auth_param negotiate children 5
auth_param negotiate realm EXAMPLE.COM

# Authenticated users
acl authenticated proxy_auth REQUIRED
http_access allow authenticated
http_access deny all

# Logging
access_log /var/log/squid/access.log squid
cache_log /var/log/squid/cache.log

# Cache settings (minimal for testing)
cache_dir ufs /var/spool/squid 100 16 256
coredump_dir /var/spool/squid

# Forward to destination (allow direct connections)
# Remove never_direct to allow Squid to connect directly to destinations

